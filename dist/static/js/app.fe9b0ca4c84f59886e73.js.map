{"version":3,"sources":["webpack:///./src/assets/js/plugins/jcanvas.js","webpack:///src/components/Avatar/Avatar.vue","webpack:///./src/assets/js/plugins/flexible.js","webpack:///./src/components/Avatar/Avatar.vue?47a4","webpack:///./src/components/Avatar/Avatar.vue","webpack:///src/components/Tab/Tab.vue","webpack:///./src/components/Tab/Tab.vue?5df4","webpack:///./src/components/Tab/Tab.vue","webpack:///src/base/ColorPicker/ColorPicker.vue","webpack:///./src/base/ColorPicker/ColorPicker.vue?3912","webpack:///./src/base/ColorPicker/ColorPicker.vue","webpack:///src/components/List/List.vue","webpack:///./src/components/List/List.vue?9fe3","webpack:///./src/components/List/List.vue","webpack:///./src/assets/js/plugins/imgPreLoad.js","webpack:///src/base/Loading/Loading.vue","webpack:///./src/base/Loading/Loading.vue?eb2e","webpack:///./src/base/Loading/Loading.vue","webpack:///src/base/StartPage/StartPage.vue","webpack:///./src/base/StartPage/StartPage.vue?e1ac","webpack:///./src/base/StartPage/StartPage.vue","webpack:///src/App.vue","webpack:///./src/App.vue?d6d3","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/assets/images/restore.png","webpack:///./src/assets/js/plugins/hsl2rgb.js"],"names":["jQuery","global","factory","window","__webpack_provided_window_dot_jQuery","this","$","defaults","document","Image","Array","getComputedStyle","Math","Number","parseFloat","extendObject","extend","inArray","typeOf","operand","Object","prototype","toString","call","slice","toLowerCase","isPlainObject","PI","round","abs","sin","cos","atan2","arraySlice","jQueryEventFix","event","fix","maps","caches","dataCache","propCache","imageCache","baseTransforms","rotate","scaleX","scaleY","translateX","translateY","masks","css","tangibleEvents","jCanvasObject","args","propName","hasOwnProperty","styles","jCanvas","events","eventHooks","future","jCanvasDefaults","baseDefaults","isString","isFunction","isNumeric","isNaN","_getContext","canvas","getContext","_coerceNumericProps","props","propValue","undefined","text","String","_cloneTransforms","transforms","_saveCanvas","ctx","data","save","savedTransforms","push","_restoreCanvas","length","restore","pop","_setStyle","params","styleName","_setGlobalProps","lineWidth","strokeWidth","rounded","lineCap","lineJoin","strokeCap","strokeJoin","miterLimit","strokeDash","setLineDash","webkitLineDash","lineDashOffset","webkitLineDashOffset","mozDashOffset","strokeDashOffset","shadowOffsetX","shadowX","shadowOffsetY","shadowY","shadowBlur","shadowColor","globalAlpha","opacity","globalCompositeOperation","compositing","imageSmoothing","imageSmoothingEnabled","_enableMasking","mask","autosave","clip","_args","_restoreTransform","_transformed","_closePath","closed","closePath","shadowStroke","stroke","fill","fillStyle","_getCanvasData","_transformShape","width","height","_toRad","inDegrees","fromCenter","_centered","x","y","_rotateCanvas","scale","_scaleCanvas","translate","_translateCanvas","_canvas","_data","layers","layer","names","groups","intersecting","lastIntersected","cursor","drag","dragging","type","animating","animated","pixelRatio","scaled","redrawOnMousemove","_addLayerEvents","$canvas","eventName","cursors","_addExplicitLayerEvent","mouseout","bind","l","_triggerLayerEvent","_hovered","triggerLayerEvent","drawLayers","_addLayerEvent","_event","_enableDrag","dragHelperEvents","i","draggable","_updateLayerName","nameMap","name","_updateLayerGroups","group","groupName","g","index","groupMap","splice","_getIntersectingLayer","m","_masks","intersects","intangible","_drawLayer","nextLayerIndex","visible","_method","_next","_handleLayerDrag","eventType","dragGroups","newX","newY","bringToFront","_startX","_startY","_endX","_eventX","_endY","_eventY","updateDragX","updateDragY","dx","dy","restrictDragToAxis","originalRedrawOnMousemove","_resetCursor","_runEventCallback","callbacks","arg","_running","disableEvents","_layerCanFireEvent","prefix","_setCursor","_addLayer","method","_layer","fn","drawings","drawText","measureText","_hideProps","obj","reset","cssProp","p","propsObj","_parseEndValues","endValues","subPropName","subPropValue","_colorToRgbArray","color","originalColor","elem","rgb","multiple","match","head","style","_animateColor","fx","n","start","end","now","pos","join","nodeName","prop","_getMouseEventName","mouseEvents","_createEvent","helperEventName","touchEventName","eventCache","eventCallback","offsetX","offsetY","resetFire","preventDefault","touchEvents","_getTouchEventName","_detectEvents","angle","isPointInPath","isPointInStroke","eventX","eventY","Boolean","_getCoterminal","_getArcX","radius","_getArcY","_drawArc","path","x3","y3","diff","ccw","_addStartArrow","arc","_addEndArrow","_addArrow","x1","y1","x2","y2","leftX","leftY","rightX","rightY","arrowRadius","arrowAngle","moveTo","lineTo","_arrowAngleConverted","startArrow","endArrow","_drawLine","lx","ly","_drawQuadratic","lcx","lcy","cx1","cy1","quadraticCurveTo","_drawBezier","lc","lcx1","lcy1","lcx2","lcy2","bezierCurveTo","_getVectorX","_getVectorY","_drawVector","x4","y4","a1","l1","_setCanvasFont","fontSize","font","fontStyle","fontFamily","_measureText","lines","originalSize","curWidth","maxWidth","lineHeight","_wrapText","line","words","w","allText","manualLines","split","allLines","concat","replace","align","baseline","concavity","cornerRadius","count","cropFromCenter","crossOrigin","letterSpacing","r1","r2","repeat","respectAlign","sHeight","sides","source","spread","strokeStyle","sWidth","sx","sy","plugin","self","e","getEventHooks","setEventHooks","getLayers","callback","matching","getLayer","layerId","idType","getLayerGroup","groupId","getLayerIndex","setLayer","propType","indexOf","substr","isEmptyObject","setLayers","setLayerGroup","moveLayer","removeLayer","removeLayers","removeLayerGroup","addLayerToGroup","removeLayerFromGroup","documentElement","OLink","drawLayer","lastLayer","lastIndex","isImageLayer","clear","clearCanvas","complete","drawLayersComplete","_fired","drawImage","mouseover","addLayer","animateLayer","arguments","_showProps","_removeSubPropAliases","_animating","step","parts","hidden","_pos","duration","easing","draw","animate","animateLayerGroup","apply","delayLayer","delay","delayLayerGroup","stopLayer","clearQueue","stop","stopLayerGroup","_supportColorProps","mousedown","mouseup","mousemove","touchstart","touchend","touchmove","eventNames","_createEvents","offset","originalEvent","touches","changedTouches","pageX","currentTarget","left","pageY","top","error","bezier","ellipse","function","image","polygon","quadratic","rectangle","vector","setTransform","clearRect","saveCanvas","restoreCanvas","rotateCanvas","scaleCanvas","translateCanvas","drawRect","r","temp","beginPath","rect","drawArc","drawEllipse","controlW","controlH","drawPolygon","theta","dtheta","hdtheta","apothem","drawSlice","drawLine","drawQuadratic","drawBezier","drawVector","drawPath","lp","nchars","chars","ch","c","textBaseline","textAlign","flipArcText","reverse","fillText","strokeText","constantCloseness","img","imgCtx","onload","load","src","createPattern","pattern","$canvases","createGradient","gradient","nstops","a","stops","createRadialGradient","createLinearGradient","addColorStop","setPixels","canvasData","px","imgData","pixelData","len","getImageData","each","b","putImageData","getCanvasImage","quality","dataURL","toDataURL","detectPixelRatio","ratio","oldWidth","oldHeight","devicePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","clearCache","cacheName","support","setGlobalProps","transformShape","detectEvents","setCanvasFont","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof___default","module","exports","__webpack_exports__","headOptions","default","computed","hasBgHair","url","hair","reg","RegExp","lastHasBgHair","test","eval","bgColor","faceColor","hairColor","watch","handler","removeCanvas","drawCanvas","deep","colorHsl","_selectColor","bg","face","created","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default","__WEBPACK_IMPORTED_MODULE_2_jquery___default","mounted","methods","rondomSelect","$emit","headTap","that","options","body","cloth","eye","brow","nose","mouth","glasses","cap","hand","canvasLoaded","attr","_getImgData","imgUrl","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","resolve","reject","imageData","targetNode","_this","rgbArr","__WEBPACK_IMPORTED_MODULE_4__assets_js_plugins_hsl2rgb__","then","oldU8a","newImgdata","createImageData","newU8a","colorImg","win","lib","tid","doc","docEl","metaEl","querySelector","flexibleEl","dpr","flexible","console","warn","getAttribute","parseInt","content","initialDpr","maximumDpr","toFixed","navigator","appVersion","isIPhone","setAttribute","createElement","firstElementChild","appendChild","wrap","write","innerHTML","refreshRem","getBoundingClientRect","rem","addEventListener","clearTimeout","setTimeout","persisted","readyState","rem2px","d","val","px2rem","Avatar_Avatar","render","_vm","_h","$createElement","_c","_self","ref","staticClass","on","click","_m","_v","attrs","alt","$event","stopPropagation","staticRenderFns","id","__vue_styles__","ssrContext","__webpack_require__","components_Avatar_Avatar","normalizeComponent","Avatar","Tab","actPart","partName","suit","headOptionsLen","item","_initScroll","selectTab","key","tabScroll","scrollToElement","target","iscroll_default","$refs","scrollX","scrollY","disablePointer","disableTouch","disableMouse","Tab_Tab","_l","class","active","_s","_e","components_Tab_Tab","Tab_normalizeComponent","ColorPicker","touch","startX","deltaX","offsetWidth","wrapWidth","colorH","colorS","colorL","newColorHsl","colorPicker","clientWidth","pickerTouchStart","el","transform","clientX","pickerTouchMove","offsetParent","className","min","max","pickerTouchEnd","hsl2rgb","colorRgb","ColorPicker_ColorPicker","staticStyle","background","base_ColorPicker_ColorPicker","ColorPicker_normalizeComponent","List","partList","actIndex","listLen","ceil","refresh","listScroll","scrollTo","actIndexes","tabItem","_this2","selectItem","iscroll_probe_default","mouseWheel","probeType","selectColor","selectSuit","restoreItem","restoreSuit","components","List_List","lazy","directives","rawName","value","expression","thumb","color-hsl","select-color","components_List_List","List_normalizeComponent","imgPreLoad","imgList","timeout","total","loaded","imgages","_on","onerror","Loading","preLoadArr","isShow","precent","percentage","percentT","Loading_Loading","base_Loading_Loading","Loading_normalizeComponent","StartPage","startGO","StartPage_StartPage","base_StartPage_StartPage","StartPage_normalizeComponent","UA","userAgent","App","headOrigin","startPageShow","device","assign_default","searches","location","search","substring","forEach","ret","app","lite","android","ios","iphonex","screen","wx","jquery_default","ajax","response","errno","avatarData","custom","qixiBoy","log","moveY","endY","isListRefresh","isStop","appHeadHeightOrigin","appHead","$el","appTabWrapperHeightOrigin","appTabWrapper","appListWrapperHeightOrigin","appListWrapper","hslArr","selectColorImg","distY","transition","appListWrapperOuterHeight","appListWrapperInnerHeight","childNodes","offsetHeight","listScrollEnd","StartGO","randomSelect","result","entries_default","arr","random","selectortype_template_index_0_src_App","start-go","select-color-img","head-tap","rondom-select","act-part","select-tab","select-item","select-suit","restore-item","restore-suit","list-scroll","list-scroll-end","src_App","App_normalizeComponent","vue_esm","use","vue_lazyload_default","preLoad","loading","attempt","dispatchEvent","config","productionTip","template","h","s","hue2rgb","q","t"],"mappings":"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","file":"static/js/app.fe9b0ca4c84f59886e73.js","sourcesContent":["/**\n * @license jCanvas v21.0.1\n * Copyright 2017 Caleb Evans\n * Released under the MIT license\n */\n(function (jQuery, global, factory) {\n\t'use strict';\n\n\tif (typeof module === 'object' && typeof module.exports === 'object') {\n\t\tmodule.exports = function (jQuery, w) {\n\t\t\treturn factory(jQuery, w);\n\t\t};\n\t} else {\n\t\tfactory(jQuery, global);\n\t}\n\n// Pass this if window is not defined yet\n}(typeof window !== 'undefined' ? window.jQuery : {}, typeof window !== 'undefined' ? window : this, function ($, window) {\n'use strict';\n\nvar document = window.document,\n\tImage = window.Image,\n\tArray = window.Array,\n\tgetComputedStyle = window.getComputedStyle,\n\tMath = window.Math,\n\tNumber = window.Number,\n\tparseFloat = window.parseFloat;\n\n// Define local aliases to frequently used properties\nvar defaults,\n\t// Aliases to jQuery methods\n\textendObject = $.extend,\n\tinArray = $.inArray,\n\ttypeOf = function (operand) {\n\t\treturn Object.prototype.toString.call(operand)\n\t\t\t.slice(8, -1).toLowerCase();\n\t},\n\tisPlainObject = $.isPlainObject,\n\t// Math constants and functions\n\tPI = Math.PI,\n\tround = Math.round,\n\tabs = Math.abs,\n\tsin = Math.sin,\n\tcos = Math.cos,\n\tatan2 = Math.atan2,\n\t// The Array slice() method\n\tarraySlice = Array.prototype.slice,\n\t// jQuery's internal event normalization function\n\tjQueryEventFix = $.event.fix,\n\t// Object for storing a number of internal property maps\n\tmaps = {},\n\t// jQuery internal caches\n\tcaches = {\n\t\tdataCache: {},\n\t\tpropCache: {},\n\t\timageCache: {}\n\t},\n\t// Base transformations\n\tbaseTransforms = {\n\t\trotate: 0,\n\t\tscaleX: 1,\n\t\tscaleY: 1,\n\t\ttranslateX: 0,\n\t\ttranslateY: 0,\n\t\t// Store all previous masks\n\t\tmasks: []\n\t},\n\t// Object for storing CSS-related properties\n\tcss = {},\n\ttangibleEvents = [\n\t\t'mousedown',\n\t\t'mousemove',\n\t\t'mouseup',\n\t\t'mouseover',\n\t\t'mouseout',\n\t\t'touchstart',\n\t\t'touchmove',\n\t\t'touchend'\n\t];\n\n// Constructor for creating objects that inherit from jCanvas preferences and defaults\nfunction jCanvasObject(args) {\n\tvar params = this,\n\t\tpropName;\n\t// Copy the given parameters into new object\n\tfor (propName in args) {\n\t\t// Do not merge defaults into parameters\n\t\tif (Object.prototype.hasOwnProperty.call(args, propName)) {\n\t\t\tparams[propName] = args[propName];\n\t\t}\n\t}\n\treturn params;\n}\n\n// jCanvas object in which global settings are other data are stored\nvar jCanvas = {\n\t// Events object for storing jCanvas event initiation functions\n\tevents: {},\n\t// Object containing all jCanvas event hooks\n\teventHooks: {},\n\t// Settings for enabling future jCanvas features\n\tfuture: {}\n};\n\n// jCanvas default property values\nfunction jCanvasDefaults() {\n\textendObject(this, jCanvasDefaults.baseDefaults);\n}\njCanvasDefaults.baseDefaults = {\n\talign: 'center',\n\tarrowAngle: 90,\n\tarrowRadius: 0,\n\tautosave: true,\n\tbaseline: 'middle',\n\tbringToFront: false,\n\tccw: false,\n\tclosed: false,\n\tcompositing: 'source-over',\n\tconcavity: 0,\n\tcornerRadius: 0,\n\tcount: 1,\n\tcropFromCenter: true,\n\tcrossOrigin: null,\n\tcursors: null,\n\tdisableEvents: false,\n\tdraggable: false,\n\tdragGroups: null,\n\tgroups: null,\n\tdata: null,\n\tdx: null,\n\tdy: null,\n\tend: 360,\n\teventX: null,\n\teventY: null,\n\tfillStyle: 'transparent',\n\tfontStyle: 'normal',\n\tfontSize: '12pt',\n\tfontFamily: 'sans-serif',\n\tfromCenter: true,\n\theight: null,\n\timageSmoothing: true,\n\tinDegrees: true,\n\tintangible: false,\n\tindex: null,\n\tletterSpacing: null,\n\tlineHeight: 1,\n\tlayer: false,\n\tmask: false,\n\tmaxWidth: null,\n\tmiterLimit: 10,\n\tname: null,\n\topacity: 1,\n\tr1: null,\n\tr2: null,\n\tradius: 0,\n\trepeat: 'repeat',\n\trespectAlign: false,\n\trestrictDragToAxis: null,\n\trotate: 0,\n\trounded: false,\n\tscale: 1,\n\tscaleX: 1,\n\tscaleY: 1,\n\tshadowBlur: 0,\n\tshadowColor: 'transparent',\n\tshadowStroke: false,\n\tshadowX: 0,\n\tshadowY: 0,\n\tsHeight: null,\n\tsides: 0,\n\tsource: '',\n\tspread: 0,\n\tstart: 0,\n\tstrokeCap: 'butt',\n\tstrokeDash: null,\n\tstrokeDashOffset: 0,\n\tstrokeJoin: 'miter',\n\tstrokeStyle: 'transparent',\n\tstrokeWidth: 1,\n\tsWidth: null,\n\tsx: null,\n\tsy: null,\n\ttext: '',\n\ttranslate: 0,\n\ttranslateX: 0,\n\ttranslateY: 0,\n\ttype: null,\n\tvisible: true,\n\twidth: null,\n\tx: 0,\n\ty: 0\n};\ndefaults = new jCanvasDefaults();\njCanvasObject.prototype = defaults;\n\n/* Internal helper methods */\n\n// Determines if the given operand is a string\nfunction isString(operand) {\n\treturn (typeOf(operand) === 'string');\n}\n\n// Determines if the given operand is a function\nfunction isFunction(operand) {\n\treturn (typeOf(operand) === 'function');\n}\n\n// Determines if the given operand is numeric\nfunction isNumeric(operand) {\n\treturn !isNaN(Number(operand)) && !isNaN(parseFloat(operand));\n}\n\n// Get 2D context for the given canvas\nfunction _getContext(canvas) {\n\treturn (canvas && canvas.getContext ? canvas.getContext('2d') : null);\n}\n\n// Coerce designated number properties from strings to numbers\nfunction _coerceNumericProps(props) {\n\tvar propName, propType, propValue;\n\t// Loop through all properties in given property map\n\tfor (propName in props) {\n\t\tif (Object.prototype.hasOwnProperty.call(props, propName)) {\n\t\t\tpropValue = props[propName];\n\t\t\tpropType = typeOf(propValue);\n\t\t\t// If property is non-empty string and value is numeric\n\t\t\tif (propType === 'string' && isNumeric(propValue) && propName !== 'text') {\n\t\t\t\t// Convert value to number\n\t\t\t\tprops[propName] = parseFloat(propValue);\n\t\t\t}\n\t\t}\n\t}\n\t// Ensure value of text property is always a string\n\tif (props.text !== undefined) {\n\t\tprops.text = String(props.text);\n\t}\n}\n\n// Clone the given transformations object\nfunction _cloneTransforms(transforms) {\n\t// Clone the object itself\n\ttransforms = extendObject({}, transforms);\n\t// Clone the object's masks array\n\ttransforms.masks = transforms.masks.slice(0);\n\treturn transforms;\n}\n\n// Save canvas context and update transformation stack\nfunction _saveCanvas(ctx, data) {\n\tvar transforms;\n\tctx.save();\n\ttransforms = _cloneTransforms(data.transforms);\n\tdata.savedTransforms.push(transforms);\n}\n\n// Restore canvas context update transformation stack\nfunction _restoreCanvas(ctx, data) {\n\tif (data.savedTransforms.length === 0) {\n\t\t// Reset transformation state if it can't be restored any more\n\t\tdata.transforms = _cloneTransforms(baseTransforms);\n\t} else {\n\t\t// Restore canvas context\n\t\tctx.restore();\n\t\t// Restore current transform state to the last saved state\n\t\tdata.transforms = data.savedTransforms.pop();\n\t}\n}\n\n// Set the style with the given name\nfunction _setStyle(canvas, ctx, params, styleName) {\n\tif (params[styleName]) {\n\t\tif (isFunction(params[styleName])) {\n\t\t\t// Handle functions\n\t\t\tctx[styleName] = params[styleName].call(canvas, params);\n\t\t} else {\n\t\t\t// Handle string values\n\t\t\tctx[styleName] = params[styleName];\n\t\t}\n\t}\n}\n\n// Set canvas context properties\nfunction _setGlobalProps(canvas, ctx, params) {\n\t_setStyle(canvas, ctx, params, 'fillStyle');\n\t_setStyle(canvas, ctx, params, 'strokeStyle');\n\tctx.lineWidth = params.strokeWidth;\n\t// Optionally round corners for paths\n\tif (params.rounded) {\n\t\tctx.lineCap = ctx.lineJoin = 'round';\n\t} else {\n\t\tctx.lineCap = params.strokeCap;\n\t\tctx.lineJoin = params.strokeJoin;\n\t\tctx.miterLimit = params.miterLimit;\n\t}\n\t// Reset strokeDash if null\n\tif (!params.strokeDash) {\n\t\tparams.strokeDash = [];\n\t}\n\t// Dashed lines\n\tif (ctx.setLineDash) {\n\t\tctx.setLineDash(params.strokeDash);\n\t}\n\tctx.webkitLineDash = params.strokeDash;\n\tctx.lineDashOffset = ctx.webkitLineDashOffset = ctx.mozDashOffset = params.strokeDashOffset;\n\t// Drop shadow\n\tctx.shadowOffsetX = params.shadowX;\n\tctx.shadowOffsetY = params.shadowY;\n\tctx.shadowBlur = params.shadowBlur;\n\tctx.shadowColor = params.shadowColor;\n\t// Opacity and composite operation\n\tctx.globalAlpha = params.opacity;\n\tctx.globalCompositeOperation = params.compositing;\n\t// Support cross-browser toggling of image smoothing\n\tif (params.imageSmoothing) {\n\t\tctx.imageSmoothingEnabled = params.imageSmoothing;\n\t}\n}\n\n// Optionally enable masking support for this path\nfunction _enableMasking(ctx, data, params) {\n\tif (params.mask) {\n\t\t// If jCanvas autosave is enabled\n\t\tif (params.autosave) {\n\t\t\t// Automatically save transformation state by default\n\t\t\t_saveCanvas(ctx, data);\n\t\t}\n\t\t// Clip the current path\n\t\tctx.clip();\n\t\t// Keep track of current masks\n\t\tdata.transforms.masks.push(params._args);\n\t}\n}\n\n// Restore individual shape transformation\nfunction _restoreTransform(ctx, params) {\n\t// If shape has been transformed by jCanvas\n\tif (params._transformed) {\n\t\t// Restore canvas context\n\t\tctx.restore();\n\t}\n}\n\n// Close current canvas path\nfunction _closePath(canvas, ctx, params) {\n\tvar data;\n\n\t// Optionally close path\n\tif (params.closed) {\n\t\tctx.closePath();\n\t}\n\n\tif (params.shadowStroke && params.strokeWidth !== 0) {\n\t\t// Extend the shadow to include the stroke of a drawing\n\n\t\t// Add a stroke shadow by stroking before filling\n\t\tctx.stroke();\n\t\tctx.fill();\n\t\t// Ensure the below stroking does not inherit a shadow\n\t\tctx.shadowColor = 'transparent';\n\t\tctx.shadowBlur = 0;\n\t\t// Stroke over fill as usual\n\t\tctx.stroke();\n\n\t} else {\n\t\t// If shadowStroke is not enabled, stroke & fill as usual\n\n\t\tctx.fill();\n\t\t// Prevent extra shadow created by stroke (but only when fill is present)\n\t\tif (params.fillStyle !== 'transparent') {\n\t\t\tctx.shadowColor = 'transparent';\n\t\t}\n\t\tif (params.strokeWidth !== 0) {\n\t\t\t// Only stroke if the stroke is not 0\n\t\t\tctx.stroke();\n\t\t}\n\n\t}\n\n\t// Optionally close path\n\tif (!params.closed) {\n\t\tctx.closePath();\n\t}\n\n\t// Restore individual shape transformation\n\t_restoreTransform(ctx, params);\n\n\t// Mask shape if chosen\n\tif (params.mask) {\n\t\t// Retrieve canvas data\n\t\tdata = _getCanvasData(canvas);\n\t\t_enableMasking(ctx, data, params);\n\t}\n\n}\n\n// Transform (translate, scale, or rotate) shape\nfunction _transformShape(canvas, ctx, params, width, height) {\n\n\t// Get conversion factor for radians\n\tparams._toRad = (params.inDegrees ? (PI / 180) : 1);\n\n\tparams._transformed = true;\n\tctx.save();\n\n\t// Optionally measure (x, y) position from top-left corner\n\tif (!params.fromCenter && !params._centered && width !== undefined) {\n\t\t// Always draw from center unless otherwise specified\n\t\tif (height === undefined) {\n\t\t\theight = width;\n\t\t}\n\t\tparams.x += width / 2;\n\t\tparams.y += height / 2;\n\t\tparams._centered = true;\n\t}\n\t// Optionally rotate shape\n\tif (params.rotate) {\n\t\t_rotateCanvas(ctx, params, null);\n\t}\n\t// Optionally scale shape\n\tif (params.scale !== 1 || params.scaleX !== 1 || params.scaleY !== 1) {\n\t\t_scaleCanvas(ctx, params, null);\n\t}\n\t// Optionally translate shape\n\tif (params.translate || params.translateX || params.translateY) {\n\t\t_translateCanvas(ctx, params, null);\n\t}\n\n}\n\n/* Plugin API */\n\n// Extend jCanvas with a user-defined method\njCanvas.extend = function extend(plugin) {\n\n\t// Create plugin\n\tif (plugin.name) {\n\t\t// Merge properties with defaults\n\t\tif (plugin.props) {\n\t\t\textendObject(defaults, plugin.props);\n\t\t}\n\t\t// Define plugin method\n\t\t$.fn[plugin.name] = function self(args) {\n\t\t\tvar $canvases = this, canvas, e, ctx,\n\t\t\t\tparams;\n\n\t\t\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\t\t\tcanvas = $canvases[e];\n\t\t\t\tctx = _getContext(canvas);\n\t\t\t\tif (ctx) {\n\n\t\t\t\t\tparams = new jCanvasObject(args);\n\t\t\t\t\t_addLayer(canvas, params, args, self);\n\n\t\t\t\t\t_setGlobalProps(canvas, ctx, params);\n\t\t\t\t\tplugin.fn.call(canvas, ctx, params);\n\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn $canvases;\n\t\t};\n\t\t// Add drawing type to drawing map\n\t\tif (plugin.type) {\n\t\t\tmaps.drawings[plugin.type] = plugin.name;\n\t\t}\n\t}\n\treturn $.fn[plugin.name];\n};\n\n/* Layer API */\n\n// Retrieved the stored jCanvas data for a canvas element\nfunction _getCanvasData(canvas) {\n\tvar dataCache = caches.dataCache, data;\n\tif (dataCache._canvas === canvas && dataCache._data) {\n\n\t\t// Retrieve canvas data from cache if possible\n\t\tdata = dataCache._data;\n\n\t} else {\n\n\t\t// Retrieve canvas data from jQuery's internal data storage\n\t\tdata = $.data(canvas, 'jCanvas');\n\t\tif (!data) {\n\n\t\t\t// Create canvas data object if it does not already exist\n\t\t\tdata = {\n\t\t\t\t// The associated canvas element\n\t\t\t\tcanvas: canvas,\n\t\t\t\t// Layers array\n\t\t\t\tlayers: [],\n\t\t\t\t// Layer maps\n\t\t\t\tlayer: {\n\t\t\t\t\tnames: {},\n\t\t\t\t\tgroups: {}\n\t\t\t\t},\n\t\t\t\teventHooks: {},\n\t\t\t\t// All layers that intersect with the event coordinates (regardless of visibility)\n\t\t\t\tintersecting: [],\n\t\t\t\t// The topmost layer whose area contains the event coordinates\n\t\t\t\tlastIntersected: null,\n\t\t\t\tcursor: $(canvas).css('cursor'),\n\t\t\t\t// Properties for the current drag event\n\t\t\t\tdrag: {\n\t\t\t\t\tlayer: null,\n\t\t\t\t\tdragging: false\n\t\t\t\t},\n\t\t\t\t// Data for the current event\n\t\t\t\tevent: {\n\t\t\t\t\ttype: null,\n\t\t\t\t\tx: null,\n\t\t\t\t\ty: null\n\t\t\t\t},\n\t\t\t\t// Events which already have been bound to the canvas\n\t\t\t\tevents: {},\n\t\t\t\t// The canvas's current transformation state\n\t\t\t\ttransforms: _cloneTransforms(baseTransforms),\n\t\t\t\tsavedTransforms: [],\n\t\t\t\t// Whether a layer is being animated or not\n\t\t\t\tanimating: false,\n\t\t\t\t// The layer currently being animated\n\t\t\t\tanimated: null,\n\t\t\t\t// The device pixel ratio\n\t\t\t\tpixelRatio: 1,\n\t\t\t\t// Whether pixel ratio transformations have been applied\n\t\t\t\tscaled: false,\n\t\t\t\t// Whether the canvas should be redrawn when a layer mousemove\n\t\t\t\t// event triggers (either directly, or indirectly via dragging)\n\t\t\t\tredrawOnMousemove: false\n\t\t\t};\n\t\t\t// Use jQuery to store canvas data\n\t\t\t$.data(canvas, 'jCanvas', data);\n\n\t\t}\n\t\t// Cache canvas data for faster retrieval\n\t\tdataCache._canvas = canvas;\n\t\tdataCache._data = data;\n\n\t}\n\treturn data;\n}\n\n// Initialize all of a layer's associated jCanvas events\nfunction _addLayerEvents($canvas, data, layer) {\n\tvar eventName;\n\t// Determine which jCanvas events need to be bound to this layer\n\tfor (eventName in jCanvas.events) {\n\t\tif (Object.prototype.hasOwnProperty.call(jCanvas.events, eventName)) {\n\t\t\t// If layer has callback function to complement it\n\t\t\tif (layer[eventName] || (layer.cursors && layer.cursors[eventName])) {\n\t\t\t\t// Bind event to layer\n\t\t\t\t_addExplicitLayerEvent($canvas, data, layer, eventName);\n\t\t\t}\n\t\t}\n\t}\n\tif (!data.events.mouseout) {\n\t\t$canvas.bind('mouseout.jCanvas', function () {\n\t\t\t// Retrieve the layer whose drag event was canceled\n\t\t\tvar layer = data.drag.layer, l;\n\t\t\t// If cursor mouses out of canvas while dragging\n\t\t\tif (layer) {\n\t\t\t\t// Cancel drag\n\t\t\t\tdata.drag = {};\n\t\t\t\t_triggerLayerEvent($canvas, data, layer, 'dragcancel');\n\t\t\t}\n\t\t\t// Loop through all layers\n\t\t\tfor (l = 0; l < data.layers.length; l += 1) {\n\t\t\t\tlayer = data.layers[l];\n\t\t\t\t// If layer thinks it's still being moused over\n\t\t\t\tif (layer._hovered) {\n\t\t\t\t\t// Trigger mouseout on layer\n\t\t\t\t\t$canvas.triggerLayerEvent(data.layers[l], 'mouseout');\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Redraw layers\n\t\t\t$canvas.drawLayers();\n\t\t});\n\t\t// Indicate that an event handler has been bound\n\t\tdata.events.mouseout = true;\n\t}\n}\n\n// Initialize the given event on the given layer\nfunction _addLayerEvent($canvas, data, layer, eventName) {\n\t// Use touch events if appropriate\n\t// eventName = _getMouseEventName(eventName);\n\t// Bind event to layer\n\tjCanvas.events[eventName]($canvas, data);\n\tlayer._event = true;\n}\n\n// Add a layer event that was explicitly declared in the layer's parameter map,\n// excluding events added implicitly (e.g. mousemove event required by draggable\n// layers)\nfunction _addExplicitLayerEvent($canvas, data, layer, eventName) {\n\t_addLayerEvent($canvas, data, layer, eventName);\n\tif (eventName === 'mouseover' || eventName === 'mouseout' || eventName === 'mousemove') {\n\t\tdata.redrawOnMousemove = true;\n\t}\n}\n\n// Enable drag support for this layer\nfunction _enableDrag($canvas, data, layer) {\n\tvar dragHelperEvents, eventName, i;\n\t// Only make layer draggable if necessary\n\tif (layer.draggable || layer.cursors) {\n\n\t\t// Organize helper events which enable drag support\n\t\tdragHelperEvents = ['mousedown', 'mousemove', 'mouseup'];\n\n\t\t// Bind each helper event to the canvas\n\t\tfor (i = 0; i < dragHelperEvents.length; i += 1) {\n\t\t\t// Use touch events if appropriate\n\t\t\teventName = dragHelperEvents[i];\n\t\t\t// Bind event\n\t\t\t_addLayerEvent($canvas, data, layer, eventName);\n\t\t}\n\t\t// Indicate that this layer has events bound to it\n\t\tlayer._event = true;\n\n\t}\n}\n\n// Update a layer property map if property is changed\nfunction _updateLayerName($canvas, data, layer, props) {\n\tvar nameMap = data.layer.names;\n\n\t// If layer name is being added, not changed\n\tif (!props) {\n\n\t\tprops = layer;\n\n\t} else {\n\n\t\t// Remove old layer name entry because layer name has changed\n\t\tif (props.name !== undefined && isString(layer.name) && layer.name !== props.name) {\n\t\t\tdelete nameMap[layer.name];\n\t\t}\n\n\t}\n\n\t// Add new entry to layer name map with new name\n\tif (isString(props.name)) {\n\t\tnameMap[props.name] = layer;\n\t}\n}\n\n// Create or update the data map for the given layer and group type\nfunction _updateLayerGroups($canvas, data, layer, props) {\n\tvar groupMap = data.layer.groups,\n\t\tgroup, groupName, g,\n\t\tindex, l;\n\n\t// If group name is not changing\n\tif (!props) {\n\n\t\tprops = layer;\n\n\t} else {\n\n\t\t// Remove layer from all of its associated groups\n\t\tif (props.groups !== undefined && layer.groups !== null) {\n\t\t\tfor (g = 0; g < layer.groups.length; g += 1) {\n\t\t\t\tgroupName = layer.groups[g];\n\t\t\t\tgroup = groupMap[groupName];\n\t\t\t\tif (group) {\n\t\t\t\t\t// Remove layer from its old layer group entry\n\t\t\t\t\tfor (l = 0; l < group.length; l += 1) {\n\t\t\t\t\t\tif (group[l] === layer) {\n\t\t\t\t\t\t\t// Keep track of the layer's initial index\n\t\t\t\t\t\t\tindex = l;\n\t\t\t\t\t\t\t// Remove layer once found\n\t\t\t\t\t\t\tgroup.splice(l, 1);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// Remove layer group entry if group is empty\n\t\t\t\t\tif (group.length === 0) {\n\t\t\t\t\t\tdelete groupMap[groupName];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\t// Add layer to new group if a new group name is given\n\tif (props.groups !== undefined && props.groups !== null) {\n\n\t\tfor (g = 0; g < props.groups.length; g += 1) {\n\n\t\t\tgroupName = props.groups[g];\n\n\t\t\tgroup = groupMap[groupName];\n\t\t\tif (!group) {\n\t\t\t\t// Create new group entry if it doesn't exist\n\t\t\t\tgroup = groupMap[groupName] = [];\n\t\t\t\tgroup.name = groupName;\n\t\t\t}\n\t\t\tif (index === undefined) {\n\t\t\t\t// Add layer to end of group unless otherwise stated\n\t\t\t\tindex = group.length;\n\t\t\t}\n\t\t\t// Add layer to its new layer group\n\t\t\tgroup.splice(index, 0, layer);\n\n\t\t}\n\n\t}\n}\n\n// Get event hooks object for the first selected canvas\n$.fn.getEventHooks = function getEventHooks() {\n\tvar $canvases = this, canvas, data,\n\t\teventHooks = {};\n\n\tif ($canvases.length !== 0) {\n\t\tcanvas = $canvases[0];\n\t\tdata = _getCanvasData(canvas);\n\t\teventHooks = data.eventHooks;\n\t}\n\treturn eventHooks;\n};\n\n// Set event hooks for the selected canvases\n$.fn.setEventHooks = function setEventHooks(eventHooks) {\n\tvar $canvases = this, e,\n\t\tdata;\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\tdata = _getCanvasData($canvases[e]);\n\t\textendObject(data.eventHooks, eventHooks);\n\t}\n\treturn $canvases;\n};\n\n// Get jCanvas layers array\n$.fn.getLayers = function getLayers(callback) {\n\tvar $canvases = this, canvas, data,\n\t\tlayers, layer, l,\n\t\tmatching = [];\n\n\tif ($canvases.length !== 0) {\n\n\t\tcanvas = $canvases[0];\n\t\tdata = _getCanvasData(canvas);\n\t\t// Retrieve layers array for this canvas\n\t\tlayers = data.layers;\n\n\t\t// If a callback function is given\n\t\tif (isFunction(callback)) {\n\n\t\t\t// Filter the layers array using the callback\n\t\t\tfor (l = 0; l < layers.length; l += 1) {\n\t\t\t\tlayer = layers[l];\n\t\t\t\tif (callback.call(canvas, layer)) {\n\t\t\t\t\t// Add layer to array of matching layers if test passes\n\t\t\t\t\tmatching.push(layer);\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\t\t\t// Otherwise, get all layers\n\n\t\t\tmatching = layers;\n\n\t\t}\n\n\t}\n\treturn matching;\n};\n\n// Get a single jCanvas layer object\n$.fn.getLayer = function getLayer(layerId) {\n\tvar $canvases = this, canvas,\n\t\tdata, layers, layer, l,\n\t\tidType;\n\n\tif ($canvases.length !== 0) {\n\n\t\tcanvas = $canvases[0];\n\t\tdata = _getCanvasData(canvas);\n\t\tlayers = data.layers;\n\t\tidType = typeOf(layerId);\n\n\t\tif (layerId && layerId.layer) {\n\n\t\t\t// Return the actual layer object if given\n\t\t\tlayer = layerId;\n\n\t\t} else if (idType === 'number') {\n\n\t\t\t// Retrieve the layer using the given index\n\n\t\t\t// Allow for negative indices\n\t\t\tif (layerId < 0) {\n\t\t\t\tlayerId = layers.length + layerId;\n\t\t\t}\n\t\t\t// Get layer with the given index\n\t\t\tlayer = layers[layerId];\n\n\t\t} else if (idType === 'regexp') {\n\n\t\t\t// Get layer with the name that matches the given regex\n\t\t\tfor (l = 0; l < layers.length; l += 1) {\n\t\t\t\t// Check if layer matches name\n\t\t\t\tif (isString(layers[l].name) && layers[l].name.match(layerId)) {\n\t\t\t\t\tlayer = layers[l];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Get layer with the given name\n\t\t\tlayer = data.layer.names[layerId];\n\n\t\t}\n\n\t}\n\treturn layer;\n};\n\n// Get all layers in the given group\n$.fn.getLayerGroup = function getLayerGroup(groupId) {\n\tvar $canvases = this, canvas, data,\n\t\tgroups, groupName, group,\n\t\tidType = typeOf(groupId);\n\n\tif ($canvases.length !== 0) {\n\n\t\tcanvas = $canvases[0];\n\n\t\tif (idType === 'array') {\n\n\t\t\t// Return layer group if given\n\t\t\tgroup = groupId;\n\n\t\t} else if (idType === 'regexp') {\n\n\t\t\t// Get canvas data\n\t\t\tdata = _getCanvasData(canvas);\n\t\t\tgroups = data.layer.groups;\n\t\t\t// Loop through all layers groups for this canvas\n\t\t\tfor (groupName in groups) {\n\t\t\t\t// Find a group whose name matches the given regex\n\t\t\t\tif (groupName.match(groupId)) {\n\t\t\t\t\tgroup = groups[groupName];\n\t\t\t\t\t// Stop after finding the first matching group\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Find layer group with the given group name\n\t\t\tdata = _getCanvasData(canvas);\n\t\t\tgroup = data.layer.groups[groupId];\n\t\t}\n\n\t}\n\treturn group;\n};\n\n// Get index of layer in layers array\n$.fn.getLayerIndex = function getLayerIndex(layerId) {\n\tvar $canvases = this,\n\t\tlayers = $canvases.getLayers(),\n\t\tlayer = $canvases.getLayer(layerId);\n\n\treturn inArray(layer, layers);\n};\n\n// Set properties of a layer\n$.fn.setLayer = function setLayer(layerId, props) {\n\tvar $canvases = this, $canvas, e,\n\t\tdata, layer,\n\t\tpropName, propValue, propType;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\t$canvas = $($canvases[e]);\n\t\tdata = _getCanvasData($canvases[e]);\n\n\t\tlayer = $($canvases[e]).getLayer(layerId);\n\t\tif (layer) {\n\n\t\t\t// Update layer property maps\n\t\t\t_updateLayerName($canvas, data, layer, props);\n\t\t\t_updateLayerGroups($canvas, data, layer, props);\n\n\t\t\t_coerceNumericProps(props);\n\n\t\t\t// Merge properties with layer\n\t\t\tfor (propName in props) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(props, propName)) {\n\t\t\t\t\tpropValue = props[propName];\n\t\t\t\t\tpropType = typeOf(propValue);\n\t\t\t\t\tif (propType === 'object' && isPlainObject(propValue)) {\n\t\t\t\t\t\t// Clone objects\n\t\t\t\t\t\tlayer[propName] = extendObject({}, propValue);\n\t\t\t\t\t\t_coerceNumericProps(layer[propName]);\n\t\t\t\t\t} else if (propType === 'array') {\n\t\t\t\t\t\t// Clone arrays\n\t\t\t\t\t\tlayer[propName] = propValue.slice(0);\n\t\t\t\t\t} else if (propType === 'string') {\n\t\t\t\t\t\tif (propValue.indexOf('+=') === 0) {\n\t\t\t\t\t\t\t// Increment numbers prefixed with +=\n\t\t\t\t\t\t\tlayer[propName] += parseFloat(propValue.substr(2));\n\t\t\t\t\t\t} else if (propValue.indexOf('-=') === 0) {\n\t\t\t\t\t\t\t// Decrement numbers prefixed with -=\n\t\t\t\t\t\t\tlayer[propName] -= parseFloat(propValue.substr(2));\n\t\t\t\t\t\t} else if (!isNaN(propValue) && isNumeric(propValue) && propName !== 'text') {\n\t\t\t\t\t\t\t// Convert numeric values as strings to numbers\n\t\t\t\t\t\t\tlayer[propName] = parseFloat(propValue);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Otherwise, set given string value\n\t\t\t\t\t\t\tlayer[propName] = propValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Otherwise, set given value\n\t\t\t\t\t\tlayer[propName] = propValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Update layer events\n\t\t\t_addLayerEvents($canvas, data, layer);\n\t\t\t_enableDrag($canvas, data, layer);\n\n\t\t\t// If layer's properties were changed\n\t\t\tif ($.isEmptyObject(props) === false) {\n\t\t\t\t_triggerLayerEvent($canvas, data, layer, 'change', props);\n\t\t\t}\n\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Set properties of all layers (optionally filtered by a callback)\n$.fn.setLayers = function setLayers(props, callback) {\n\tvar $canvases = this, $canvas, e,\n\t\tlayers, l;\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\t$canvas = $($canvases[e]);\n\n\t\tlayers = $canvas.getLayers(callback);\n\t\t// Loop through all layers\n\t\tfor (l = 0; l < layers.length; l += 1) {\n\t\t\t// Set properties of each layer\n\t\t\t$canvas.setLayer(layers[l], props);\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Set properties of all layers in the given group\n$.fn.setLayerGroup = function setLayerGroup(groupId, props) {\n\tvar $canvases = this, $canvas, e,\n\t\tgroup, l;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\t// Get layer group\n\t\t$canvas = $($canvases[e]);\n\n\t\tgroup = $canvas.getLayerGroup(groupId);\n\t\t// If group exists\n\t\tif (group) {\n\n\t\t\t// Loop through layers in group\n\t\t\tfor (l = 0; l < group.length; l += 1) {\n\t\t\t\t// Merge given properties with layer\n\t\t\t\t$canvas.setLayer(group[l], props);\n\t\t\t}\n\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Move a layer to the given index in the layers array\n$.fn.moveLayer = function moveLayer(layerId, index) {\n\tvar $canvases = this, $canvas, e,\n\t\tdata, layers, layer;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\t$canvas = $($canvases[e]);\n\t\tdata = _getCanvasData($canvases[e]);\n\n\t\t// Retrieve layers array and desired layer\n\t\tlayers = data.layers;\n\t\tlayer = $canvas.getLayer(layerId);\n\t\tif (layer) {\n\n\t\t\t// Ensure layer index is accurate\n\t\t\tlayer.index = inArray(layer, layers);\n\n\t\t\t// Remove layer from its current placement\n\t\t\tlayers.splice(layer.index, 1);\n\t\t\t// Add layer in its new placement\n\t\t\tlayers.splice(index, 0, layer);\n\n\t\t\t// Handle negative indices\n\t\t\tif (index < 0) {\n\t\t\t\tindex = layers.length + index;\n\t\t\t}\n\t\t\t// Update layer's stored index\n\t\t\tlayer.index = index;\n\n\t\t\t_triggerLayerEvent($canvas, data, layer, 'move');\n\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Remove a jCanvas layer\n$.fn.removeLayer = function removeLayer(layerId) {\n\tvar $canvases = this, $canvas, e, data,\n\t\tlayers, layer;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\t$canvas = $($canvases[e]);\n\t\tdata = _getCanvasData($canvases[e]);\n\n\t\t// Retrieve layers array and desired layer\n\t\tlayers = $canvas.getLayers();\n\t\tlayer = $canvas.getLayer(layerId);\n\t\t// Remove layer if found\n\t\tif (layer) {\n\n\t\t\t// Ensure layer index is accurate\n\t\t\tlayer.index = inArray(layer, layers);\n\t\t\t// Remove layer and allow it to be re-added later\n\t\t\tlayers.splice(layer.index, 1);\n\t\t\tdelete layer._layer;\n\n\t\t\t// Update layer name map\n\t\t\t_updateLayerName($canvas, data, layer, {\n\t\t\t\tname: null\n\t\t\t});\n\t\t\t// Update layer group map\n\t\t\t_updateLayerGroups($canvas, data, layer, {\n\t\t\t\tgroups: null\n\t\t\t});\n\n\t\t\t// Trigger 'remove' event\n\t\t\t_triggerLayerEvent($canvas, data, layer, 'remove');\n\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Remove all layers\n$.fn.removeLayers = function removeLayers(callback) {\n\tvar $canvases = this, $canvas, e,\n\t\tdata, layers, layer, l;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\t$canvas = $($canvases[e]);\n\t\tdata = _getCanvasData($canvases[e]);\n\t\tlayers = $canvas.getLayers(callback).slice(0);\n\t\t// Remove all layers individually\n\t\tfor (l = 0; l < layers.length; l += 1) {\n\t\t\tlayer = layers[l];\n\t\t\t$canvas.removeLayer(layer);\n\t\t}\n\t\t// Update layer maps\n\t\tdata.layer.names = {};\n\t\tdata.layer.groups = {};\n\t}\n\treturn $canvases;\n};\n\n// Remove all layers in the group with the given ID\n$.fn.removeLayerGroup = function removeLayerGroup(groupId) {\n\tvar $canvases = this, $canvas, e, group, l;\n\n\tif (groupId !== undefined) {\n\t\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\t\t$canvas = $($canvases[e]);\n\n\t\t\tgroup = $canvas.getLayerGroup(groupId);\n\t\t\t// Remove layer group using given group name\n\t\t\tif (group) {\n\n\t\t\t\t// Clone groups array\n\t\t\t\tgroup = group.slice(0);\n\n\t\t\t\t// Loop through layers in group\n\t\t\t\tfor (l = 0; l < group.length; l += 1) {\n\t\t\t\t\t$canvas.removeLayer(group[l]);\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Add an existing layer to a layer group\n$.fn.addLayerToGroup = function addLayerToGroup(layerId, groupName) {\n\tvar $canvases = this, $canvas, e,\n\t\tlayer, groups = [groupName];\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\t$canvas = $($canvases[e]);\n\t\tlayer = $canvas.getLayer(layerId);\n\n\t\t// If layer is not already in group\n\t\tif (layer.groups) {\n\t\t\t// Clone groups list\n\t\t\tgroups = layer.groups.slice(0);\n\t\t\t// If layer is not already in group\n\t\t\tif (inArray(groupName, layer.groups) === -1) {\n\t\t\t\t// Add layer to group\n\t\t\t\tgroups.push(groupName);\n\t\t\t}\n\t\t}\n\t\t// Update layer group maps\n\t\t$canvas.setLayer(layer, {\n\t\t\tgroups: groups\n\t\t});\n\n\t}\n\treturn $canvases;\n};\n\n// Remove an existing layer from a layer group\n$.fn.removeLayerFromGroup = function removeLayerFromGroup(layerId, groupName) {\n\tvar $canvases = this, $canvas, e,\n\t\tlayer, groups = [],\n\t\tindex;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\t$canvas = $($canvases[e]);\n\t\tlayer = $canvas.getLayer(layerId);\n\n\t\tif (layer.groups) {\n\n\t\t\t// Find index of layer in group\n\t\t\tindex = inArray(groupName, layer.groups);\n\n\t\t\t// If layer is in group\n\t\t\tif (index !== -1) {\n\n\t\t\t\t// Clone groups list\n\t\t\t\tgroups = layer.groups.slice(0);\n\n\t\t\t\t// Remove layer from group\n\t\t\t\tgroups.splice(index, 1);\n\n\t\t\t\t// Update layer group maps\n\t\t\t\t$canvas.setLayer(layer, {\n\t\t\t\t\tgroups: groups\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\treturn $canvases;\n};\n\n// Get topmost layer that intersects with event coordinates\nfunction _getIntersectingLayer(data) {\n\tvar layer, i,\n\t\tmask, m;\n\n\t// Store the topmost layer\n\tlayer = null;\n\n\t// Get the topmost layer whose visible area intersects event coordinates\n\tfor (i = data.intersecting.length - 1; i >= 0; i -= 1) {\n\n\t\t// Get current layer\n\t\tlayer = data.intersecting[i];\n\n\t\t// If layer has previous masks\n\t\tif (layer._masks) {\n\n\t\t\t// Search previous masks to ensure\n\t\t\t// layer is visible at event coordinates\n\t\t\tfor (m = layer._masks.length - 1; m >= 0; m -= 1) {\n\t\t\t\tmask = layer._masks[m];\n\t\t\t\t// If mask does not intersect event coordinates\n\t\t\t\tif (!mask.intersects) {\n\t\t\t\t\t// Indicate that the mask does not\n\t\t\t\t\t// intersect event coordinates\n\t\t\t\t\tlayer.intersects = false;\n\t\t\t\t\t// Stop searching previous masks\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// If event coordinates intersect all previous masks\n\t\t\t// and layer is not intangible\n\t\t\tif (layer.intersects && !layer.intangible) {\n\t\t\t\t// Stop searching for topmost layer\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\n\t}\n\t// If resulting layer is intangible\n\tif (layer && layer.intangible) {\n\t\t// Cursor does not intersect this layer\n\t\tlayer = null;\n\t}\n\treturn layer;\n}\n\n// Draw individual layer (internal)\nfunction _drawLayer($canvas, ctx, layer, nextLayerIndex) {\n\tif (layer && layer.visible && layer._method) {\n\t\tif (nextLayerIndex) {\n\t\t\tlayer._next = nextLayerIndex;\n\t\t} else {\n\t\t\tlayer._next = null;\n\t\t}\n\t\t// If layer is an object, call its respective method\n\t\tif (layer._method) {\n\t\t\tlayer._method.call($canvas, layer);\n\t\t}\n\t}\n}\n\n// Handle dragging of the currently-dragged layer\nfunction _handleLayerDrag($canvas, data, eventType) {\n\tvar layers, layer, l,\n\t\tdrag, dragGroups,\n\t\tgroup, groupName, g,\n\t\tnewX, newY;\n\n\tdrag = data.drag;\n\tlayer = drag.layer;\n\tdragGroups = (layer && layer.dragGroups) || [];\n\tlayers = data.layers;\n\n\tif (eventType === 'mousemove' || eventType === 'touchmove') {\n\t\t// Detect when user is currently dragging layer\n\n\t\tif (!drag.dragging) {\n\t\t\t// Detect when user starts dragging layer\n\n\t\t\t// Signify that a layer on the canvas is being dragged\n\t\t\tdrag.dragging = true;\n\t\t\tlayer.dragging = true;\n\n\t\t\t// Optionally bring layer to front when drag starts\n\t\t\tif (layer.bringToFront) {\n\t\t\t\t// Remove layer from its original position\n\t\t\t\tlayers.splice(layer.index, 1);\n\t\t\t\t// Bring layer to front\n\t\t\t\t// push() returns the new array length\n\t\t\t\tlayer.index = layers.push(layer);\n\t\t\t}\n\n\t\t\t// Set drag properties for this layer\n\t\t\tlayer._startX = layer.x;\n\t\t\tlayer._startY = layer.y;\n\t\t\tlayer._endX = layer._eventX;\n\t\t\tlayer._endY = layer._eventY;\n\n\t\t\t// Trigger dragstart event\n\t\t\t_triggerLayerEvent($canvas, data, layer, 'dragstart');\n\n\t\t}\n\n\t\tif (drag.dragging) {\n\n\t\t\t// Calculate position after drag\n\t\t\tnewX = layer._eventX - (layer._endX - layer._startX);\n\t\t\tnewY = layer._eventY - (layer._endY - layer._startY);\n\t\t\tif (layer.updateDragX) {\n\t\t\t\tnewX = layer.updateDragX.call($canvas[0], layer, newX);\n\t\t\t}\n\t\t\tif (layer.updateDragY) {\n\t\t\t\tnewY = layer.updateDragY.call($canvas[0], layer, newY);\n\t\t\t}\n\t\t\tlayer.dx = newX - layer.x;\n\t\t\tlayer.dy = newY - layer.y;\n\t\t\tif (layer.restrictDragToAxis !== 'y') {\n\t\t\t\tlayer.x = newX;\n\t\t\t}\n\t\t\tif (layer.restrictDragToAxis !== 'x') {\n\t\t\t\tlayer.y = newY;\n\t\t\t}\n\n\t\t\t// Trigger drag event\n\t\t\t_triggerLayerEvent($canvas, data, layer, 'drag');\n\n\t\t\t// Move groups with layer on drag\n\t\t\tfor (g = 0; g < dragGroups.length; g += 1) {\n\n\t\t\t\tgroupName = dragGroups[g];\n\t\t\t\tgroup = data.layer.groups[groupName];\n\t\t\t\tif (layer.groups && group) {\n\n\t\t\t\t\tfor (l = 0; l < group.length; l += 1) {\n\t\t\t\t\t\tif (group[l] !== layer) {\n\t\t\t\t\t\t\tif (layer.restrictDragToAxis !== 'y' && group[l].restrictDragToAxis !== 'y') {\n\t\t\t\t\t\t\t\tgroup[l].x += layer.dx;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (layer.restrictDragToAxis !== 'x' && group[l].restrictDragToAxis !== 'x') {\n\t\t\t\t\t\t\t\tgroup[l].y += layer.dy;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t} else if (eventType === 'mouseup' || eventType === 'touchend') {\n\t\t// Detect when user stops dragging layer\n\n\t\tif (drag.dragging) {\n\t\t\tlayer.dragging = false;\n\t\t\tdrag.dragging = false;\n\t\t\tdata.redrawOnMousemove = data.originalRedrawOnMousemove;\n\t\t\t// Trigger dragstop event\n\t\t\t_triggerLayerEvent($canvas, data, layer, 'dragstop');\n\t\t}\n\n\t\t// Cancel dragging\n\t\tdata.drag = {};\n\n\t}\n}\n\n\n// List of CSS3 cursors that need to be prefixed\ncss.cursors = ['grab', 'grabbing', 'zoom-in', 'zoom-out'];\n\n// Function to detect vendor prefix\n// Modified version of David Walsh's implementation\n// https://davidwalsh.name/vendor-prefix\ncss.prefix = (function () {\n\tvar styles = getComputedStyle(document.documentElement, ''),\n\t\tpre = (arraySlice\n\t\t\t.call(styles)\n\t\t\t.join('')\n\t\t\t.match(/-(moz|webkit|ms)-/) || (styles.OLink === '' && ['', 'o'])\n\t\t)[1];\n\treturn '-' + pre + '-';\n})();\n\n// Set cursor on canvas\nfunction _setCursor($canvas, layer, eventType) {\n\tvar cursor;\n\tif (layer.cursors) {\n\t\t// Retrieve cursor from cursors object if it exists\n\t\tcursor = layer.cursors[eventType];\n\t}\n\t// Prefix any CSS3 cursor\n\tif ($.inArray(cursor, css.cursors) !== -1) {\n\t\tcursor = css.prefix + cursor;\n\t}\n\t// If cursor is defined\n\tif (cursor) {\n\t\t// Set canvas cursor\n\t\t$canvas.css({\n\t\t\tcursor: cursor\n\t\t});\n\t}\n}\n\n// Reset cursor on canvas\nfunction _resetCursor($canvas, data) {\n\t$canvas.css({\n\t\tcursor: data.cursor\n\t});\n}\n\n// Run the given event callback with the given arguments\nfunction _runEventCallback($canvas, layer, eventType, callbacks, arg) {\n\t// Prevent callback from firing recursively\n\tif (callbacks[eventType] && layer._running && !layer._running[eventType]) {\n\t\t// Signify the start of callback execution for this event\n\t\tlayer._running[eventType] = true;\n\t\t// Run event callback with the given arguments\n\t\tcallbacks[eventType].call($canvas[0], layer, arg);\n\t\t// Signify the end of callback execution for this event\n\t\tlayer._running[eventType] = false;\n\t}\n}\n\n// Determine if the given layer can \"legally\" fire the given event\nfunction _layerCanFireEvent(layer, eventType) {\n\t// If events are disable and if\n\t// layer is tangible or event is not tangible\n\treturn (!layer.disableEvents &&\n\t\t(!layer.intangible || $.inArray(eventType, tangibleEvents) === -1));\n}\n\n// Trigger the given event on the given layer\nfunction _triggerLayerEvent($canvas, data, layer, eventType, arg) {\n\t// If layer can legally fire this event type\n\tif (_layerCanFireEvent(layer, eventType)) {\n\n\t\t// Do not set a custom cursor on layer mouseout\n\t\tif (eventType !== 'mouseout') {\n\t\t\t// Update cursor if one is defined for this event\n\t\t\t_setCursor($canvas, layer, eventType);\n\t\t}\n\n\t\t// Trigger the user-defined event callback\n\t\t_runEventCallback($canvas, layer, eventType, layer, arg);\n\t\t// Trigger the canvas-bound event hook\n\t\t_runEventCallback($canvas, layer, eventType, data.eventHooks, arg);\n\t\t// Trigger the global event hook\n\t\t_runEventCallback($canvas, layer, eventType, jCanvas.eventHooks, arg);\n\n\t}\n}\n\n// Manually trigger a layer event\n$.fn.triggerLayerEvent = function (layer, eventType) {\n\tvar $canvases = this, $canvas, e,\n\t\tdata;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\t$canvas = $($canvases[e]);\n\t\tdata = _getCanvasData($canvases[e]);\n\t\tlayer = $canvas.getLayer(layer);\n\t\tif (layer) {\n\t\t\t_triggerLayerEvent($canvas, data, layer, eventType);\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Draw layer with the given ID\n$.fn.drawLayer = function drawLayer(layerId) {\n\tvar $canvases = this, e, ctx,\n\t\t$canvas, layer;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\t$canvas = $($canvases[e]);\n\t\tctx = _getContext($canvases[e]);\n\t\tif (ctx) {\n\t\t\tlayer = $canvas.getLayer(layerId);\n\t\t\t_drawLayer($canvas, ctx, layer);\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Draw all layers (or, if given, only layers starting at an index)\n$.fn.drawLayers = function drawLayers(args) {\n\tvar $canvases = this, $canvas, e, ctx,\n\t\t// Internal parameters for redrawing the canvas\n\t\tparams = args || {},\n\t\t// Other variables\n\t\tlayers, layer, lastLayer, l, index, lastIndex,\n\t\tdata, eventCache, eventType, isImageLayer;\n\n\t// The layer index from which to start redrawing the canvas\n\tindex = params.index;\n\tif (!index) {\n\t\tindex = 0;\n\t}\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\t$canvas = $($canvases[e]);\n\t\tctx = _getContext($canvases[e]);\n\t\tif (ctx) {\n\n\t\t\tdata = _getCanvasData($canvases[e]);\n\n\t\t\t// Clear canvas first unless otherwise directed\n\t\t\tif (params.clear !== false) {\n\t\t\t\t$canvas.clearCanvas();\n\t\t\t}\n\n\t\t\t// If a completion callback was provided, save it to the canvas data\n\t\t\t// store so that the function can be passed to drawLayers() again\n\t\t\t// after any image layers have loaded\n\t\t\tif (params.complete) {\n\t\t\t\tdata.drawLayersComplete = params.complete;\n\t\t\t}\n\n\t\t\t// Cache the layers array\n\t\t\tlayers = data.layers;\n\n\t\t\t// Draw layers from first to last (bottom to top)\n\t\t\tfor (l = index; l < layers.length; l += 1) {\n\t\t\t\tlayer = layers[l];\n\n\t\t\t\t// Ensure layer index is up-to-date\n\t\t\t\tlayer.index = l;\n\n\t\t\t\t// Prevent any one event from firing excessively\n\t\t\t\tif (params.resetFire) {\n\t\t\t\t\tlayer._fired = false;\n\t\t\t\t}\n\t\t\t\t// Draw layer\n\t\t\t\t_drawLayer($canvas, ctx, layer, l + 1);\n\t\t\t\t// Store list of previous masks for each layer\n\t\t\t\tlayer._masks = data.transforms.masks.slice(0);\n\n\t\t\t\t// Allow image layers to load before drawing successive layers\n\t\t\t\tif (layer._method === $.fn.drawImage && layer.visible) {\n\t\t\t\t\tisImageLayer = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// If layer is an image layer\n\t\t\tif (isImageLayer) {\n\t\t\t\t// Stop and wait for drawImage() to resume drawLayers()\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Store the latest\n\t\t\tlastIndex = l;\n\n\t\t\t// Run completion callback (if provided) once all layers have drawn\n\t\t\tif (params.complete) {\n\t\t\t\tparams.complete.call($canvases[e]);\n\t\t\t\tdelete data.drawLayersComplete;\n\t\t\t}\n\n\t\t\t// Get first layer that intersects with event coordinates\n\t\t\tlayer = _getIntersectingLayer(data);\n\n\t\t\teventCache = data.event;\n\t\t\teventType = eventCache.type;\n\n\t\t\t// If jCanvas has detected a dragstart\n\t\t\tif (data.drag.layer) {\n\t\t\t\t// Handle dragging of layer\n\t\t\t\t_handleLayerDrag($canvas, data, eventType);\n\t\t\t}\n\n\t\t\t// Manage mouseout event\n\t\t\tlastLayer = data.lastIntersected;\n\t\t\tif (lastLayer !== null && layer !== lastLayer && lastLayer._hovered && !lastLayer._fired && !data.drag.dragging) {\n\n\t\t\t\tdata.lastIntersected = null;\n\t\t\t\tlastLayer._fired = true;\n\t\t\t\tlastLayer._hovered = false;\n\t\t\t\t_triggerLayerEvent($canvas, data, lastLayer, 'mouseout');\n\t\t\t\t_resetCursor($canvas, data);\n\n\t\t\t}\n\n\t\t\tif (layer) {\n\n\t\t\t\t// Use mouse event callbacks if no touch event callbacks are given\n\t\t\t\tif (!layer[eventType]) {\n\t\t\t\t\teventType = _getMouseEventName(eventType);\n\t\t\t\t}\n\n\t\t\t\t// Check events for intersecting layer\n\t\t\t\tif (layer._event && layer.intersects) {\n\n\t\t\t\t\tdata.lastIntersected = layer;\n\n\t\t\t\t\t// Detect mouseover events\n\t\t\t\t\tif ((layer.mouseover || layer.mouseout || layer.cursors) && !data.drag.dragging) {\n\n\t\t\t\t\t\tif (!layer._hovered && !layer._fired) {\n\n\t\t\t\t\t\t\t// Prevent events from firing excessively\n\t\t\t\t\t\t\tlayer._fired = true;\n\t\t\t\t\t\t\tlayer._hovered = true;\n\t\t\t\t\t\t\t_triggerLayerEvent($canvas, data, layer, 'mouseover');\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Detect any other mouse event\n\t\t\t\t\tif (!layer._fired) {\n\n\t\t\t\t\t\t// Prevent event from firing twice unintentionally\n\t\t\t\t\t\tlayer._fired = true;\n\t\t\t\t\t\teventCache.type = null;\n\n\t\t\t\t\t\t_triggerLayerEvent($canvas, data, layer, eventType);\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Use the mousedown event to start drag\n\t\t\t\t\tif (layer.draggable && !layer.disableEvents && (eventType === 'mousedown' || eventType === 'touchstart')) {\n\n\t\t\t\t\t\t// Keep track of drag state\n\t\t\t\t\t\tdata.drag.layer = layer;\n\t\t\t\t\t\tdata.originalRedrawOnMousemove = data.redrawOnMousemove;\n\t\t\t\t\t\tdata.redrawOnMousemove = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// If cursor is not intersecting with any layer\n\t\t\tif (layer === null && !data.drag.dragging) {\n\t\t\t\t// Reset cursor to previous state\n\t\t\t\t_resetCursor($canvas, data);\n\t\t\t}\n\n\t\t\t// If the last layer has been drawn\n\t\t\tif (lastIndex === layers.length) {\n\n\t\t\t\t// Reset list of intersecting layers\n\t\t\t\tdata.intersecting.length = 0;\n\t\t\t\t// Reset transformation stack\n\t\t\t\tdata.transforms = _cloneTransforms(baseTransforms);\n\t\t\t\tdata.savedTransforms.length = 0;\n\n\t\t\t}\n\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Add a jCanvas layer (internal)\nfunction _addLayer(canvas, params, args, method) {\n\tvar $canvas, data,\n\t\tlayers, layer = (params._layer ? args : params);\n\n\t// Store arguments object for later use\n\tparams._args = args;\n\n\t// Convert all draggable drawings into jCanvas layers\n\tif (params.draggable || params.dragGroups) {\n\t\tparams.layer = true;\n\t\tparams.draggable = true;\n\t}\n\n\t// Determine the layer's type using the available information\n\tif (!params._method) {\n\t\tif (method) {\n\t\t\tparams._method = method;\n\t\t} else if (params.method) {\n\t\t\tparams._method = $.fn[params.method];\n\t\t} else if (params.type) {\n\t\t\tparams._method = $.fn[maps.drawings[params.type]];\n\t\t}\n\t}\n\n\t// If layer hasn't been added yet\n\tif (params.layer && !params._layer) {\n\t\t// Add layer to canvas\n\n\t\t$canvas = $(canvas);\n\n\t\tdata = _getCanvasData(canvas);\n\t\tlayers = data.layers;\n\n\t\t// Do not add duplicate layers of same name\n\t\tif (layer.name === null || (isString(layer.name) && data.layer.names[layer.name] === undefined)) {\n\n\t\t\t// Convert number properties to numbers\n\t\t\t_coerceNumericProps(params);\n\n\t\t\t// Ensure layers are unique across canvases by cloning them\n\t\t\tlayer = new jCanvasObject(params);\n\t\t\tlayer.canvas = canvas;\n\t\t\t// Indicate that this is a layer for future checks\n\t\t\tlayer.layer = true;\n\t\t\tlayer._layer = true;\n\t\t\tlayer._running = {};\n\t\t\t// If layer stores user-defined data\n\t\t\tif (layer.data !== null) {\n\t\t\t\t// Clone object\n\t\t\t\tlayer.data = extendObject({}, layer.data);\n\t\t\t} else {\n\t\t\t\t// Otherwise, create data object\n\t\t\t\tlayer.data = {};\n\t\t\t}\n\t\t\t// If layer stores a list of associated groups\n\t\t\tif (layer.groups !== null) {\n\t\t\t\t// Clone list\n\t\t\t\tlayer.groups = layer.groups.slice(0);\n\t\t\t} else {\n\t\t\t\t// Otherwise, create empty list\n\t\t\t\tlayer.groups = [];\n\t\t\t}\n\n\t\t\t// Update layer group maps\n\t\t\t_updateLayerName($canvas, data, layer);\n\t\t\t_updateLayerGroups($canvas, data, layer);\n\n\t\t\t// Check for any associated jCanvas events and enable them\n\t\t\t_addLayerEvents($canvas, data, layer);\n\n\t\t\t// Optionally enable drag-and-drop support and cursor support\n\t\t\t_enableDrag($canvas, data, layer);\n\n\t\t\t// Copy _event property to parameters object\n\t\t\tparams._event = layer._event;\n\n\t\t\t// Calculate width/height for text layers\n\t\t\tif (layer._method === $.fn.drawText) {\n\t\t\t\t$canvas.measureText(layer);\n\t\t\t}\n\n\t\t\t// Add layer to end of array if no index is specified\n\t\t\tif (layer.index === null) {\n\t\t\t\tlayer.index = layers.length;\n\t\t\t}\n\n\t\t\t// Add layer to layers array at specified index\n\t\t\tlayers.splice(layer.index, 0, layer);\n\n\t\t\t// Store layer on parameters object\n\t\t\tparams._args = layer;\n\n\t\t\t// Trigger an 'add' event\n\t\t\t_triggerLayerEvent($canvas, data, layer, 'add');\n\n\t\t}\n\n\t} else if (!params.layer) {\n\t\t_coerceNumericProps(params);\n\t}\n\n\treturn layer;\n}\n\n// Add a jCanvas layer\n$.fn.addLayer = function addLayer(args) {\n\tvar $canvases = this, e, ctx,\n\t\tparams;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\tctx = _getContext($canvases[e]);\n\t\tif (ctx) {\n\n\t\t\tparams = new jCanvasObject(args);\n\t\t\tparams.layer = true;\n\t\t\t_addLayer($canvases[e], params, args);\n\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n/* Animation API */\n\n// Define properties used in both CSS and jCanvas\ncss.props = [\n\t'width',\n\t'height',\n\t'opacity',\n\t'lineHeight'\n];\ncss.propsObj = {};\n\n// Hide/show jCanvas/CSS properties so they can be animated using jQuery\nfunction _showProps(obj) {\n\tvar cssProp, p;\n\tfor (p = 0; p < css.props.length; p += 1) {\n\t\tcssProp = css.props[p];\n\t\tobj[cssProp] = obj['_' + cssProp];\n\t}\n}\nfunction _hideProps(obj, reset) {\n\tvar cssProp, p;\n\tfor (p = 0; p < css.props.length; p += 1) {\n\t\tcssProp = css.props[p];\n\t\t// Hide property using same name with leading underscore\n\t\tif (obj[cssProp] !== undefined) {\n\t\t\tobj['_' + cssProp] = obj[cssProp];\n\t\t\tcss.propsObj[cssProp] = true;\n\t\t\tif (reset) {\n\t\t\t\tdelete obj[cssProp];\n\t\t\t}\n\t\t}\n\t}\n}\n\n// Evaluate property values that are functions\nfunction _parseEndValues(canvas, layer, endValues) {\n\tvar propName, propValue,\n\t\tsubPropName, subPropValue;\n\t// Loop through all properties in map of end values\n\tfor (propName in endValues) {\n\t\tif (Object.prototype.hasOwnProperty.call(endValues, propName)) {\n\t\t\tpropValue = endValues[propName];\n\t\t\t// If end value is function\n\t\t\tif (isFunction(propValue)) {\n\t\t\t\t// Call function and use its value as the end value\n\t\t\t\tendValues[propName] = propValue.call(canvas, layer, propName);\n\t\t\t}\n\t\t\t// If end value is an object\n\t\t\tif (typeOf(propValue) === 'object' && isPlainObject(propValue)) {\n\t\t\t\t// Prepare to animate properties in object\n\t\t\t\tfor (subPropName in propValue) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(propValue, subPropName)) {\n\t\t\t\t\t\tsubPropValue = propValue[subPropName];\n\t\t\t\t\t\t// Store property's start value at top-level of layer\n\t\t\t\t\t\tif (layer[propName] !== undefined) {\n\t\t\t\t\t\t\tlayer[propName + '.' + subPropName] = layer[propName][subPropName];\n\t\t\t\t\t\t\t// Store property's end value at top-level of end values map\n\t\t\t\t\t\t\tendValues[propName + '.' + subPropName] = subPropValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Delete sub-property of object as it's no longer needed\n\t\t\t\tdelete endValues[propName];\n\t\t\t}\n\t\t}\n\t}\n\treturn endValues;\n}\n\n// Remove sub-property aliases from layer object\nfunction _removeSubPropAliases(layer) {\n\tvar propName;\n\tfor (propName in layer) {\n\t\tif (Object.prototype.hasOwnProperty.call(layer, propName)) {\n\t\t\tif (propName.indexOf('.') !== -1) {\n\t\t\t\tdelete layer[propName];\n\t\t\t}\n\t\t}\n\t}\n}\n\n// Convert a color value to an array of RGB values\nfunction _colorToRgbArray(color) {\n\tvar originalColor, elem,\n\t\trgb = [],\n\t\tmultiple = 1;\n\n\t// Deal with complete transparency\n\tif (color === 'transparent') {\n\t\tcolor = 'rgba(0, 0, 0, 0)';\n\t} else if (color.match(/^([a-z]+|#[0-9a-f]+)$/gi)) {\n\t\t// Deal with hexadecimal colors and color names\n\t\telem = document.head;\n\t\toriginalColor = elem.style.color;\n\t\telem.style.color = color;\n\t\tcolor = $.css(elem, 'color');\n\t\telem.style.color = originalColor;\n\t}\n\t// Parse RGB string\n\tif (color.match(/^rgb/gi)) {\n\t\trgb = color.match(/(\\d+(\\.\\d+)?)/gi);\n\t\t// Deal with RGB percentages\n\t\tif (color.match(/%/gi)) {\n\t\t\tmultiple = 2.55;\n\t\t}\n\t\trgb[0] *= multiple;\n\t\trgb[1] *= multiple;\n\t\trgb[2] *= multiple;\n\t\t// Ad alpha channel if given\n\t\tif (rgb[3] !== undefined) {\n\t\t\trgb[3] = parseFloat(rgb[3]);\n\t\t} else {\n\t\t\trgb[3] = 1;\n\t\t}\n\t}\n\treturn rgb;\n}\n\n// Animate a hex or RGB color\nfunction _animateColor(fx) {\n\tvar n = 3,\n\t\ti;\n\t// Only parse start and end colors once\n\tif (typeOf(fx.start) !== 'array') {\n\t\tfx.start = _colorToRgbArray(fx.start);\n\t\tfx.end = _colorToRgbArray(fx.end);\n\t}\n\tfx.now = [];\n\n\t// If colors are RGBA, animate transparency\n\tif (fx.start[3] !== 1 || fx.end[3] !== 1) {\n\t\tn = 4;\n\t}\n\n\t// Calculate current frame for red, green, blue, and alpha\n\tfor (i = 0; i < n; i += 1) {\n\t\tfx.now[i] = fx.start[i] + ((fx.end[i] - fx.start[i]) * fx.pos);\n\t\t// Only the red, green, and blue values must be integers\n\t\tif (i < 3) {\n\t\t\tfx.now[i] = round(fx.now[i]);\n\t\t}\n\t}\n\tif (fx.start[3] !== 1 || fx.end[3] !== 1) {\n\t\t// Only use RGBA if RGBA colors are given\n\t\tfx.now = 'rgba(' + fx.now.join(',') + ')';\n\t} else {\n\t\t// Otherwise, animate as solid colors\n\t\tfx.now.slice(0, 3);\n\t\tfx.now = 'rgb(' + fx.now.join(',') + ')';\n\t}\n\t// Animate colors for both canvas layers and DOM elements\n\tif (fx.elem.nodeName) {\n\t\tfx.elem.style[fx.prop] = fx.now;\n\t} else {\n\t\tfx.elem[fx.prop] = fx.now;\n\t}\n}\n\n// Animate jCanvas layer\n$.fn.animateLayer = function animateLayer() {\n\tvar $canvases = this, $canvas, e, ctx,\n\t\targs = arraySlice.call(arguments, 0),\n\t\tdata, layer, props;\n\n\t// Deal with all cases of argument placement\n\t/*\n\t\t0. layer name/index\n\t\t1. properties\n\t\t2. duration/options\n\t\t3. easing\n\t\t4. complete function\n\t\t5. step function\n\t*/\n\n\tif (typeOf(args[2]) === 'object') {\n\n\t\t// Accept an options object for animation\n\t\targs.splice(2, 0, args[2].duration || null);\n\t\targs.splice(3, 0, args[3].easing || null);\n\t\targs.splice(4, 0, args[4].complete || null);\n\t\targs.splice(5, 0, args[5].step || null);\n\n\t} else {\n\n\t\tif (args[2] === undefined) {\n\t\t\t// If object is the last argument\n\t\t\targs.splice(2, 0, null);\n\t\t\targs.splice(3, 0, null);\n\t\t\targs.splice(4, 0, null);\n\t\t} else if (isFunction(args[2])) {\n\t\t\t// If callback comes after object\n\t\t\targs.splice(2, 0, null);\n\t\t\targs.splice(3, 0, null);\n\t\t}\n\t\tif (args[3] === undefined) {\n\t\t\t// If duration is the last argument\n\t\t\targs[3] = null;\n\t\t\targs.splice(4, 0, null);\n\t\t} else if (isFunction(args[3])) {\n\t\t\t// If callback comes after duration\n\t\t\targs.splice(3, 0, null);\n\t\t}\n\n\t}\n\n\t// Run callback function when animation completes\n\tfunction complete($canvas, data, layer) {\n\n\t\treturn function () {\n\n\t\t\t_showProps(layer);\n\t\t\t_removeSubPropAliases(layer);\n\n\t\t\t// Prevent multiple redraw loops\n\t\t\tif (!data.animating || data.animated === layer) {\n\t\t\t\t// Redraw layers on last frame\n\t\t\t\t$canvas.drawLayers();\n\t\t\t}\n\n\t\t\t// Signify the end of an animation loop\n\t\t\tlayer._animating = false;\n\t\t\tdata.animating = false;\n\t\t\tdata.animated = null;\n\n\t\t\t// If callback is defined\n\t\t\tif (args[4]) {\n\t\t\t\t// Run callback at the end of the animation\n\t\t\t\targs[4].call($canvas[0], layer);\n\t\t\t}\n\n\t\t\t_triggerLayerEvent($canvas, data, layer, 'animateend');\n\n\t\t};\n\n\t}\n\n\t// Redraw layers on every frame of the animation\n\tfunction step($canvas, data, layer) {\n\n\t\treturn function (now, fx) {\n\t\t\tvar parts, propName, subPropName,\n\t\t\t\thidden = false;\n\n\t\t\t// If animated property has been hidden\n\t\t\tif (fx.prop[0] === '_') {\n\t\t\t\thidden = true;\n\t\t\t\t// Unhide property temporarily\n\t\t\t\tfx.prop = fx.prop.replace('_', '');\n\t\t\t\tlayer[fx.prop] = layer['_' + fx.prop];\n\t\t\t}\n\n\t\t\t// If animating property of sub-object\n\t\t\tif (fx.prop.indexOf('.') !== -1) {\n\t\t\t\tparts = fx.prop.split('.');\n\t\t\t\tpropName = parts[0];\n\t\t\t\tsubPropName = parts[1];\n\t\t\t\tif (layer[propName]) {\n\t\t\t\t\tlayer[propName][subPropName] = fx.now;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Throttle animation to improve efficiency\n\t\t\tif (layer._pos !== fx.pos) {\n\n\t\t\t\tlayer._pos = fx.pos;\n\n\t\t\t\t// Signify the start of an animation loop\n\t\t\t\tif (!layer._animating && !data.animating) {\n\t\t\t\t\tlayer._animating = true;\n\t\t\t\t\tdata.animating = true;\n\t\t\t\t\tdata.animated = layer;\n\t\t\t\t}\n\n\t\t\t\t// Prevent multiple redraw loops\n\t\t\t\tif (!data.animating || data.animated === layer) {\n\t\t\t\t\t// Redraw layers for every frame\n\t\t\t\t\t$canvas.drawLayers();\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// If callback is defined\n\t\t\tif (args[5]) {\n\t\t\t\t// Run callback for each step of animation\n\t\t\t\targs[5].call($canvas[0], now, fx, layer);\n\t\t\t}\n\n\t\t\t_triggerLayerEvent($canvas, data, layer, 'animate', fx);\n\n\t\t\t// If property should be hidden during animation\n\t\t\tif (hidden) {\n\t\t\t\t// Hide property again\n\t\t\t\tfx.prop = '_' + fx.prop;\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\t$canvas = $($canvases[e]);\n\t\tctx = _getContext($canvases[e]);\n\t\tif (ctx) {\n\n\t\t\tdata = _getCanvasData($canvases[e]);\n\n\t\t\t// If a layer object was passed, use it the layer to be animated\n\t\t\tlayer = $canvas.getLayer(args[0]);\n\n\t\t\t// Ignore layers that are functions\n\t\t\tif (layer && layer._method !== $.fn.draw) {\n\n\t\t\t\t// Do not modify original object\n\t\t\t\tprops = extendObject({}, args[1]);\n\n\t\t\t\tprops = _parseEndValues($canvases[e], layer, props);\n\n\t\t\t\t// Bypass jQuery CSS Hooks for CSS properties (width, opacity, etc.)\n\t\t\t\t_hideProps(props, true);\n\t\t\t\t_hideProps(layer);\n\n\t\t\t\t// Fix for jQuery's vendor prefixing support, which affects how width/height/opacity are animated\n\t\t\t\tlayer.style = css.propsObj;\n\n\t\t\t\t// Animate layer\n\t\t\t\t$(layer).animate(props, {\n\t\t\t\t\tduration: args[2],\n\t\t\t\t\teasing: ($.easing[args[3]] ? args[3] : null),\n\t\t\t\t\t// When animation completes\n\t\t\t\t\tcomplete: complete($canvas, data, layer),\n\t\t\t\t\t// Redraw canvas for every animation frame\n\t\t\t\t\tstep: step($canvas, data, layer)\n\t\t\t\t});\n\t\t\t\t_triggerLayerEvent($canvas, data, layer, 'animatestart');\n\t\t\t}\n\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Animate all layers in a layer group\n$.fn.animateLayerGroup = function animateLayerGroup(groupId) {\n\tvar $canvases = this, $canvas, e,\n\t\targs = arraySlice.call(arguments, 0),\n\t\tgroup, l;\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\t$canvas = $($canvases[e]);\n\t\tgroup = $canvas.getLayerGroup(groupId);\n\t\tif (group) {\n\n\t\t\t// Animate all layers in the group\n\t\t\tfor (l = 0; l < group.length; l += 1) {\n\n\t\t\t\t// Replace first argument with layer\n\t\t\t\targs[0] = group[l];\n\t\t\t\t$canvas.animateLayer.apply($canvas, args);\n\n\t\t\t}\n\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Delay layer animation by a given number of milliseconds\n$.fn.delayLayer = function delayLayer(layerId, duration) {\n\tvar $canvases = this, $canvas, e,\n\t\tdata, layer;\n\tduration = duration || 0;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\t$canvas = $($canvases[e]);\n\t\tdata = _getCanvasData($canvases[e]);\n\t\tlayer = $canvas.getLayer(layerId);\n\t\t// If layer exists\n\t\tif (layer) {\n\t\t\t// Delay animation\n\t\t\t$(layer).delay(duration);\n\t\t\t_triggerLayerEvent($canvas, data, layer, 'delay');\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Delay animation all layers in a layer group\n$.fn.delayLayerGroup = function delayLayerGroup(groupId, duration) {\n\tvar $canvases = this, $canvas, e,\n\t\tgroup, layer, l;\n\tduration = duration || 0;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\t$canvas = $($canvases[e]);\n\n\t\tgroup = $canvas.getLayerGroup(groupId);\n\t\t// Delay all layers in the group\n\t\tif (group) {\n\n\t\t\tfor (l = 0; l < group.length; l += 1) {\n\t\t\t\t// Delay each layer in the group\n\t\t\t\tlayer = group[l];\n\t\t\t\t$canvas.delayLayer(layer, duration);\n\t\t\t}\n\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Stop layer animation\n$.fn.stopLayer = function stopLayer(layerId, clearQueue) {\n\tvar $canvases = this, $canvas, e,\n\t\tdata, layer;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\t$canvas = $($canvases[e]);\n\t\tdata = _getCanvasData($canvases[e]);\n\t\tlayer = $canvas.getLayer(layerId);\n\t\t// If layer exists\n\t\tif (layer) {\n\t\t\t// Stop animation\n\t\t\t$(layer).stop(clearQueue);\n\t\t\t_triggerLayerEvent($canvas, data, layer, 'stop');\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Stop animation of all layers in a layer group\n$.fn.stopLayerGroup = function stopLayerGroup(groupId, clearQueue) {\n\tvar $canvases = this, $canvas, e,\n\t\tgroup, layer, l;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\t$canvas = $($canvases[e]);\n\n\t\tgroup = $canvas.getLayerGroup(groupId);\n\t\t// Stop all layers in the group\n\t\tif (group) {\n\n\t\t\tfor (l = 0; l < group.length; l += 1) {\n\t\t\t\t// Stop each layer in the group\n\t\t\t\tlayer = group[l];\n\t\t\t\t$canvas.stopLayer(layer, clearQueue);\n\t\t\t}\n\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Enable animation for color properties\nfunction _supportColorProps(props) {\n\tvar p;\n\tfor (p = 0; p < props.length; p += 1) {\n\t\t$.fx.step[props[p]] = _animateColor;\n\t}\n}\n\n// Enable animation for color properties\n_supportColorProps([\n\t'color',\n\t'backgroundColor',\n\t'borderColor',\n\t'borderTopColor',\n\t'borderRightColor',\n\t'borderBottomColor',\n\t'borderLeftColor',\n\t'fillStyle',\n\t'outlineColor',\n\t'strokeStyle',\n\t'shadowColor'\n]);\n\n/* Event API */\n\n// Map standard mouse events to touch events\nmaps.touchEvents = {\n\t'mousedown': 'touchstart',\n\t'mouseup': 'touchend',\n\t'mousemove': 'touchmove'\n};\n// Map standard touch events to mouse events\nmaps.mouseEvents = {\n\t'touchstart': 'mousedown',\n\t'touchend': 'mouseup',\n\t'touchmove': 'mousemove'\n};\n\n// Convert mouse event name to a corresponding touch event name (if possible)\nfunction _getTouchEventName(eventName) {\n\t// Detect touch event support\n\tif (maps.touchEvents[eventName]) {\n\t\teventName = maps.touchEvents[eventName];\n\t}\n\treturn eventName;\n}\n// Convert touch event name to a corresponding mouse event name\nfunction _getMouseEventName(eventName) {\n\tif (maps.mouseEvents[eventName]) {\n\t\teventName = maps.mouseEvents[eventName];\n\t}\n\treturn eventName;\n}\n\n// Bind event to jCanvas layer using standard jQuery events\nfunction _createEvent(eventName) {\n\n\tjCanvas.events[eventName] = function ($canvas, data) {\n\t\tvar helperEventName, touchEventName, eventCache;\n\n\t\t// Retrieve canvas's event cache\n\t\teventCache = data.event;\n\n\t\t// Both mouseover/mouseout events will be managed by a single mousemove event\n\t\thelperEventName = (eventName === 'mouseover' || eventName === 'mouseout') ? 'mousemove' : eventName;\n\t\ttouchEventName = _getTouchEventName(helperEventName);\n\n\t\tfunction eventCallback(event) {\n\t\t\t// Cache current mouse position and redraw layers\n\t\t\teventCache.x = event.offsetX;\n\t\t\teventCache.y = event.offsetY;\n\t\t\teventCache.type = helperEventName;\n\t\t\teventCache.event = event;\n\t\t\t// Redraw layers on every trigger of the event; don't redraw if at\n\t\t\t// least one layer is draggable and there are no layers with\n\t\t\t// explicit mouseover/mouseout/mousemove events\n\t\t\tif (event.type !== 'mousemove' || data.redrawOnMousemove || data.drag.dragging) {\n\t\t\t\t$canvas.drawLayers({\n\t\t\t\t\tresetFire: true\n\t\t\t\t});\n\t\t\t}\n\t\t\t// Prevent default event behavior\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\t// Ensure the event is not bound more than once\n\t\tif (!data.events[helperEventName]) {\n\t\t\t// Bind one canvas event which handles all layer events of that type\n\t\t\tif (touchEventName !== helperEventName) {\n\t\t\t\t$canvas.bind(helperEventName + '.jCanvas ' + touchEventName + '.jCanvas', eventCallback);\n\t\t\t} else {\n\t\t\t\t$canvas.bind(helperEventName + '.jCanvas', eventCallback);\n\t\t\t}\n\t\t\t// Prevent this event from being bound twice\n\t\t\tdata.events[helperEventName] = true;\n\t\t}\n\t};\n}\nfunction _createEvents(eventNames) {\n\tvar n;\n\tfor (n = 0; n < eventNames.length; n += 1) {\n\t\t_createEvent(eventNames[n]);\n\t}\n}\n// Populate jCanvas events object with some standard events\n_createEvents([\n\t'click',\n\t'dblclick',\n\t'mousedown',\n\t'mouseup',\n\t'mousemove',\n\t'mouseover',\n\t'mouseout',\n\t'touchstart',\n\t'touchmove',\n\t'touchend',\n\t'pointerdown',\n\t'pointermove',\n\t'pointerup',\n\t'contextmenu'\n]);\n\n// Check if event fires when a drawing is drawn\nfunction _detectEvents(canvas, ctx, params) {\n\tvar layer, data, eventCache, intersects,\n\t\ttransforms, x, y, angle;\n\n\t// Use the layer object stored by the given parameters object\n\tlayer = params._args;\n\t// Canvas must have event bindings\n\tif (layer) {\n\n\t\tdata = _getCanvasData(canvas);\n\t\teventCache = data.event;\n\t\tif (eventCache.x !== null && eventCache.y !== null) {\n\t\t\t// Respect user-defined pixel ratio\n\t\t\tx = eventCache.x * data.pixelRatio;\n\t\t\ty = eventCache.y * data.pixelRatio;\n\t\t\t// Determine if the given coordinates are in the current path\n\t\t\tintersects = ctx.isPointInPath(x, y) || (ctx.isPointInStroke && ctx.isPointInStroke(x, y));\n\t\t}\n\t\ttransforms = data.transforms;\n\n\t\t// Allow callback functions to retrieve the mouse coordinates\n\t\tlayer.eventX = eventCache.x;\n\t\tlayer.eventY = eventCache.y;\n\t\tlayer.event = eventCache.event;\n\n\t\t// Adjust coordinates to match current canvas transformation\n\n\t\t// Keep track of some transformation values\n\t\tangle = data.transforms.rotate;\n\t\tx = layer.eventX;\n\t\ty = layer.eventY;\n\n\t\tif (angle !== 0) {\n\t\t\t// Rotate coordinates if coordinate space has been rotated\n\t\t\tlayer._eventX = (x * cos(-angle)) - (y * sin(-angle));\n\t\t\tlayer._eventY = (y * cos(-angle)) + (x * sin(-angle));\n\t\t} else {\n\t\t\t// Otherwise, no calculations need to be made\n\t\t\tlayer._eventX = x;\n\t\t\tlayer._eventY = y;\n\t\t}\n\n\t\t// Scale coordinates\n\t\tlayer._eventX /= transforms.scaleX;\n\t\tlayer._eventY /= transforms.scaleY;\n\n\t\t// If layer intersects with cursor\n\t\tif (intersects) {\n\t\t\t// Add it to a list of layers that intersect with cursor\n\t\t\tdata.intersecting.push(layer);\n\t\t}\n\t\tlayer.intersects = Boolean(intersects);\n\t}\n}\n\n// Normalize offsetX and offsetY for all browsers\n$.event.fix = function (event) {\n\tvar offset, originalEvent, touches;\n\n\tevent = jQueryEventFix.call($.event, event);\n\toriginalEvent = event.originalEvent;\n\n\t// originalEvent does not exist for manually-triggered events\n\tif (originalEvent) {\n\n\t\ttouches = originalEvent.changedTouches;\n\n\t\t// If offsetX and offsetY are not supported, define them\n\t\tif (event.pageX !== undefined && event.offsetX === undefined) {\n\t\t\ttry {\n\t\t\t\toffset = $(event.currentTarget).offset();\n\t\t\t\tif (offset) {\n\t\t\t\t\tevent.offsetX = event.pageX - offset.left;\n\t\t\t\t\tevent.offsetY = event.pageY - offset.top;\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\t// Fail silently\n\t\t\t}\n\t\t} else if (touches) {\n\t\t\ttry {\n\t\t\t\t// Enable offsetX and offsetY for mobile devices\n\t\t\t\toffset = $(event.currentTarget).offset();\n\t\t\t\tif (offset) {\n\t\t\t\t\tevent.offsetX = touches[0].pageX - offset.left;\n\t\t\t\t\tevent.offsetY = touches[0].pageY - offset.top;\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\t// Fail silently\n\t\t\t}\n\t\t}\n\n\t}\n\treturn event;\n};\n\n/* Drawing API */\n\n// Map drawing names with their respective method names\nmaps.drawings = {\n\t'arc': 'drawArc',\n\t'bezier': 'drawBezier',\n\t'ellipse': 'drawEllipse',\n\t'function': 'draw',\n\t'image': 'drawImage',\n\t'line': 'drawLine',\n\t'path': 'drawPath',\n\t'polygon': 'drawPolygon',\n\t'slice': 'drawSlice',\n\t'quadratic': 'drawQuadratic',\n\t'rectangle': 'drawRect',\n\t'text': 'drawText',\n\t'vector': 'drawVector',\n\t'save': 'saveCanvas',\n\t'restore': 'restoreCanvas',\n\t'rotate': 'rotateCanvas',\n\t'scale': 'scaleCanvas',\n\t'translate': 'translateCanvas'\n};\n\n// Draws on canvas using a function\n$.fn.draw = function draw(args) {\n\tvar $canvases = this, e, ctx,\n\t\tparams = new jCanvasObject(args);\n\n\t// Draw using any other method\n\tif (maps.drawings[params.type] && params.type !== 'function') {\n\n\t\t$canvases[maps.drawings[params.type]](args);\n\n\t} else {\n\n\t\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\t\tctx = _getContext($canvases[e]);\n\t\t\tif (ctx) {\n\n\t\t\t\tparams = new jCanvasObject(args);\n\t\t\t\t_addLayer($canvases[e], params, args, draw);\n\t\t\t\tif (params.visible) {\n\n\t\t\t\t\tif (params.fn) {\n\t\t\t\t\t\t// Call the given user-defined function\n\t\t\t\t\t\tparams.fn.call($canvases[e], ctx, params);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t}\n\treturn $canvases;\n};\n\n// Clears canvas\n$.fn.clearCanvas = function clearCanvas(args) {\n\tvar $canvases = this, e, ctx,\n\t\tparams = new jCanvasObject(args);\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\tctx = _getContext($canvases[e]);\n\t\tif (ctx) {\n\n\t\t\tif (params.width === null || params.height === null) {\n\t\t\t\t// Clear entire canvas if width/height is not given\n\n\t\t\t\t// Reset current transformation temporarily to ensure that the entire canvas is cleared\n\t\t\t\tctx.save();\n\t\t\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\t\t\tctx.clearRect(0, 0, $canvases[e].width, $canvases[e].height);\n\t\t\t\tctx.restore();\n\n\t\t\t} else {\n\t\t\t\t// Otherwise, clear the defined section of the canvas\n\n\t\t\t\t// Transform clear rectangle\n\t\t\t\t_addLayer($canvases[e], params, args, clearCanvas);\n\t\t\t\t_transformShape($canvases[e], ctx, params, params.width, params.height);\n\t\t\t\tctx.clearRect(params.x - (params.width / 2), params.y - (params.height / 2), params.width, params.height);\n\t\t\t\t// Restore previous transformation\n\t\t\t\t_restoreTransform(ctx, params);\n\n\t\t\t}\n\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n/* Transformation API */\n\n// Restores canvas\n$.fn.saveCanvas = function saveCanvas(args) {\n\tvar $canvases = this, e, ctx,\n\t\tparams, data, i;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\tctx = _getContext($canvases[e]);\n\t\tif (ctx) {\n\n\t\t\tdata = _getCanvasData($canvases[e]);\n\n\t\t\tparams = new jCanvasObject(args);\n\t\t\t_addLayer($canvases[e], params, args, saveCanvas);\n\n\t\t\t// Restore a number of times using the given count\n\t\t\tfor (i = 0; i < params.count; i += 1) {\n\t\t\t\t_saveCanvas(ctx, data);\n\t\t\t}\n\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Restores canvas\n$.fn.restoreCanvas = function restoreCanvas(args) {\n\tvar $canvases = this, e, ctx,\n\t\tparams, data, i;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\tctx = _getContext($canvases[e]);\n\t\tif (ctx) {\n\n\t\t\tdata = _getCanvasData($canvases[e]);\n\n\t\t\tparams = new jCanvasObject(args);\n\t\t\t_addLayer($canvases[e], params, args, restoreCanvas);\n\n\t\t\t// Restore a number of times using the given count\n\t\t\tfor (i = 0; i < params.count; i += 1) {\n\t\t\t\t_restoreCanvas(ctx, data);\n\t\t\t}\n\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Rotates canvas (internal)\nfunction _rotateCanvas(ctx, params, transforms) {\n\n\t// Get conversion factor for radians\n\tparams._toRad = (params.inDegrees ? (PI / 180) : 1);\n\n\t// Rotate canvas using shape as center of rotation\n\tctx.translate(params.x, params.y);\n\tctx.rotate(params.rotate * params._toRad);\n\tctx.translate(-params.x, -params.y);\n\n\t// If transformation data was given\n\tif (transforms) {\n\t\t// Update transformation data\n\t\ttransforms.rotate += (params.rotate * params._toRad);\n\t}\n}\n\n// Scales canvas (internal)\nfunction _scaleCanvas(ctx, params, transforms) {\n\n\t// Scale both the x- and y- axis using the 'scale' property\n\tif (params.scale !== 1) {\n\t\tparams.scaleX = params.scaleY = params.scale;\n\t}\n\n\t// Scale canvas using shape as center of rotation\n\tctx.translate(params.x, params.y);\n\tctx.scale(params.scaleX, params.scaleY);\n\tctx.translate(-params.x, -params.y);\n\n\t// If transformation data was given\n\tif (transforms) {\n\t\t// Update transformation data\n\t\ttransforms.scaleX *= params.scaleX;\n\t\ttransforms.scaleY *= params.scaleY;\n\t}\n}\n\n// Translates canvas (internal)\nfunction _translateCanvas(ctx, params, transforms) {\n\n\t// Translate both the x- and y-axis using the 'translate' property\n\tif (params.translate) {\n\t\tparams.translateX = params.translateY = params.translate;\n\t}\n\n\t// Translate canvas\n\tctx.translate(params.translateX, params.translateY);\n\n\t// If transformation data was given\n\tif (transforms) {\n\t\t// Update transformation data\n\t\ttransforms.translateX += params.translateX;\n\t\ttransforms.translateY += params.translateY;\n\t}\n}\n\n// Rotates canvas\n$.fn.rotateCanvas = function rotateCanvas(args) {\n\tvar $canvases = this, e, ctx,\n\t\tparams, data;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\tctx = _getContext($canvases[e]);\n\t\tif (ctx) {\n\n\t\t\tdata = _getCanvasData($canvases[e]);\n\n\t\t\tparams = new jCanvasObject(args);\n\t\t\t_addLayer($canvases[e], params, args, rotateCanvas);\n\n\t\t\t// Autosave transformation state by default\n\t\t\tif (params.autosave) {\n\t\t\t\t// Automatically save transformation state by default\n\t\t\t\t_saveCanvas(ctx, data);\n\t\t\t}\n\t\t\t_rotateCanvas(ctx, params, data.transforms);\n\t\t}\n\n\t}\n\treturn $canvases;\n};\n\n// Scales canvas\n$.fn.scaleCanvas = function scaleCanvas(args) {\n\tvar $canvases = this, e, ctx,\n\t\tparams, data;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\tctx = _getContext($canvases[e]);\n\t\tif (ctx) {\n\n\t\t\tdata = _getCanvasData($canvases[e]);\n\n\t\t\tparams = new jCanvasObject(args);\n\t\t\t_addLayer($canvases[e], params, args, scaleCanvas);\n\n\t\t\t// Autosave transformation state by default\n\t\t\tif (params.autosave) {\n\t\t\t\t// Automatically save transformation state by default\n\t\t\t\t_saveCanvas(ctx, data);\n\t\t\t}\n\t\t\t_scaleCanvas(ctx, params, data.transforms);\n\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Translates canvas\n$.fn.translateCanvas = function translateCanvas(args) {\n\tvar $canvases = this, e, ctx,\n\t\tparams, data;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\tctx = _getContext($canvases[e]);\n\t\tif (ctx) {\n\n\t\t\tdata = _getCanvasData($canvases[e]);\n\n\t\t\tparams = new jCanvasObject(args);\n\t\t\t_addLayer($canvases[e], params, args, translateCanvas);\n\n\t\t\t// Autosave transformation state by default\n\t\t\tif (params.autosave) {\n\t\t\t\t// Automatically save transformation state by default\n\t\t\t\t_saveCanvas(ctx, data);\n\t\t\t}\n\t\t\t_translateCanvas(ctx, params, data.transforms);\n\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n/* Shape API */\n\n// Draws rectangle\n$.fn.drawRect = function drawRect(args) {\n\tvar $canvases = this, e, ctx,\n\t\tparams,\n\t\tx1, y1,\n\t\tx2, y2,\n\t\tr, temp;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\tctx = _getContext($canvases[e]);\n\t\tif (ctx) {\n\n\t\t\tparams = new jCanvasObject(args);\n\t\t\t_addLayer($canvases[e], params, args, drawRect);\n\t\t\tif (params.visible) {\n\n\t\t\t\t_transformShape($canvases[e], ctx, params, params.width, params.height);\n\t\t\t\t_setGlobalProps($canvases[e], ctx, params);\n\n\t\t\t\tctx.beginPath();\n\t\t\t\tif (params.width && params.height) {\n\t\t\t\t\tx1 = params.x - (params.width / 2);\n\t\t\t\t\ty1 = params.y - (params.height / 2);\n\t\t\t\t\tr = abs(params.cornerRadius);\n\t\t\t\t\t// If corner radius is defined and is not zero\n\t\t\t\t\tif (r) {\n\t\t\t\t\t\t// Draw rectangle with rounded corners if cornerRadius is defined\n\n\t\t\t\t\t\tx2 = params.x + (params.width / 2);\n\t\t\t\t\t\ty2 = params.y + (params.height / 2);\n\n\t\t\t\t\t\t// Handle negative width\n\t\t\t\t\t\tif (params.width < 0) {\n\t\t\t\t\t\t\ttemp = x1;\n\t\t\t\t\t\t\tx1 = x2;\n\t\t\t\t\t\t\tx2 = temp;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Handle negative height\n\t\t\t\t\t\tif (params.height < 0) {\n\t\t\t\t\t\t\ttemp = y1;\n\t\t\t\t\t\t\ty1 = y2;\n\t\t\t\t\t\t\ty2 = temp;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Prevent over-rounded corners\n\t\t\t\t\t\tif ((x2 - x1) - (2 * r) < 0) {\n\t\t\t\t\t\t\tr = (x2 - x1) / 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ((y2 - y1) - (2 * r) < 0) {\n\t\t\t\t\t\t\tr = (y2 - y1) / 2;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Draw rectangle\n\t\t\t\t\t\tctx.moveTo(x1 + r, y1);\n\t\t\t\t\t\tctx.lineTo(x2 - r, y1);\n\t\t\t\t\t\tctx.arc(x2 - r, y1 + r, r, 3 * PI / 2, PI * 2, false);\n\t\t\t\t\t\tctx.lineTo(x2, y2 - r);\n\t\t\t\t\t\tctx.arc(x2 - r, y2 - r, r, 0, PI / 2, false);\n\t\t\t\t\t\tctx.lineTo(x1 + r, y2);\n\t\t\t\t\t\tctx.arc(x1 + r, y2 - r, r, PI / 2, PI, false);\n\t\t\t\t\t\tctx.lineTo(x1, y1 + r);\n\t\t\t\t\t\tctx.arc(x1 + r, y1 + r, r, PI, 3 * PI / 2, false);\n\t\t\t\t\t\t// Always close path\n\t\t\t\t\t\tparams.closed = true;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// Otherwise, draw rectangle with square corners\n\t\t\t\t\t\tctx.rect(x1, y1, params.width, params.height);\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Check for jCanvas events\n\t\t\t\t_detectEvents($canvases[e], ctx, params);\n\t\t\t\t// Close rectangle path\n\t\t\t\t_closePath($canvases[e], ctx, params);\n\t\t\t}\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Retrieves a coterminal angle between 0 and 2pi for the given angle\nfunction _getCoterminal(angle) {\n\twhile (angle < 0) {\n\t\tangle += (2 * PI);\n\t}\n\treturn angle;\n}\n\n// Retrieves the x-coordinate for the given angle in a circle\nfunction _getArcX(params, angle) {\n\treturn params.x + (params.radius * cos(angle));\n}\n// Retrieves the y-coordinate for the given angle in a circle\nfunction _getArcY(params, angle) {\n\treturn params.y + (params.radius * sin(angle));\n}\n\n// Draws arc (internal)\nfunction _drawArc(canvas, ctx, params, path) {\n\tvar x1, y1, x2, y2,\n\t\tx3, y3, x4, y4,\n\t\toffsetX, offsetY,\n\t\tdiff;\n\n\t// Determine offset from dragging\n\tif (params === path) {\n\t\toffsetX = 0;\n\t\toffsetY = 0;\n\t} else {\n\t\toffsetX = params.x;\n\t\toffsetY = params.y;\n\t}\n\n\t// Convert default end angle to radians\n\tif (!path.inDegrees && path.end === 360) {\n\t\tpath.end = PI * 2;\n\t}\n\n\t// Convert angles to radians\n\tpath.start *= params._toRad;\n\tpath.end *= params._toRad;\n\t// Consider 0deg due north of arc\n\tpath.start -= (PI / 2);\n\tpath.end -= (PI / 2);\n\n\t// Ensure arrows are pointed correctly for CCW arcs\n\tdiff = PI / 180;\n\tif (path.ccw) {\n\t\tdiff *= -1;\n\t}\n\n\t// Calculate coordinates for start arrow\n\tx1 = _getArcX(path, path.start + diff);\n\ty1 = _getArcY(path, path.start + diff);\n\tx2 = _getArcX(path, path.start);\n\ty2 = _getArcY(path, path.start);\n\n\t_addStartArrow(\n\t\tcanvas, ctx,\n\t\tparams, path,\n\t\tx1, y1,\n\t\tx2, y2\n\t);\n\n\t// Draw arc\n\tctx.arc(path.x + offsetX, path.y + offsetY, path.radius, path.start, path.end, path.ccw);\n\n\t// Calculate coordinates for end arrow\n\tx3 = _getArcX(path, path.end + diff);\n\ty3 = _getArcY(path, path.end + diff);\n\tx4 = _getArcX(path, path.end);\n\ty4 = _getArcY(path, path.end);\n\n\t_addEndArrow(\n\t\tcanvas, ctx,\n\t\tparams, path,\n\t\tx4, y4,\n\t\tx3, y3\n\t);\n}\n\n// Draws arc or circle\n$.fn.drawArc = function drawArc(args) {\n\tvar $canvases = this, e, ctx,\n\t\tparams;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\tctx = _getContext($canvases[e]);\n\t\tif (ctx) {\n\n\t\t\tparams = new jCanvasObject(args);\n\t\t\t_addLayer($canvases[e], params, args, drawArc);\n\t\t\tif (params.visible) {\n\n\t\t\t\t_transformShape($canvases[e], ctx, params, params.radius * 2);\n\t\t\t\t_setGlobalProps($canvases[e], ctx, params);\n\n\t\t\t\tctx.beginPath();\n\t\t\t\t_drawArc($canvases[e], ctx, params, params);\n\t\t\t\t// Check for jCanvas events\n\t\t\t\t_detectEvents($canvases[e], ctx, params);\n\t\t\t\t// Optionally close path\n\t\t\t\t_closePath($canvases[e], ctx, params);\n\n\t\t\t}\n\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Draws ellipse\n$.fn.drawEllipse = function drawEllipse(args) {\n\tvar $canvases = this, e, ctx,\n\t\tparams,\n\t\tcontrolW,\n\t\tcontrolH;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\tctx = _getContext($canvases[e]);\n\t\tif (ctx) {\n\n\t\t\tparams = new jCanvasObject(args);\n\t\t\t_addLayer($canvases[e], params, args, drawEllipse);\n\t\t\tif (params.visible) {\n\n\t\t\t\t_transformShape($canvases[e], ctx, params, params.width, params.height);\n\t\t\t\t_setGlobalProps($canvases[e], ctx, params);\n\n\t\t\t\t// Calculate control width and height\n\t\t\t\tcontrolW = params.width * (4 / 3);\n\t\t\t\tcontrolH = params.height;\n\n\t\t\t\t// Create ellipse using curves\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.moveTo(params.x, params.y - (controlH / 2));\n\t\t\t\t// Left side\n\t\t\t\tctx.bezierCurveTo(params.x - (controlW / 2), params.y - (controlH / 2), params.x - (controlW / 2), params.y + (controlH / 2), params.x, params.y + (controlH / 2));\n\t\t\t\t// Right side\n\t\t\t\tctx.bezierCurveTo(params.x + (controlW / 2), params.y + (controlH / 2), params.x + (controlW / 2), params.y - (controlH / 2), params.x, params.y - (controlH / 2));\n\t\t\t\t// Check for jCanvas events\n\t\t\t\t_detectEvents($canvases[e], ctx, params);\n\t\t\t\t// Always close path\n\t\t\t\tparams.closed = true;\n\t\t\t\t_closePath($canvases[e], ctx, params);\n\n\t\t\t}\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Draws a regular (equal-angled) polygon\n$.fn.drawPolygon = function drawPolygon(args) {\n\tvar $canvases = this, e, ctx,\n\t\tparams,\n\t\ttheta, dtheta, hdtheta,\n\t\tapothem,\n\t\tx, y, i;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\tctx = _getContext($canvases[e]);\n\t\tif (ctx) {\n\n\t\t\tparams = new jCanvasObject(args);\n\t\t\t_addLayer($canvases[e], params, args, drawPolygon);\n\t\t\tif (params.visible) {\n\n\t\t\t\t_transformShape($canvases[e], ctx, params, params.radius * 2);\n\t\t\t\t_setGlobalProps($canvases[e], ctx, params);\n\n\t\t\t\t// Polygon's central angle\n\t\t\t\tdtheta = (2 * PI) / params.sides;\n\t\t\t\t// Half of dtheta\n\t\t\t\thdtheta = dtheta / 2;\n\t\t\t\t// Polygon's starting angle\n\t\t\t\ttheta = hdtheta + (PI / 2);\n\t\t\t\t// Distance from polygon's center to the middle of its side\n\t\t\t\tapothem = params.radius * cos(hdtheta);\n\n\t\t\t\t// Calculate path and draw\n\t\t\t\tctx.beginPath();\n\t\t\t\tfor (i = 0; i < params.sides; i += 1) {\n\n\t\t\t\t\t// Draw side of polygon\n\t\t\t\t\tx = params.x + (params.radius * cos(theta));\n\t\t\t\t\ty = params.y + (params.radius * sin(theta));\n\n\t\t\t\t\t// Plot point on polygon\n\t\t\t\t\tctx.lineTo(x, y);\n\n\t\t\t\t\t// Project side if chosen\n\t\t\t\t\tif (params.concavity) {\n\t\t\t\t\t\t// Sides are projected from the polygon's apothem\n\t\t\t\t\t\tx = params.x + ((apothem + (-apothem * params.concavity)) * cos(theta + hdtheta));\n\t\t\t\t\t\ty = params.y + ((apothem + (-apothem * params.concavity)) * sin(theta + hdtheta));\n\t\t\t\t\t\tctx.lineTo(x, y);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Increment theta by delta theta\n\t\t\t\t\ttheta += dtheta;\n\n\t\t\t\t}\n\t\t\t\t// Check for jCanvas events\n\t\t\t\t_detectEvents($canvases[e], ctx, params);\n\t\t\t\t// Always close path\n\t\t\t\tparams.closed = true;\n\t\t\t\t_closePath($canvases[e], ctx, params);\n\n\t\t\t}\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Draws pie-shaped slice\n$.fn.drawSlice = function drawSlice(args) {\n\tvar $canvases = this, e, ctx,\n\t\tparams,\n\t\tangle, dx, dy;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\tctx = _getContext($canvases[e]);\n\t\tif (ctx) {\n\n\t\t\tparams = new jCanvasObject(args);\n\t\t\t_addLayer($canvases[e], params, args, drawSlice);\n\t\t\tif (params.visible) {\n\n\t\t\t\t_transformShape($canvases[e], ctx, params, params.radius * 2);\n\t\t\t\t_setGlobalProps($canvases[e], ctx, params);\n\n\t\t\t\t// Perform extra calculations\n\n\t\t\t\t// Convert angles to radians\n\t\t\t\tparams.start *= params._toRad;\n\t\t\t\tparams.end *= params._toRad;\n\t\t\t\t// Consider 0deg at north of arc\n\t\t\t\tparams.start -= (PI / 2);\n\t\t\t\tparams.end -= (PI / 2);\n\n\t\t\t\t// Find positive equivalents of angles\n\t\t\t\tparams.start = _getCoterminal(params.start);\n\t\t\t\tparams.end = _getCoterminal(params.end);\n\t\t\t\t// Ensure start angle is less than end angle\n\t\t\t\tif (params.end < params.start) {\n\t\t\t\t\tparams.end += (2 * PI);\n\t\t\t\t}\n\n\t\t\t\t// Calculate angular position of slice\n\t\t\t\tangle = ((params.start + params.end) / 2);\n\n\t\t\t\t// Calculate ratios for slice's angle\n\t\t\t\tdx = (params.radius * params.spread * cos(angle));\n\t\t\t\tdy = (params.radius * params.spread * sin(angle));\n\n\t\t\t\t// Adjust position of slice\n\t\t\t\tparams.x += dx;\n\t\t\t\tparams.y += dy;\n\n\t\t\t\t// Draw slice\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.arc(params.x, params.y, params.radius, params.start, params.end, params.ccw);\n\t\t\t\tctx.lineTo(params.x, params.y);\n\t\t\t\t// Check for jCanvas events\n\t\t\t\t_detectEvents($canvases[e], ctx, params);\n\t\t\t\t// Always close path\n\t\t\t\tparams.closed = true;\n\t\t\t\t_closePath($canvases[e], ctx, params);\n\n\t\t\t}\n\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n/* Path API */\n\n// Adds arrow to path using the given properties\nfunction _addArrow(canvas, ctx, params, path, x1, y1, x2, y2) {\n\tvar leftX, leftY,\n\t\trightX, rightY,\n\t\toffsetX, offsetY,\n\t\tangle;\n\n\t// If arrow radius is given and path is not closed\n\tif (path.arrowRadius && !params.closed) {\n\n\t\t// Calculate angle\n\t\tangle = atan2((y2 - y1), (x2 - x1));\n\t\t// Adjust angle correctly\n\t\tangle -= PI;\n\t\t// Calculate offset to place arrow at edge of path\n\t\toffsetX = (params.strokeWidth * cos(angle));\n\t\toffsetY = (params.strokeWidth * sin(angle));\n\n\t\t// Calculate coordinates for left half of arrow\n\t\tleftX = x2 + (path.arrowRadius * cos(angle + (path.arrowAngle / 2)));\n\t\tleftY = y2 + (path.arrowRadius * sin(angle + (path.arrowAngle / 2)));\n\t\t// Calculate coordinates for right half of arrow\n\t\trightX = x2 + (path.arrowRadius * cos(angle - (path.arrowAngle / 2)));\n\t\trightY = y2 + (path.arrowRadius * sin(angle - (path.arrowAngle / 2)));\n\n\t\t// Draw left half of arrow\n\t\tctx.moveTo(leftX - offsetX, leftY - offsetY);\n\t\tctx.lineTo(x2 - offsetX, y2 - offsetY);\n\t\t// Draw right half of arrow\n\t\tctx.lineTo(rightX - offsetX, rightY - offsetY);\n\n\t\t// Visually connect arrow to path\n\t\tctx.moveTo(x2 - offsetX, y2 - offsetY);\n\t\tctx.lineTo(x2 + offsetX, y2 + offsetY);\n\t\t// Move back to end of path\n\t\tctx.moveTo(x2, y2);\n\n\t}\n}\n\n// Optionally adds arrow to start of path\nfunction _addStartArrow(canvas, ctx, params, path, x1, y1, x2, y2) {\n\tif (!path._arrowAngleConverted) {\n\t\tpath.arrowAngle *= params._toRad;\n\t\tpath._arrowAngleConverted = true;\n\t}\n\tif (path.startArrow) {\n\t\t_addArrow(canvas, ctx, params, path, x1, y1, x2, y2);\n\t}\n}\n\n// Optionally adds arrow to end of path\nfunction _addEndArrow(canvas, ctx, params, path, x1, y1, x2, y2) {\n\tif (!path._arrowAngleConverted) {\n\t\tpath.arrowAngle *= params._toRad;\n\t\tpath._arrowAngleConverted = true;\n\t}\n\tif (path.endArrow) {\n\t\t_addArrow(canvas, ctx, params, path, x1, y1, x2, y2);\n\t}\n}\n\n// Draws line (internal)\nfunction _drawLine(canvas, ctx, params, path) {\n\tvar l,\n\t\tlx, ly;\n\tl = 2;\n\t_addStartArrow(\n\t\tcanvas, ctx,\n\t\tparams, path,\n\t\tpath.x2 + params.x,\n\t\tpath.y2 + params.y,\n\t\tpath.x1 + params.x,\n\t\tpath.y1 + params.y\n\t);\n\tif (path.x1 !== undefined && path.y1 !== undefined) {\n\t\tctx.moveTo(path.x1 + params.x, path.y1 + params.y);\n\t}\n\twhile (true) {\n\t\t// Calculate next coordinates\n\t\tlx = path['x' + l];\n\t\tly = path['y' + l];\n\t\t// If coordinates are given\n\t\tif (lx !== undefined && ly !== undefined) {\n\t\t\t// Draw next line\n\t\t\tctx.lineTo(lx + params.x, ly + params.y);\n\t\t\tl += 1;\n\t\t} else {\n\t\t\t// Otherwise, stop drawing\n\t\t\tbreak;\n\t\t}\n\t}\n\tl -= 1;\n\t// Optionally add arrows to path\n\t_addEndArrow(\n\t\tcanvas, ctx,\n\t\tparams,\n\t\tpath,\n\t\tpath['x' + (l - 1)] + params.x,\n\t\tpath['y' + (l - 1)] + params.y,\n\t\tpath['x' + l] + params.x,\n\t\tpath['y' + l] + params.y\n\t);\n}\n\n// Draws line\n$.fn.drawLine = function drawLine(args) {\n\tvar $canvases = this, e, ctx,\n\t\tparams;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\tctx = _getContext($canvases[e]);\n\t\tif (ctx) {\n\n\t\t\tparams = new jCanvasObject(args);\n\t\t\t_addLayer($canvases[e], params, args, drawLine);\n\t\t\tif (params.visible) {\n\n\t\t\t\t_transformShape($canvases[e], ctx, params);\n\t\t\t\t_setGlobalProps($canvases[e], ctx, params);\n\n\t\t\t\t// Draw each point\n\t\t\t\tctx.beginPath();\n\t\t\t\t_drawLine($canvases[e], ctx, params, params);\n\t\t\t\t// Check for jCanvas events\n\t\t\t\t_detectEvents($canvases[e], ctx, params);\n\t\t\t\t// Optionally close path\n\t\t\t\t_closePath($canvases[e], ctx, params);\n\n\t\t\t}\n\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Draws quadratic curve (internal)\nfunction _drawQuadratic(canvas, ctx, params, path) {\n\tvar l,\n\t\tlx, ly,\n\t\tlcx, lcy;\n\n\tl = 2;\n\n\t_addStartArrow(\n\t\tcanvas,\n\t\tctx,\n\t\tparams,\n\t\tpath,\n\t\tpath.cx1 + params.x,\n\t\tpath.cy1 + params.y,\n\t\tpath.x1 + params.x,\n\t\tpath.y1 + params.y\n\t);\n\n\tif (path.x1 !== undefined && path.y1 !== undefined) {\n\t\tctx.moveTo(path.x1 + params.x, path.y1 + params.y);\n\t}\n\twhile (true) {\n\t\t// Calculate next coordinates\n\t\tlx = path['x' + l];\n\t\tly = path['y' + l];\n\t\tlcx = path['cx' + (l - 1)];\n\t\tlcy = path['cy' + (l - 1)];\n\t\t// If coordinates are given\n\t\tif (lx !== undefined && ly !== undefined && lcx !== undefined && lcy !== undefined) {\n\t\t\t// Draw next curve\n\t\t\tctx.quadraticCurveTo(lcx + params.x, lcy + params.y, lx + params.x, ly + params.y);\n\t\t\tl += 1;\n\t\t} else {\n\t\t\t// Otherwise, stop drawing\n\t\t\tbreak;\n\t\t}\n\t}\n\tl -= 1;\n\t_addEndArrow(\n\t\tcanvas,\n\t\tctx,\n\t\tparams,\n\t\tpath,\n\t\tpath['cx' + (l - 1)] + params.x,\n\t\tpath['cy' + (l - 1)] + params.y,\n\t\tpath['x' + l] + params.x,\n\t\tpath['y' + l] + params.y\n\t);\n}\n\n// Draws quadratic curve\n$.fn.drawQuadratic = function drawQuadratic(args) {\n\tvar $canvases = this, e, ctx,\n\t\tparams;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\tctx = _getContext($canvases[e]);\n\t\tif (ctx) {\n\n\t\t\tparams = new jCanvasObject(args);\n\t\t\t_addLayer($canvases[e], params, args, drawQuadratic);\n\t\t\tif (params.visible) {\n\n\t\t\t\t_transformShape($canvases[e], ctx, params);\n\t\t\t\t_setGlobalProps($canvases[e], ctx, params);\n\n\t\t\t\t// Draw each point\n\t\t\t\tctx.beginPath();\n\t\t\t\t_drawQuadratic($canvases[e], ctx, params, params);\n\t\t\t\t// Check for jCanvas events\n\t\t\t\t_detectEvents($canvases[e], ctx, params);\n\t\t\t\t// Optionally close path\n\t\t\t\t_closePath($canvases[e], ctx, params);\n\n\t\t\t}\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Draws Bezier curve (internal)\nfunction _drawBezier(canvas, ctx, params, path) {\n\tvar l, lc,\n\t\tlx, ly,\n\t\tlcx1, lcy1,\n\t\tlcx2, lcy2;\n\n\tl = 2;\n\tlc = 1;\n\n\t_addStartArrow(\n\t\tcanvas,\n\t\tctx,\n\t\tparams,\n\t\tpath,\n\t\tpath.cx1 + params.x,\n\t\tpath.cy1 + params.y,\n\t\tpath.x1 + params.x,\n\t\tpath.y1 + params.y\n\t);\n\n\tif (path.x1 !== undefined && path.y1 !== undefined) {\n\t\tctx.moveTo(path.x1 + params.x, path.y1 + params.y);\n\t}\n\twhile (true) {\n\t\t// Calculate next coordinates\n\t\tlx = path['x' + l];\n\t\tly = path['y' + l];\n\t\tlcx1 = path['cx' + lc];\n\t\tlcy1 = path['cy' + lc];\n\t\tlcx2 = path['cx' + (lc + 1)];\n\t\tlcy2 = path['cy' + (lc + 1)];\n\t\t// If next coordinates are given\n\t\tif (lx !== undefined && ly !== undefined && lcx1 !== undefined && lcy1 !== undefined && lcx2 !== undefined && lcy2 !== undefined) {\n\t\t\t// Draw next curve\n\t\t\tctx.bezierCurveTo(lcx1 + params.x, lcy1 + params.y, lcx2 + params.x, lcy2 + params.y, lx + params.x, ly + params.y);\n\t\t\tl += 1;\n\t\t\tlc += 2;\n\t\t} else {\n\t\t\t// Otherwise, stop drawing\n\t\t\tbreak;\n\t\t}\n\t}\n\tl -= 1;\n\tlc -= 2;\n\t_addEndArrow(\n\t\tcanvas,\n\t\tctx,\n\t\tparams,\n\t\tpath,\n\t\tpath['cx' + (lc + 1)] + params.x,\n\t\tpath['cy' + (lc + 1)] + params.y,\n\t\tpath['x' + l] + params.x,\n\t\tpath['y' + l] + params.y\n\t);\n}\n\n// Draws Bezier curve\n$.fn.drawBezier = function drawBezier(args) {\n\tvar $canvases = this, e, ctx,\n\t\tparams;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\tctx = _getContext($canvases[e]);\n\t\tif (ctx) {\n\n\t\t\tparams = new jCanvasObject(args);\n\t\t\t_addLayer($canvases[e], params, args, drawBezier);\n\t\t\tif (params.visible) {\n\n\t\t\t\t_transformShape($canvases[e], ctx, params);\n\t\t\t\t_setGlobalProps($canvases[e], ctx, params);\n\n\t\t\t\t// Draw each point\n\t\t\t\tctx.beginPath();\n\t\t\t\t_drawBezier($canvases[e], ctx, params, params);\n\t\t\t\t// Check for jCanvas events\n\t\t\t\t_detectEvents($canvases[e], ctx, params);\n\t\t\t\t// Optionally close path\n\t\t\t\t_closePath($canvases[e], ctx, params);\n\n\t\t\t}\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Retrieves the x-coordinate for the given vector angle and length\nfunction _getVectorX(params, angle, length) {\n\tangle *= params._toRad;\n\tangle -= (PI / 2);\n\treturn (length * cos(angle));\n}\n// Retrieves the y-coordinate for the given vector angle and length\nfunction _getVectorY(params, angle, length) {\n\tangle *= params._toRad;\n\tangle -= (PI / 2);\n\treturn (length * sin(angle));\n}\n\n// Draws vector (internal) #2\nfunction _drawVector(canvas, ctx, params, path) {\n\tvar l, angle, length,\n\t\toffsetX, offsetY,\n\t\tx, y,\n\t\tx3, y3,\n\t\tx4, y4;\n\n\t// Determine offset from dragging\n\tif (params === path) {\n\t\toffsetX = 0;\n\t\toffsetY = 0;\n\t} else {\n\t\toffsetX = params.x;\n\t\toffsetY = params.y;\n\t}\n\n\tl = 1;\n\tx = x3 = x4 = path.x + offsetX;\n\ty = y3 = y4 = path.y + offsetY;\n\n\t_addStartArrow(\n\t\tcanvas, ctx,\n\t\tparams, path,\n\t\tx + _getVectorX(params, path.a1, path.l1),\n\t\ty + _getVectorY(params, path.a1, path.l1),\n\t\tx,\n\t\ty\n\t);\n\n\t// The vector starts at the given (x, y) coordinates\n\tif (path.x !== undefined && path.y !== undefined) {\n\t\tctx.moveTo(x, y);\n\t}\n\twhile (true) {\n\n\t\tangle = path['a' + l];\n\t\tlength = path['l' + l];\n\n\t\tif (angle !== undefined && length !== undefined) {\n\t\t\t// Convert the angle to radians with 0 degrees starting at north\n\t\t\t// Keep track of last two coordinates\n\t\t\tx3 = x4;\n\t\t\ty3 = y4;\n\t\t\t// Compute (x, y) coordinates from angle and length\n\t\t\tx4 += _getVectorX(params, angle, length);\n\t\t\ty4 += _getVectorY(params, angle, length);\n\t\t\tctx.lineTo(x4, y4);\n\t\t\tl += 1;\n\t\t} else {\n\t\t\t// Otherwise, stop drawing\n\t\t\tbreak;\n\t\t}\n\n\t}\n\t_addEndArrow(\n\t\tcanvas, ctx,\n\t\tparams, path,\n\t\tx3, y3,\n\t\tx4, y4\n\t);\n}\n\n// Draws vector\n$.fn.drawVector = function drawVector(args) {\n\tvar $canvases = this, e, ctx,\n\t\tparams;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\tctx = _getContext($canvases[e]);\n\t\tif (ctx) {\n\n\t\t\tparams = new jCanvasObject(args);\n\t\t\t_addLayer($canvases[e], params, args, drawVector);\n\t\t\tif (params.visible) {\n\n\t\t\t\t_transformShape($canvases[e], ctx, params);\n\t\t\t\t_setGlobalProps($canvases[e], ctx, params);\n\n\t\t\t\t// Draw each point\n\t\t\t\tctx.beginPath();\n\t\t\t\t_drawVector($canvases[e], ctx, params, params);\n\t\t\t\t// Check for jCanvas events\n\t\t\t\t_detectEvents($canvases[e], ctx, params);\n\t\t\t\t// Optionally close path\n\t\t\t\t_closePath($canvases[e], ctx, params);\n\n\t\t\t}\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Draws a path consisting of one or more subpaths\n$.fn.drawPath = function drawPath(args) {\n\tvar $canvases = this, e, ctx,\n\t\tparams,\n\t\tl, lp;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\tctx = _getContext($canvases[e]);\n\t\tif (ctx) {\n\n\t\t\tparams = new jCanvasObject(args);\n\t\t\t_addLayer($canvases[e], params, args, drawPath);\n\t\t\tif (params.visible) {\n\n\t\t\t\t_transformShape($canvases[e], ctx, params);\n\t\t\t\t_setGlobalProps($canvases[e], ctx, params);\n\n\t\t\t\tctx.beginPath();\n\t\t\t\tl = 1;\n\t\t\t\twhile (true) {\n\t\t\t\t\tlp = params['p' + l];\n\t\t\t\t\tif (lp !== undefined) {\n\t\t\t\t\t\tlp = new jCanvasObject(lp);\n\t\t\t\t\t\tif (lp.type === 'line') {\n\t\t\t\t\t\t\t_drawLine($canvases[e], ctx, params, lp);\n\t\t\t\t\t\t} else if (lp.type === 'quadratic') {\n\t\t\t\t\t\t\t_drawQuadratic($canvases[e], ctx, params, lp);\n\t\t\t\t\t\t} else if (lp.type === 'bezier') {\n\t\t\t\t\t\t\t_drawBezier($canvases[e], ctx, params, lp);\n\t\t\t\t\t\t} else if (lp.type === 'vector') {\n\t\t\t\t\t\t\t_drawVector($canvases[e], ctx, params, lp);\n\t\t\t\t\t\t} else if (lp.type === 'arc') {\n\t\t\t\t\t\t\t_drawArc($canvases[e], ctx, params, lp);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tl += 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Check for jCanvas events\n\t\t\t\t_detectEvents($canvases[e], ctx, params);\n\t\t\t\t// Optionally close path\n\t\t\t\t_closePath($canvases[e], ctx, params);\n\n\t\t\t}\n\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n/* Text API */\n\n// Calculates font string and set it as the canvas font\nfunction _setCanvasFont(canvas, ctx, params) {\n\t// Otherwise, use the given font attributes\n\tif (!isNaN(Number(params.fontSize))) {\n\t\t// Give font size units if it doesn't have any\n\t\tparams.fontSize += 'px';\n\t}\n\t// Set font using given font properties\n\tctx.font = params.fontStyle + ' ' + params.fontSize + ' ' + params.fontFamily;\n}\n\n// Measures canvas text\nfunction _measureText(canvas, ctx, params, lines) {\n\tvar originalSize, curWidth, l,\n\t\tpropCache = caches.propCache;\n\n\t// Used cached width/height if possible\n\tif (propCache.text === params.text && propCache.fontStyle === params.fontStyle && propCache.fontSize === params.fontSize && propCache.fontFamily === params.fontFamily && propCache.maxWidth === params.maxWidth && propCache.lineHeight === params.lineHeight) {\n\n\t\tparams.width = propCache.width;\n\t\tparams.height = propCache.height;\n\n\t} else {\n\t\t// Calculate text dimensions only once\n\n\t\t// Calculate width of first line (for comparison)\n\t\tparams.width = ctx.measureText(lines[0]).width;\n\n\t\t// Get width of longest line\n\t\tfor (l = 1; l < lines.length; l += 1) {\n\n\t\t\tcurWidth = ctx.measureText(lines[l]).width;\n\t\t\t// Ensure text's width is the width of its longest line\n\t\t\tif (curWidth > params.width) {\n\t\t\t\tparams.width = curWidth;\n\t\t\t}\n\n\t\t}\n\n\t\t// Save original font size\n\t\toriginalSize = canvas.style.fontSize;\n\t\t// Temporarily set canvas font size to retrieve size in pixels\n\t\tcanvas.style.fontSize = params.fontSize;\n\t\t// Save text width and height in parameters object\n\t\tparams.height = parseFloat($.css(canvas, 'fontSize')) * lines.length * params.lineHeight;\n\t\t// Reset font size to original size\n\t\tcanvas.style.fontSize = originalSize;\n\t}\n}\n\n// Wraps a string of text within a defined width\nfunction _wrapText(ctx, params) {\n\tvar allText = String(params.text),\n\t\t// Maximum line width (optional)\n\t\tmaxWidth = params.maxWidth,\n\t\t// Lines created by manual line breaks (\\n)\n\t\tmanualLines = allText.split('\\n'),\n\t\t// All lines created manually and by wrapping\n\t\tallLines = [],\n\t\t// Other variables\n\t\tlines, line, l,\n\t\ttext, words, w;\n\n\t// Loop through manually-broken lines\n\tfor (l = 0; l < manualLines.length; l += 1) {\n\n\t\ttext = manualLines[l];\n\t\t// Split line into list of words\n\t\twords = text.split(' ');\n\t\tlines = [];\n\t\tline = '';\n\n\t\t// If text is short enough initially\n\t\t// Or, if the text consists of only one word\n\t\tif (words.length === 1 || ctx.measureText(text).width < maxWidth) {\n\n\t\t\t// No need to wrap text\n\t\t\tlines = [text];\n\n\t\t} else {\n\n\t\t\t// Wrap lines\n\t\t\tfor (w = 0; w < words.length; w += 1) {\n\n\t\t\t\t// Once line gets too wide, push word to next line\n\t\t\t\tif (ctx.measureText(line + words[w]).width > maxWidth) {\n\t\t\t\t\t// This check prevents empty lines from being created\n\t\t\t\t\tif (line !== '') {\n\t\t\t\t\t\tlines.push(line);\n\t\t\t\t\t}\n\t\t\t\t\t// Start new line and repeat process\n\t\t\t\t\tline = '';\n\t\t\t\t}\n\t\t\t\t// Add words to line until the line is too wide\n\t\t\t\tline += words[w];\n\t\t\t\t// Do not add a space after the last word\n\t\t\t\tif (w !== (words.length - 1)) {\n\t\t\t\t\tline += ' ';\n\t\t\t\t}\n\t\t\t}\n\t\t\t// The last word should always be pushed\n\t\t\tlines.push(line);\n\n\t\t}\n\t\t// Remove extra space at the end of each line\n\t\tallLines = allLines.concat(\n\t\t\tlines\n\t\t\t.join('\\n')\n\t\t\t.replace(/((\\n))|($)/gi, '$2')\n\t\t\t.split('\\n')\n\t\t);\n\n\t}\n\n\treturn allLines;\n}\n\n// Draws text on canvas\n$.fn.drawText = function drawText(args) {\n\tvar $canvases = this, e, ctx,\n\t\tparams, layer,\n\t\tlines, line, l,\n\t\tfontSize, constantCloseness = 500,\n\t\tnchars, chars, ch, c,\n\t\tx, y;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\tctx = _getContext($canvases[e]);\n\t\tif (ctx) {\n\n\t\t\tparams = new jCanvasObject(args);\n\t\t\t_addLayer($canvases[e], params, args, drawText);\n\t\t\tif (params.visible) {\n\n\t\t\t\t// Set text-specific properties\n\t\t\t\tctx.textBaseline = params.baseline;\n\t\t\t\tctx.textAlign = params.align;\n\n\t\t\t\t// Set canvas font using given properties\n\t\t\t\t_setCanvasFont($canvases[e], ctx, params);\n\n\t\t\t\tif (params.maxWidth !== null) {\n\t\t\t\t\t// Wrap text using an internal function\n\t\t\t\t\tlines = _wrapText(ctx, params);\n\t\t\t\t} else {\n\t\t\t\t\t// Convert string of text to list of lines\n\t\t\t\t\tlines = params.text\n\t\t\t\t\t.toString()\n\t\t\t\t\t.split('\\n');\n\t\t\t\t}\n\n\t\t\t\t// Calculate text's width and height\n\t\t\t\t_measureText($canvases[e], ctx, params, lines);\n\n\t\t\t\t// If text is a layer\n\t\t\t\tif (layer) {\n\t\t\t\t\t// Copy calculated width/height to layer object\n\t\t\t\t\tlayer.width = params.width;\n\t\t\t\t\tlayer.height = params.height;\n\t\t\t\t}\n\n\t\t\t\t_transformShape($canvases[e], ctx, params, params.width, params.height);\n\t\t\t\t_setGlobalProps($canvases[e], ctx, params);\n\n\t\t\t\t// Adjust text position to accomodate different horizontal alignments\n\t\t\t\tx = params.x;\n\t\t\t\tif (params.align === 'left') {\n\t\t\t\t\tif (params.respectAlign) {\n\t\t\t\t\t\t// Realign text to the left if chosen\n\t\t\t\t\t\tparams.x += params.width / 2;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Center text block by default\n\t\t\t\t\t\tx -= params.width / 2;\n\t\t\t\t\t}\n\t\t\t\t} else if (params.align === 'right') {\n\t\t\t\t\tif (params.respectAlign) {\n\t\t\t\t\t\t// Realign text to the right if chosen\n\t\t\t\t\t\tparams.x -= params.width / 2;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Center text block by default\n\t\t\t\t\t\tx += params.width / 2;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (params.radius) {\n\n\t\t\t\t\tfontSize = parseFloat(params.fontSize);\n\n\t\t\t\t\t// Greater values move clockwise\n\t\t\t\t\tif (params.letterSpacing === null) {\n\t\t\t\t\t\tparams.letterSpacing = fontSize / constantCloseness;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Loop through each line of text\n\t\t\t\t\tfor (l = 0; l < lines.length; l += 1) {\n\t\t\t\t\t\tctx.save();\n\t\t\t\t\t\tctx.translate(params.x, params.y);\n\t\t\t\t\t\tline = lines[l];\n\t\t\t\t\t\tif (params.flipArcText) {\n\t\t\t\t\t\t\tchars = line.split('');\n\t\t\t\t\t\t\tchars.reverse();\n\t\t\t\t\t\t\tline = chars.join('');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnchars = line.length;\n\t\t\t\t\t\tctx.rotate(-(PI * params.letterSpacing * (nchars - 1)) / 2);\n\t\t\t\t\t\t// Loop through characters on each line\n\t\t\t\t\t\tfor (c = 0; c < nchars; c += 1) {\n\t\t\t\t\t\t\tch = line[c];\n\t\t\t\t\t\t\t// If character is not the first character\n\t\t\t\t\t\t\tif (c !== 0) {\n\t\t\t\t\t\t\t\t// Rotate character onto arc\n\t\t\t\t\t\t\t\tctx.rotate(PI * params.letterSpacing);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tctx.save();\n\t\t\t\t\t\t\tctx.translate(0, -params.radius);\n\t\t\t\t\t\t\tif (params.flipArcText) {\n\t\t\t\t\t\t\t\tctx.scale(-1, -1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tctx.fillText(ch, 0, 0);\n\t\t\t\t\t\t\t// Prevent extra shadow created by stroke (but only when fill is present)\n\t\t\t\t\t\t\tif (params.fillStyle !== 'transparent') {\n\t\t\t\t\t\t\t\tctx.shadowColor = 'transparent';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (params.strokeWidth !== 0) {\n\t\t\t\t\t\t\t\t// Only stroke if the stroke is not 0\n\t\t\t\t\t\t\t\tctx.strokeText(ch, 0, 0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tctx.restore();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tparams.radius -= fontSize;\n\t\t\t\t\t\tparams.letterSpacing += fontSize / (constantCloseness * 2 * PI);\n\t\t\t\t\t\tctx.restore();\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Draw each line of text separately\n\t\t\t\t\tfor (l = 0; l < lines.length; l += 1) {\n\t\t\t\t\t\tline = lines[l];\n\t\t\t\t\t\t// Add line offset to center point, but subtract some to center everything\n\t\t\t\t\t\ty = params.y + (l * params.height / lines.length) - (((lines.length - 1) * params.height / lines.length) / 2);\n\n\t\t\t\t\t\tctx.shadowColor = params.shadowColor;\n\n\t\t\t\t\t\t// Fill & stroke text\n\t\t\t\t\t\tctx.fillText(line, x, y);\n\t\t\t\t\t\t// Prevent extra shadow created by stroke (but only when fill is present)\n\t\t\t\t\t\tif (params.fillStyle !== 'transparent') {\n\t\t\t\t\t\t\tctx.shadowColor = 'transparent';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (params.strokeWidth !== 0) {\n\t\t\t\t\t\t\t// Only stroke if the stroke is not 0\n\t\t\t\t\t\t\tctx.strokeText(line, x, y);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// Adjust bounding box according to text baseline\n\t\t\t\ty = 0;\n\t\t\t\tif (params.baseline === 'top') {\n\t\t\t\t\ty += params.height / 2;\n\t\t\t\t} else if (params.baseline === 'bottom') {\n\t\t\t\t\ty -= params.height / 2;\n\t\t\t\t}\n\n\t\t\t\t// Detect jCanvas events\n\t\t\t\tif (params._event) {\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tctx.rect(\n\t\t\t\t\t\tparams.x - (params.width / 2),\n\t\t\t\t\t\tparams.y - (params.height / 2) + y,\n\t\t\t\t\t\tparams.width,\n\t\t\t\t\t\tparams.height\n\t\t\t\t\t);\n\t\t\t\t\t_detectEvents($canvases[e], ctx, params);\n\t\t\t\t\t// Close path and configure masking\n\t\t\t\t\tctx.closePath();\n\t\t\t\t}\n\t\t\t\t_restoreTransform(ctx, params);\n\n\t\t\t}\n\t\t}\n\t}\n\t// Cache jCanvas parameters object for efficiency\n\tcaches.propCache = params;\n\treturn $canvases;\n};\n\n// Measures text width/height using the given parameters\n$.fn.measureText = function measureText(args) {\n\tvar $canvases = this, ctx,\n\t\tparams, lines;\n\n\t// Attempt to retrieve layer\n\tparams = $canvases.getLayer(args);\n\t// If layer does not exist or if returned object is not a jCanvas layer\n\tif (!params || (params && !params._layer)) {\n\t\tparams = new jCanvasObject(args);\n\t}\n\n\tctx = _getContext($canvases[0]);\n\tif (ctx) {\n\n\t\t// Set canvas font using given properties\n\t\t_setCanvasFont($canvases[0], ctx, params);\n\t\t// Calculate width and height of text\n\t\tif (params.maxWidth !== null) {\n\t\t\tlines = _wrapText(ctx, params);\n\t\t} else {\n\t\t\tlines = params.text.split('\\n');\n\t\t}\n\t\t_measureText($canvases[0], ctx, params, lines);\n\n\n\t}\n\n\treturn params;\n};\n\n/* Image API */\n\n// Draws image on canvas\n$.fn.drawImage = function drawImage(args) {\n\tvar $canvases = this, canvas, e, ctx, data,\n\t\tparams, layer,\n\t\timg, imgCtx, source,\n\t\timageCache = caches.imageCache;\n\n\t// Draw image function\n\tfunction draw(canvas, ctx, data, params, layer) {\n\n\t\t// If width and sWidth are not defined, use image width\n\t\tif (params.width === null && params.sWidth === null) {\n\t\t\tparams.width = params.sWidth = img.width;\n\t\t}\n\t\t// If width and sHeight are not defined, use image height\n\t\tif (params.height === null && params.sHeight === null) {\n\t\t\tparams.height = params.sHeight = img.height;\n\t\t}\n\n\t\t// Ensure image layer's width and height are accurate\n\t\tif (layer) {\n\t\t\tlayer.width = params.width;\n\t\t\tlayer.height = params.height;\n\t\t}\n\n\t\t// Only crop image if all cropping properties are given\n\t\tif (params.sWidth !== null && params.sHeight !== null && params.sx !== null && params.sy !== null) {\n\n\t\t\t// If width is not defined, use the given sWidth\n\t\t\tif (params.width === null) {\n\t\t\t\tparams.width = params.sWidth;\n\t\t\t}\n\t\t\t// If height is not defined, use the given sHeight\n\t\t\tif (params.height === null) {\n\t\t\t\tparams.height = params.sHeight;\n\t\t\t}\n\n\t\t\t// Optionally crop from top-left corner of region\n\t\t\tif (params.cropFromCenter) {\n\t\t\t\tparams.sx += params.sWidth / 2;\n\t\t\t\tparams.sy += params.sHeight / 2;\n\t\t\t}\n\n\t\t\t// Ensure cropped region does not escape image boundaries\n\n\t\t\t// Top\n\t\t\tif ((params.sy - (params.sHeight / 2)) < 0) {\n\t\t\t\tparams.sy = (params.sHeight / 2);\n\t\t\t}\n\t\t\t// Bottom\n\t\t\tif ((params.sy + (params.sHeight / 2)) > img.height) {\n\t\t\t\tparams.sy = img.height - (params.sHeight / 2);\n\t\t\t}\n\t\t\t// Left\n\t\t\tif ((params.sx - (params.sWidth / 2)) < 0) {\n\t\t\t\tparams.sx = (params.sWidth / 2);\n\t\t\t}\n\t\t\t// Right\n\t\t\tif ((params.sx + (params.sWidth / 2)) > img.width) {\n\t\t\t\tparams.sx = img.width - (params.sWidth / 2);\n\t\t\t}\n\n\t\t\t_transformShape(canvas, ctx, params, params.width, params.height);\n\t\t\t_setGlobalProps(canvas, ctx, params);\n\n\t\t\t// Draw image\n\t\t\tctx.drawImage(\n\t\t\t\timg,\n\t\t\t\tparams.sx - (params.sWidth / 2),\n\t\t\t\tparams.sy - (params.sHeight / 2),\n\t\t\t\tparams.sWidth,\n\t\t\t\tparams.sHeight,\n\t\t\t\tparams.x - (params.width / 2),\n\t\t\t\tparams.y - (params.height / 2),\n\t\t\t\tparams.width,\n\t\t\t\tparams.height\n\t\t\t);\n\n\t\t} else {\n\t\t\t// Show entire image if no crop region is defined\n\n\t\t\t_transformShape(canvas, ctx, params, params.width, params.height);\n\t\t\t_setGlobalProps(canvas, ctx, params);\n\n\t\t\t// Draw image on canvas\n\t\t\tctx.drawImage(\n\t\t\t\timg,\n\t\t\t\tparams.x - (params.width / 2),\n\t\t\t\tparams.y - (params.height / 2),\n\t\t\t\tparams.width,\n\t\t\t\tparams.height\n\t\t\t);\n\n\t\t}\n\n\t\t// Draw invisible rectangle to allow for events and masking\n\t\tctx.beginPath();\n\t\tctx.rect(\n\t\t\tparams.x - (params.width / 2),\n\t\t\tparams.y - (params.height / 2),\n\t\t\tparams.width,\n\t\t\tparams.height\n\t\t);\n\t\t// Check for jCanvas events\n\t\t_detectEvents(canvas, ctx, params);\n\t\t// Close path and configure masking\n\t\tctx.closePath();\n\t\t_restoreTransform(ctx, params);\n\t\t_enableMasking(ctx, data, params);\n\t}\n\t// On load function\n\tfunction onload(canvas, ctx, data, params, layer) {\n\t\treturn function () {\n\t\t\tvar $canvas = $(canvas);\n\t\t\tdraw(canvas, ctx, data, params, layer);\n\t\t\tif (params.layer) {\n\t\t\t\t// Trigger 'load' event for layers\n\t\t\t\t_triggerLayerEvent($canvas, data, layer, 'load');\n\t\t\t} else if (params.load) {\n\t\t\t\t// Run 'load' callback for non-layers\n\t\t\t\tparams.load.call($canvas[0], layer);\n\t\t\t}\n\t\t\t// Continue drawing successive layers after this image layer has loaded\n\t\t\tif (params.layer) {\n\t\t\t\t// Store list of previous masks for each layer\n\t\t\t\tlayer._masks = data.transforms.masks.slice(0);\n\t\t\t\tif (params._next) {\n\t\t\t\t\t// Draw successive layers\n\t\t\t\t\tvar complete = data.drawLayersComplete;\n\t\t\t\t\tdelete data.drawLayersComplete;\n\t\t\t\t\t$canvas.drawLayers({\n\t\t\t\t\t\tclear: false,\n\t\t\t\t\t\tresetFire: true,\n\t\t\t\t\t\tindex: params._next,\n\t\t\t\t\t\tcomplete: complete\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\tcanvas = $canvases[e];\n\t\tctx = _getContext($canvases[e]);\n\t\tif (ctx) {\n\n\t\t\tdata = _getCanvasData($canvases[e]);\n\t\t\tparams = new jCanvasObject(args);\n\t\t\tlayer = _addLayer($canvases[e], params, args, drawImage);\n\t\t\tif (params.visible) {\n\n\t\t\t\t// Cache the given source\n\t\t\t\tsource = params.source;\n\n\t\t\t\timgCtx = source.getContext;\n\t\t\t\tif (source.src || imgCtx) {\n\t\t\t\t\t// Use image or canvas element if given\n\t\t\t\t\timg = source;\n\t\t\t\t} else if (source) {\n\t\t\t\t\tif (imageCache[source] && imageCache[source].complete) {\n\t\t\t\t\t\t// Get the image element from the cache if possible\n\t\t\t\t\t\timg = imageCache[source];\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Otherwise, get the image from the given source URL\n\t\t\t\t\t\timg = new Image();\n\t\t\t\t\t\t// If source URL is not a data URL\n\t\t\t\t\t\tif (!source.match(/^data:/i)) {\n\t\t\t\t\t\t\t// Set crossOrigin for this image\n\t\t\t\t\t\t\timg.crossOrigin = params.crossOrigin;\n\t\t\t\t\t\t}\n\t\t\t\t\t\timg.src = source;\n\t\t\t\t\t\t// Save image in cache for improved performance\n\t\t\t\t\t\timageCache[source] = img;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (img) {\n\t\t\t\t\tif (img.complete || imgCtx) {\n\t\t\t\t\t\t// Draw image if already loaded\n\t\t\t\t\t\tonload(canvas, ctx, data, params, layer)();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Otherwise, draw image when it loads\n\t\t\t\t\t\timg.onload = onload(canvas, ctx, data, params, layer);\n\t\t\t\t\t\t// Fix onload() bug in IE9\n\t\t\t\t\t\timg.src = img.src;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Creates a canvas pattern object\n$.fn.createPattern = function createPattern(args) {\n\tvar $canvases = this, ctx,\n\t\tparams,\n\t\timg, imgCtx,\n\t\tpattern, source;\n\n\t// Function to be called when pattern loads\n\tfunction onload() {\n\t\t// Create pattern\n\t\tpattern = ctx.createPattern(img, params.repeat);\n\t\t// Run callback function if defined\n\t\tif (params.load) {\n\t\t\tparams.load.call($canvases[0], pattern);\n\t\t}\n\t}\n\n\tctx = _getContext($canvases[0]);\n\tif (ctx) {\n\n\t\tparams = new jCanvasObject(args);\n\n\t\t// Cache the given source\n\t\tsource = params.source;\n\n\t\t// Draw when image is loaded (if load() callback function is defined)\n\n\t\tif (isFunction(source)) {\n\t\t\t// Draw pattern using function if given\n\n\t\t\timg = $('<canvas />')[0];\n\t\t\timg.width = params.width;\n\t\t\timg.height = params.height;\n\t\t\timgCtx = _getContext(img);\n\t\t\tsource.call(img, imgCtx);\n\t\t\tonload();\n\n\t\t} else {\n\t\t\t// Otherwise, draw pattern using source image\n\n\t\t\timgCtx = source.getContext;\n\t\t\tif (source.src || imgCtx) {\n\t\t\t\t// Use image element if given\n\t\t\t\timg = source;\n\t\t\t} else {\n\t\t\t\t// Use URL if given to get the image\n\t\t\t\timg = new Image();\n\t\t\t\t// If source URL is not a data URL\n\t\t\t\tif (!source.match(/^data:/i)) {\n\t\t\t\t\t// Set crossOrigin for this image\n\t\t\t\t\timg.crossOrigin = params.crossOrigin;\n\t\t\t\t}\n\t\t\t\timg.src = source;\n\t\t\t}\n\n\t\t\t// Create pattern if already loaded\n\t\t\tif (img.complete || imgCtx) {\n\t\t\t\tonload();\n\t\t\t} else {\n\t\t\t\timg.onload = onload;\n\t\t\t\t// Fix onload() bug in IE9\n\t\t\t\timg.src = img.src;\n\t\t\t}\n\n\t\t}\n\n\t} else {\n\n\t\tpattern = null;\n\n\t}\n\treturn pattern;\n};\n\n// Creates a canvas gradient object\n$.fn.createGradient = function createGradient(args) {\n\tvar $canvases = this, ctx,\n\t\tparams,\n\t\tgradient,\n\t\tstops = [], nstops,\n\t\tstart, end,\n\t\ti, a, n, p;\n\n\tparams = new jCanvasObject(args);\n\tctx = _getContext($canvases[0]);\n\tif (ctx) {\n\n\t\t// Gradient coordinates must be defined\n\t\tparams.x1 = params.x1 || 0;\n\t\tparams.y1 = params.y1 || 0;\n\t\tparams.x2 = params.x2 || 0;\n\t\tparams.y2 = params.y2 || 0;\n\n\t\tif (params.r1 !== null && params.r2 !== null) {\n\t\t\t// Create radial gradient if chosen\n\t\t\tgradient = ctx.createRadialGradient(params.x1, params.y1, params.r1, params.x2, params.y2, params.r2);\n\t\t} else {\n\t\t\t// Otherwise, create a linear gradient by default\n\t\t\tgradient = ctx.createLinearGradient(params.x1, params.y1, params.x2, params.y2);\n\t\t}\n\n\t\t// Count number of color stops\n\t\tfor (i = 1; params['c' + i] !== undefined; i += 1) {\n\t\t\tif (params['s' + i] !== undefined) {\n\t\t\t\tstops.push(params['s' + i]);\n\t\t\t} else {\n\t\t\t\tstops.push(null);\n\t\t\t}\n\t\t}\n\t\tnstops = stops.length;\n\n\t\t// Define start stop if not already defined\n\t\tif (stops[0] === null) {\n\t\t\tstops[0] = 0;\n\t\t}\n\t\t// Define end stop if not already defined\n\t\tif (stops[nstops - 1] === null) {\n\t\t\tstops[nstops - 1] = 1;\n\t\t}\n\n\t\t// Loop through color stops to fill in the blanks\n\t\tfor (i = 0; i < nstops; i += 1) {\n\t\t\t// A progression, in this context, is defined as all of the color stops between and including two known color stops\n\n\t\t\tif (stops[i] !== null) {\n\t\t\t\t// Start a new progression if stop is a number\n\n\t\t\t\t// Number of stops in current progression\n\t\t\t\tn = 1;\n\t\t\t\t// Current iteration in current progression\n\t\t\t\tp = 0;\n\t\t\t\tstart = stops[i];\n\n\t\t\t\t// Look ahead to find end stop\n\t\t\t\tfor (a = (i + 1); a < nstops; a += 1) {\n\t\t\t\t\tif (stops[a] !== null) {\n\t\t\t\t\t\t// If this future stop is a number, make it the end stop for this progression\n\t\t\t\t\t\tend = stops[a];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Otherwise, keep looking ahead\n\t\t\t\t\t\tn += 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Ensure start stop is not greater than end stop\n\t\t\t\tif (start > end) {\n\t\t\t\t\tstops[a] = stops[i];\n\t\t\t\t}\n\n\t\t\t} else if (stops[i] === null) {\n\t\t\t\t// Calculate stop if not initially given\n\t\t\t\tp += 1;\n\t\t\t\tstops[i] = start + (p * ((end - start) / n));\n\t\t\t}\n\t\t\t// Add color stop to gradient object\n\t\t\tgradient.addColorStop(stops[i], params['c' + (i + 1)]);\n\t\t}\n\n\t} else {\n\t\tgradient = null;\n\t}\n\treturn gradient;\n};\n\n// Manipulates pixels on the canvas\n$.fn.setPixels = function setPixels(args) {\n\tvar $canvases = this,\n\t\tcanvas, e, ctx, canvasData,\n\t\tparams,\n\t\tpx,\n\t\timgData, pixelData, i, len;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\tcanvas = $canvases[e];\n\t\tctx = _getContext(canvas);\n\t\tcanvasData = _getCanvasData($canvases[e]);\n\t\tif (ctx) {\n\n\t\t\tparams = new jCanvasObject(args);\n\t\t\t_addLayer(canvas, params, args, setPixels);\n\t\t\t_transformShape($canvases[e], ctx, params, params.width, params.height);\n\n\t\t\t// Use entire canvas of x, y, width, or height is not defined\n\t\t\tif (params.width === null || params.height === null) {\n\t\t\t\tparams.width = canvas.width;\n\t\t\t\tparams.height = canvas.height;\n\t\t\t\tparams.x = params.width / 2;\n\t\t\t\tparams.y = params.height / 2;\n\t\t\t}\n\n\t\t\tif (params.width !== 0 && params.height !== 0) {\n\t\t\t\t// Only set pixels if width and height are not zero\n\n\t\t\t\timgData = ctx.getImageData(\n\t\t\t\t\t(params.x - (params.width / 2)) * canvasData.pixelRatio,\n\t\t\t\t\t(params.y - (params.height / 2)) * canvasData.pixelRatio,\n\t\t\t\t\tparams.width * canvasData.pixelRatio,\n\t\t\t\t\tparams.height * canvasData.pixelRatio\n\t\t\t\t);\n\t\t\t\tpixelData = imgData.data;\n\t\t\t\tlen = pixelData.length;\n\n\t\t\t\t// Loop through pixels with the \"each\" callback function\n\t\t\t\tif (params.each) {\n\t\t\t\t\tfor (i = 0; i < len; i += 4) {\n\t\t\t\t\t\tpx = {\n\t\t\t\t\t\t\tr: pixelData[i],\n\t\t\t\t\t\t\tg: pixelData[i + 1],\n\t\t\t\t\t\t\tb: pixelData[i + 2],\n\t\t\t\t\t\t\ta: pixelData[i + 3]\n\t\t\t\t\t\t};\n\t\t\t\t\t\tparams.each.call(canvas, px, params);\n\t\t\t\t\t\tpixelData[i] = px.r;\n\t\t\t\t\t\tpixelData[i + 1] = px.g;\n\t\t\t\t\t\tpixelData[i + 2] = px.b;\n\t\t\t\t\t\tpixelData[i + 3] = px.a;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Put pixels on canvas\n\t\t\t\tctx.putImageData(\n\t\t\t\t\timgData,\n\t\t\t\t\t(params.x - (params.width / 2)) * canvasData.pixelRatio,\n\t\t\t\t\t(params.y - (params.height / 2)) * canvasData.pixelRatio\n\t\t\t\t);\n\t\t\t\t// Restore transformation\n\t\t\t\tctx.restore();\n\n\t\t\t}\n\n\t\t}\n\t}\n\treturn $canvases;\n};\n\n// Retrieves canvas image as data URL\n$.fn.getCanvasImage = function getCanvasImage(type, quality) {\n\tvar $canvases = this, canvas,\n\t\tdataURL = null;\n\tif ($canvases.length !== 0) {\n\t\tcanvas = $canvases[0];\n\t\tif (canvas.toDataURL) {\n\t\t\t// JPEG quality defaults to 1\n\t\t\tif (quality === undefined) {\n\t\t\t\tquality = 1;\n\t\t\t}\n\t\t\tdataURL = canvas.toDataURL('image/' + type, quality);\n\t\t}\n\t}\n\treturn dataURL;\n};\n\n// Scales canvas based on the device's pixel ratio\n$.fn.detectPixelRatio = function detectPixelRatio(callback) {\n\tvar $canvases = this,\n\t\tcanvas, e, ctx,\n\t\tdevicePixelRatio, backingStoreRatio, ratio,\n\t\toldWidth, oldHeight,\n\t\tdata;\n\n\tfor (e = 0; e < $canvases.length; e += 1) {\n\t\t// Get canvas and its associated data\n\t\tcanvas = $canvases[e];\n\t\tctx = _getContext(canvas);\n\t\tdata = _getCanvasData($canvases[e]);\n\n\t\t// If canvas has not already been scaled with this method\n\t\tif (!data.scaled) {\n\n\t\t\t// Determine device pixel ratios\n\t\t\tdevicePixelRatio = window.devicePixelRatio || 1;\n\t\t\tbackingStoreRatio = ctx.webkitBackingStorePixelRatio ||\n\t\t\t\tctx.mozBackingStorePixelRatio ||\n\t\t\t\tctx.msBackingStorePixelRatio ||\n\t\t\t\tctx.oBackingStorePixelRatio ||\n\t\t\t\tctx.backingStorePixelRatio || 1;\n\n\t\t\t// Calculate general ratio based on the two given ratios\n\t\t\tratio = devicePixelRatio / backingStoreRatio;\n\n\t\t\tif (ratio !== 1) {\n\t\t\t\t// Scale canvas relative to ratio\n\n\t\t\t\t// Get the current canvas dimensions for future use\n\t\t\t\toldWidth = canvas.width;\n\t\t\t\toldHeight = canvas.height;\n\n\t\t\t\t// Resize canvas relative to the determined ratio\n\t\t\t\tcanvas.width = oldWidth * ratio;\n\t\t\t\tcanvas.height = oldHeight * ratio;\n\n\t\t\t\t// Scale canvas back to original dimensions via CSS\n\t\t\t\tcanvas.style.width = oldWidth + 'px';\n\t\t\t\tcanvas.style.height = oldHeight + 'px';\n\n\t\t\t\t// Scale context to counter the manual scaling of canvas\n\t\t\t\tctx.scale(ratio, ratio);\n\n\t\t\t}\n\n\t\t\t// Set pixel ratio on canvas data object\n\t\t\tdata.pixelRatio = ratio;\n\t\t\t// Ensure that this method can only be called once for any given canvas\n\t\t\tdata.scaled = true;\n\n\t\t\t// Call the given callback function with the ratio as its only argument\n\t\t\tif (callback) {\n\t\t\t\tcallback.call(canvas, ratio);\n\t\t\t}\n\n\t\t}\n\n\t}\n\treturn $canvases;\n};\n\n// Clears the jCanvas cache\njCanvas.clearCache = function clearCache() {\n\tvar cacheName;\n\tfor (cacheName in caches) {\n\t\tif (Object.prototype.hasOwnProperty.call(caches, cacheName)) {\n\t\t\tcaches[cacheName] = {};\n\t\t}\n\t}\n};\n\n// Enable canvas feature detection with $.support\n$.support.canvas = ($('<canvas />')[0].getContext !== undefined);\n\n// Export jCanvas functions\nextendObject(jCanvas, {\n\tdefaults: defaults,\n\tsetGlobalProps: _setGlobalProps,\n\ttransformShape: _transformShape,\n\tdetectEvents: _detectEvents,\n\tclosePath: _closePath,\n\tsetCanvasFont: _setCanvasFont,\n\tmeasureText: _measureText\n});\n$.jCanvas = jCanvas;\n$.jCanvasObject = jCanvasObject;\n\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/plugins/jcanvas.js","<template>\r\n  <div class=\"app-head\" ref=\"appHead\" @click=\"headTap\">\r\n    <canvas id=\"canvas\" class=\"canvas\" width=\"568\" height=\"568\">\r\n      <span>不支持canvas浏览器</span>\r\n    </canvas>\r\n    <img class=\"canvas-cover\" ref=\"canvasCover\" src=\"\" alt=\"\">\r\n    <span class=\"down-tips\">长按保存图片</span>\r\n    <span class=\"rondom\" @click.stop=\"rondomSelect\"></span>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport $ from 'jquery'\r\nimport '@/assets/js/plugins/jcanvas'\r\nimport {hslToRgb} from '@/assets/js/plugins/hsl2rgb'\r\n\r\nexport default {\r\n  props: {\r\n    headOptions: {\r\n      type: Object,\r\n      default () {\r\n        return {}\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    // 是否带背景头发\r\n    hasBgHair () {\r\n      var url = this.headOptions.hair\r\n      if (url.indexOf('data:image/') === -1) {\r\n        var reg = new RegExp(/^.*\\?.*hasBgHair=([^&].+)/g)\r\n        /* eslint-disable vue/no-side-effects-in-computed-properties */\r\n        /* eslint-disable no-eval */\r\n        this.lastHasBgHair = reg.test(url) ? eval(url.replace(reg, '$1').toLowerCase()) : false\r\n      }\r\n      return this.lastHasBgHair\r\n    },\r\n    bgColor () {\r\n      return this.headOptions.bgColor\r\n    },\r\n    faceColor () {\r\n      return this.headOptions.faceColor\r\n    },\r\n    hairColor () {\r\n      return this.headOptions.hairColor\r\n    }\r\n  },\r\n  watch: {\r\n    headOptions: {\r\n      handler () {\r\n        this.removeCanvas()\r\n        this.drawCanvas()\r\n      },\r\n      deep: true\r\n    },\r\n    bgColor (colorHsl) {\r\n      this._selectColor(colorHsl, this.headOptions.bg)\r\n    },\r\n    faceColor (colorHsl) {\r\n      this._selectColor(colorHsl, this.headOptions.face)\r\n    },\r\n    hairColor (colorHsl) {\r\n      this._selectColor(colorHsl, this.headOptions.hair)\r\n    }\r\n  },\r\n  created () {\r\n    Object.assign($.jCanvas.defaults, {\r\n      type: 'image',\r\n      crossOrigin: 'Anonymous',\r\n      fromCenter: false,\r\n      inDegrees: false,\r\n      x: 0,\r\n      y: 0,\r\n      height: 568\r\n    })\r\n  },\r\n  mounted () {\r\n    this.drawCanvas()\r\n  },\r\n  methods: {\r\n    rondomSelect () {\r\n      this.$emit('rondom-select')\r\n    },\r\n    headTap () {\r\n      this.drawCanvas()\r\n      this.$emit('head-tap')\r\n    },\r\n    drawCanvas () {\r\n      var that = this\r\n      var options = this.headOptions\r\n      $('.canvas').addLayer({ // 绘制背景\r\n        name: 'bgLayer',\r\n        source: options.bg,\r\n        width: 568,\r\n        height: 568\r\n      }).addLayer({ // 绘制后背头发\r\n        name: 'hairBgLayer',\r\n        source: options.hair,\r\n        x: -568,\r\n        width: 1136,\r\n        visible: this.hasBgHair\r\n      }).addLayer({ // 绘制身体\r\n        name: 'bodyLayer',\r\n        source: options.body\r\n      }).addLayer({ // 绘制衣服\r\n        name: 'clothLayer',\r\n        source: options.cloth\r\n      }).addLayer({ // 绘制脸型\r\n        name: 'faceLayer',\r\n        source: options.face\r\n      }).addLayer({ // 绘制眼睛\r\n        name: 'eyeLayer',\r\n        source: options.eye\r\n      }).addLayer({ // 绘制眉毛\r\n        name: 'browLayer',\r\n        source: options.brow\r\n      }).addLayer({ // 绘制鼻子\r\n        name: 'noseLayer',\r\n        source: options.nose\r\n      }).addLayer({ // 绘制嘴巴\r\n        name: 'mouthLayer',\r\n        source: options.mouth\r\n      }).addLayer({ // 绘制眼镜\r\n        name: 'glassesLayer',\r\n        source: options.glasses\r\n      }).addLayer({ // 绘制头发\r\n        name: 'hairLayer',\r\n        source: options.hair,\r\n        x: 0,\r\n        width: this.hasBgHair ? 1136 : 568\r\n      }).addLayer({ // 绘制帽子\r\n        name: 'capLayer',\r\n        source: options.cap\r\n      }).addLayer({ // 绘制动作\r\n        name: 'handLayer',\r\n        source: options.hand\r\n      }).addLayer({ // 绘制饰品\r\n        name: 'propLayer',\r\n        source: options.prop\r\n      }).addLayer({ // 绘制水印\r\n        name: 'markLayer',\r\n        source: 'https://avatarData.zhydaxq.com/images/other/mark.png'\r\n      }).drawLayers({\r\n        complete () {\r\n          that.canvasLoaded()\r\n        }\r\n      })\r\n    },\r\n    // 清空Canvas\r\n    removeCanvas () {\r\n      $('.canvas').removeLayers()\r\n    },\r\n    canvasLoaded () {\r\n      var imgData = $('.canvas').getCanvasImage('png')\r\n      $('.canvas-cover').attr('src', imgData)\r\n    },\r\n    // 获取Canvas数据\r\n    _getImgData (imgUrl) {\r\n      var canvas = $('.canvas')[0].getContext('2d')\r\n      var img = new Image()\r\n      img.src = imgUrl\r\n      return new Promise((resolve, reject) => {\r\n        img.onload = () => {\r\n          canvas.clearRect(0, 0, 568, 568)\r\n          canvas.drawImage(img, 0, 0, 568, 568)\r\n          var imageData = canvas.getImageData(0, 0, 568, 568)\r\n          resolve(imageData)\r\n        }\r\n      })\r\n    },\r\n    // color-picker组件选色事件\r\n    _selectColor (colorHsl, targetNode) {\r\n      var rgbArr = hslToRgb.apply(this, colorHsl)\r\n\r\n      this._getImgData(targetNode).then(imgData => {\r\n        var oldU8a = imgData.data\r\n        var newImgdata = $('.canvas')[0].getContext('2d').createImageData(568, 568)\r\n        var newU8a = newImgdata.data\r\n        for (var i = 0; i < oldU8a.length; i += 4) {\r\n          if ((oldU8a[i] === 6 && oldU8a[i + 1] === 0 && oldU8a[i + 2] === 1) || oldU8a[i + 3] < 255) {\r\n            newU8a[i] = oldU8a[i]\r\n            newU8a[i + 1] = oldU8a[i + 1]\r\n            newU8a[i + 2] = oldU8a[i + 2]\r\n            newU8a[i + 3] = oldU8a[i + 3]\r\n          } else {\r\n            newU8a[i] = rgbArr[0]\r\n            newU8a[i + 1] = rgbArr[1]\r\n            newU8a[i + 2] = rgbArr[2]\r\n            newU8a[i + 3] = 255\r\n          }\r\n        }\r\n\r\n        $('.canvas')[0].getContext('2d').putImageData(newImgdata, 0, 0)\r\n        var colorImg = $('.canvas')[0].toDataURL()\r\n        this.$emit('select-color-img', colorImg)\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n  @import \"../../assets/stylus/variable\"\r\n  @import \"../../assets/stylus/mixin\"\r\n\r\n  .app-head\r\n    position absolute\r\n    width 7.5rem\r\n    height 7.5rem\r\n    overflow hidden\r\n    .canvas, .canvas-cover\r\n      position absolute\r\n      left 50%\r\n      top 50%\r\n      width 7.5rem\r\n      height 7.5rem\r\n      transform translate(-50%, -50%)\r\n    .canvas\r\n      pointer-events none\r\n      visibility hidden\r\n    .canvas-cover\r\n      -webkit-user-select:auto\r\n    .down-tips\r\n      position absolute\r\n      top 20px\r\n      left 20px\r\n      z-index 3\r\n      width 1.8rem\r\n      height 0.4rem\r\n      font-size $font-size-medium\r\n      text-align center\r\n      line-height 0.4rem\r\n      background rgba(0,0,0,0.2)\r\n      color #fff\r\n      pointer-events none\r\n    .rondom\r\n      position absolute\r\n      right 20px\r\n      top 20px\r\n      width 0.8rem\r\n      height 0.8rem\r\n      background url('../../assets/images/random.png')\r\n      background-size 100% 100%\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Avatar/Avatar.vue",";(function(win, lib) {\r\n    var doc = win.document;\r\n    var docEl = doc.documentElement;\r\n    var metaEl = doc.querySelector('meta[name=\"viewport\"]');\r\n    var flexibleEl = doc.querySelector('meta[name=\"flexible\"]');\r\n    var dpr = 0;\r\n    var scale = 0;\r\n    var tid;\r\n    var flexible = lib.flexible || (lib.flexible = {});\r\n\r\n    if (metaEl) {\r\n        console.warn('将根据已有的meta标签来设置缩放比例');\r\n        var match = metaEl.getAttribute('content').match(/initial\\-scale=([\\d\\.]+)/);\r\n        if (match) {\r\n            scale = parseFloat(match[1]);\r\n            dpr = parseInt(1 / scale);\r\n        }\r\n    } else if (flexibleEl) {\r\n        var content = flexibleEl.getAttribute('content');\r\n        if (content) {\r\n            var initialDpr = content.match(/initial\\-dpr=([\\d\\.]+)/);\r\n            var maximumDpr = content.match(/maximum\\-dpr=([\\d\\.]+)/);\r\n            if (initialDpr) {\r\n                dpr = parseFloat(initialDpr[1]);\r\n                scale = parseFloat((1 / dpr).toFixed(2));\r\n            }\r\n            if (maximumDpr) {\r\n                dpr = parseFloat(maximumDpr[1]);\r\n                scale = parseFloat((1 / dpr).toFixed(2));\r\n            }\r\n        }\r\n    }\r\n\r\n    if (!dpr && !scale) {\r\n        var isAndroid = win.navigator.appVersion.match(/android/gi);\r\n        var isIPhone = win.navigator.appVersion.match(/iphone/gi);\r\n        var devicePixelRatio = win.devicePixelRatio;\r\n        if (isIPhone) {\r\n            // iOS下，对于2和3的屏，用2倍的方案，其余的用1倍方案\r\n            if (devicePixelRatio >= 3 && (!dpr || dpr >= 3)) {\r\n                dpr = 3;\r\n            } else if (devicePixelRatio >= 2 && (!dpr || dpr >= 2)){\r\n                dpr = 2;\r\n            } else {\r\n                dpr = 1;\r\n            }\r\n        } else {\r\n            // 其他设备下，仍旧使用1倍的方案\r\n            dpr = 1;\r\n        }\r\n        scale = 1 / dpr;\r\n    }\r\n\r\n    docEl.setAttribute('data-dpr', dpr);\r\n    if (!metaEl) {\r\n        metaEl = doc.createElement('meta');\r\n        metaEl.setAttribute('name', 'viewport');\r\n        metaEl.setAttribute('content', 'initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');\r\n        if (docEl.firstElementChild) {\r\n            docEl.firstElementChild.appendChild(metaEl);\r\n        } else {\r\n            var wrap = doc.createElement('div');\r\n            wrap.appendChild(metaEl);\r\n            doc.write(wrap.innerHTML);\r\n        }\r\n    }\r\n\r\n    function refreshRem(){\r\n        var width = docEl.getBoundingClientRect().width;\r\n        if (width / dpr > 540) {\r\n            width = 540 * dpr;\r\n        }\r\n        var rem = width / 7.5;\r\n        docEl.style.fontSize = rem + 'px';\r\n        flexible.rem = win.rem = rem;\r\n    }\r\n\r\n    win.addEventListener('resize', function() {\r\n        clearTimeout(tid);\r\n        tid = setTimeout(refreshRem, 300);\r\n    }, false);\r\n    win.addEventListener('pageshow', function(e) {\r\n        if (e.persisted) {\r\n            clearTimeout(tid);\r\n            tid = setTimeout(refreshRem, 300);\r\n        }\r\n    }, false);\r\n\r\n    if (doc.readyState === 'complete') {\r\n        doc.body.style.fontSize = 12 * dpr + 'px';\r\n    } else {\r\n        doc.addEventListener('DOMContentLoaded', function(e) {\r\n            doc.body.style.fontSize = 12 * dpr + 'px';\r\n        }, false);\r\n    }\r\n\r\n\r\n    refreshRem();\r\n\r\n    flexible.dpr = win.dpr = dpr;\r\n    flexible.refreshRem = refreshRem;\r\n    flexible.rem2px = function(d) {\r\n        var val = parseFloat(d) * this.rem;\r\n        if (typeof d === 'string' && d.match(/rem$/)) {\r\n            val += 'px';\r\n        }\r\n        return val;\r\n    }\r\n    flexible.px2rem = function(d) {\r\n        var val = parseFloat(d) / this.rem;\r\n        if (typeof d === 'string' && d.match(/px$/)) {\r\n            val += 'rem';\r\n        }\r\n        return val;\r\n    }\r\n\r\n})(window, window['lib'] || (window['lib'] = {}));\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/plugins/flexible.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"appHead\",staticClass:\"app-head\",on:{\"click\":_vm.headTap}},[_vm._m(0),_vm._v(\" \"),_c('img',{ref:\"canvasCover\",staticClass:\"canvas-cover\",attrs:{\"src\":\"\",\"alt\":\"\"}}),_vm._v(\" \"),_c('span',{staticClass:\"down-tips\"},[_vm._v(\"长按保存图片\")]),_vm._v(\" \"),_c('span',{staticClass:\"rondom\",on:{\"click\":function($event){$event.stopPropagation();return _vm.rondomSelect($event)}}})])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('canvas',{staticClass:\"canvas\",attrs:{\"id\":\"canvas\",\"width\":\"568\",\"height\":\"568\"}},[_c('span',[_vm._v(\"不支持canvas浏览器\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3cedb488\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Avatar/Avatar.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3cedb488\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Avatar.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Avatar.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Avatar.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3cedb488\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Avatar.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3cedb488\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Avatar/Avatar.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"app-tab-wrapper\">\r\n    <div class=\"tab-scroll\" ref=\"tabScroll\" v-if=\"partName\">\r\n      <ul class=\"app-tab\" :style=\"{width: 1.2 * headOptionsLen + 'rem'}\">\r\n        <li v-for=\"(val, key) in partName\" @click.stop=\"selectTab(key, $event)\" :key=\"key\" :class=\"{active: actPart === key}\">{{val}}</li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport IScroll from 'iscroll'\r\n\r\nexport default {\r\n  props: {\r\n    actPart: {\r\n      type: String,\r\n      default () {\r\n        return 'bg'\r\n      }\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      partName: { // 部件中文名\r\n        bg: '背景',\r\n        bgColor: '背景颜色',\r\n        body: '身体',\r\n        cloth: '衣服',\r\n        face: '脸型',\r\n        faceColor: '脸形变色',\r\n        eye: '眼睛',\r\n        brow: '眉毛',\r\n        nose: '鼻子',\r\n        mouth: '嘴巴',\r\n        glasses: '眼镜',\r\n        hair: '头发',\r\n        hairColor: '头发变色',\r\n        hand: '动作',\r\n        cap: '帽子',\r\n        prop: '饰品',\r\n        suit: '套装'\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    headOptionsLen () {\r\n      var len = 0\r\n      /* eslint-disable no-unused-vars */\r\n      for (var item in this.partName) {\r\n        len++\r\n      }\r\n      return len\r\n    }\r\n  },\r\n  mounted () {\r\n    setTimeout(() => {\r\n      this._initScroll()\r\n    }, 2000)\r\n  },\r\n  methods: {\r\n    selectTab (key, event) {\r\n      this.tabScroll.scrollToElement(event.target, 400, true)\r\n\r\n      this.$emit('select-tab', key, event)\r\n    },\r\n    // 注册滚动\r\n    _initScroll () {\r\n      // 注册tab切滚动\r\n      this.tabScroll = new IScroll(this.$refs.tabScroll, {\r\n        click: true,\r\n        scrollX: true,\r\n        scrollY: false,\r\n        disablePointer: true,\r\n        disableTouch: false,\r\n        disableMouse: false\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n  @import \"../../assets/stylus/variable\"\r\n  @import \"../../assets/stylus/mixin\"\r\n\r\n  .app-tab-wrapper\r\n    position absolute\r\n    left 20px\r\n    top 7.5rem\r\n    z-index 2\r\n    width -webkit-calc(100% - 40px)\r\n    width calc(100% - 40px)\r\n    height 1rem\r\n    margin-top -0.5rem\r\n    background #fff\r\n    -webkit-box-shadow 0rem 0.1rem 0.2rem rgba(0,0,0,0.1)\r\n    box-shadow 0rem 0.1rem 0.2rem rgba(0,0,0,0.1)\r\n    .tab-scroll\r\n      position absolute\r\n      width 100%\r\n      height 100%\r\n      overflow hidden\r\n      -webkit-mask -webkit-linear-gradient(left, rgba(255,255,255,0) 10px,  rgba(255,255,255,1) 30px,  rgba(255,255,255,1) -webkit-calc(100% - 30px), rgba(255,255,255,0) -webkit-calc(100% - 10px))\r\n      touch-action none\r\n      .app-tab\r\n        display flex\r\n        padding 0 10px\r\n        li\r\n          position relative\r\n          flex 1\r\n          height 1rem\r\n          cursor pointer\r\n          text-align center\r\n          line-height 1rem\r\n          font-size $font-size-medium-x\r\n          color #999\r\n          &.active\r\n            color #78bdff\r\n            &:after\r\n              position absolute\r\n              left 0.3rem\r\n              bottom 0.2rem\r\n              width 0.6rem\r\n              border-bottom 2px #78bdff solid\r\n              content ''\r\n  #app.ios .app-tab-wrapper\r\n    background rgba(255,255,255,0.8)\r\n    -webkit-backdrop-filter blur(10px)\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Tab/Tab.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-tab-wrapper\"},[(_vm.partName)?_c('div',{ref:\"tabScroll\",staticClass:\"tab-scroll\"},[_c('ul',{staticClass:\"app-tab\",style:({width: 1.2 * _vm.headOptionsLen + 'rem'})},_vm._l((_vm.partName),function(val,key){return _c('li',{key:key,class:{active: _vm.actPart === key},on:{\"click\":function($event){$event.stopPropagation();_vm.selectTab(key, $event)}}},[_vm._v(_vm._s(val))])}))]):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f7579ee6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Tab/Tab.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f7579ee6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Tab.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Tab.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Tab.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f7579ee6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Tab.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-f7579ee6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Tab/Tab.vue\n// module id = null\n// module chunks = ","<template>\r\n  <ul class=\"color-picker\" ref=\"colorPicker\">\r\n    <li class=\"color-bar color-hue\" style=\"background: -webkit-linear-gradient(left, hsl(0,100%,50%), hsl(60,100%,50%), hsl(120,100%,50%), hsl(180,100%,50%), hsl(240,100%,50%), hsl(300,100%,50%), hsl(360,100%,50%));\"><span>色相</span><i @touchstart.prevent=\"pickerTouchStart\" @touchmove.prevent=\"pickerTouchMove\" @touchend=\"pickerTouchEnd\" :style=\"{transform: 'translate('+ touch.wrapWidth * colorH/360 +'px,0)'}\"></i></li>\r\n    <li class=\"color-bar color-saturation\" style=\"background: -webkit-linear-gradient(left, hsl(0,0%,50%), hsl(0,100%,50%));\" :style=\"{background: '-webkit-linear-gradient(left, hsl(' + colorH + ',0%,50%), hsl(' + colorH + ',100%,50%))'}\"><span>饱和度</span><i @touchstart.prevent=\"pickerTouchStart\" @touchmove.prevent=\"pickerTouchMove\" @touchend=\"pickerTouchEnd\" :style=\"{transform: 'translate('+ touch.wrapWidth * colorS.replace('%', '')/100 +'px,0)'}\"></i></li>\r\n    <li class=\"color-bar color-lightness\" style=\"background: -webkit-linear-gradient(left, hsl(0,100%,0%), hsl(0,100%,100%))\"><span>明度</span><i @touchstart.prevent=\"pickerTouchStart\" @touchmove.prevent=\"pickerTouchMove\" @touchend=\"pickerTouchEnd\" :style=\"{transform: 'translate('+ touch.wrapWidth * colorL.replace('%', '')/100 +'px,0)'}\"></i></li>\r\n  </ul>\r\n</template>\r\n\r\n<script>\r\nimport {hslToRgb} from '@/assets/js/plugins/hsl2rgb'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      touch: {\r\n        startX: 0,\r\n        deltaX: 0,\r\n        offsetWidth: 0,\r\n        wrapWidth: 0\r\n      },\r\n      colorH: 180,\r\n      colorS: '100%',\r\n      colorL: '50%'\r\n    }\r\n  },\r\n  props: {\r\n    colorHsl: {\r\n      type: Array,\r\n      default () {\r\n        return [180, '100%', '50%']\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    colorHsl (newColorHsl) {\r\n      this.colorH = newColorHsl[0]\r\n      this.colorS = newColorHsl[1]\r\n      this.colorL = newColorHsl[2]\r\n    }\r\n  },\r\n  created () {\r\n    this.colorH = this.colorHsl[0]\r\n    this.colorS = this.colorHsl[1]\r\n    this.colorL = this.colorHsl[2]\r\n  },\r\n  mounted () {\r\n    setTimeout(() => {\r\n      this.touch.wrapWidth = this.$refs.colorPicker.clientWidth\r\n    }, 50)\r\n  },\r\n  methods: {\r\n    pickerTouchStart (e) {\r\n      var el = e.target\r\n      this.touch.offsetWidth = el.style.transform !== 'none' ? el.style.transform.replace(/^translate\\((\\d*.?\\d*)px,\\s*\\d*.?\\w*\\)$/g, '$1') : 0\r\n      this.touch.startX = e.touches[0].clientX\r\n    },\r\n    pickerTouchMove (e) {\r\n      var el = e.target\r\n      this.touch.deltaX = e.touches[0].clientX - this.touch.startX\r\n\r\n      if (el.offsetParent.className.indexOf('color-hue') !== -1) {\r\n        this.colorH = (Math.min(this.touch.wrapWidth, Math.max(0, (parseInt(this.touch.offsetWidth) + this.touch.deltaX))) / this.touch.wrapWidth) * 360\r\n      }\r\n\r\n      if (el.offsetParent.className.indexOf('color-saturation') !== -1) {\r\n        this.colorS = (Math.min(this.touch.wrapWidth, Math.max(0, (parseInt(this.touch.offsetWidth) + this.touch.deltaX))) / this.touch.wrapWidth) * 100 + '%'\r\n      }\r\n\r\n      if (el.offsetParent.className.indexOf('color-lightness') !== -1) {\r\n        this.colorL = (Math.min(this.touch.wrapWidth, Math.max(0, (parseInt(this.touch.offsetWidth) + this.touch.deltaX))) / this.touch.wrapWidth) * 100 + '%'\r\n      }\r\n    },\r\n    pickerTouchEnd (e) {\r\n      var rgb = hslToRgb(this.colorH, this.colorS, this.colorL)\r\n      this.$emit('select-color', {\r\n        colorRgb: rgb,\r\n        colorHsl: [this.colorH, this.colorS, this.colorL]\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.color-picker {\r\n  position: relative;\r\n  width: -webkit-calc(100% - 40px);\r\n  width: calc(100% - 40px);\r\n  height: 100%;\r\n  margin-left: 20px;\r\n}\r\n.color-picker .color-bar {\r\n  position: absolute;\r\n  top: -webkit-calc(25% - 0.06rem);\r\n  top: calc(25% - 0.06rem);\r\n  width: 100%;\r\n  height: 0.12rem;\r\n  border: none;\r\n  border-radius: 0.06rem;\r\n  overflow: visible;\r\n}\r\n.color-picker .color-bar:nth-child(2) {\r\n  top: -webkit-calc(50% - 0.06rem);\r\n  top: calc(50% - 0.06rem);\r\n}\r\n.color-picker .color-bar:nth-child(3) {\r\n  top: -webkit-calc(75% - 0.06rem);\r\n  top: calc(75% - 0.06rem);\r\n}\r\n.color-bar span {\r\n  display: inline-block;\r\n  height: 0.22rem;\r\n  line-height: 0.22rem;\r\n  color: #aaa;\r\n  font-size: 0.22rem;\r\n  -webkit-transform: translate(0, -0.4rem);\r\n      -ms-transform: translate(0, -0.4rem);\r\n          transform: translate(0, -0.4rem);\r\n}\r\n.color-bar i {\r\n  position: absolute;\r\n  left: -0.45rem;\r\n  top: -0.39rem;\r\n  width: 0.3rem;\r\n  height: 0.3rem;\r\n  padding: 0.3rem;\r\n  -webkit-box-sizing: content-box;\r\n          box-sizing: content-box;\r\n  font-size: 0;\r\n}\r\n.color-bar i:after {\r\n  display: inline-block;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: #50b3e7;\r\n  border-radius: 0.15rem;\r\n  border: 0.02rem #fff solid;\r\n  -webkit-box-sizing: border-box;\r\n          box-sizing: border-box;\r\n  font-size: 0;\r\n  content: '';\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/base/ColorPicker/ColorPicker.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{ref:\"colorPicker\",staticClass:\"color-picker\"},[_c('li',{staticClass:\"color-bar color-hue\",staticStyle:{\"background\":\"-webkit-linear-gradient(left, hsl(0,100%,50%), hsl(60,100%,50%), hsl(120,100%,50%), hsl(180,100%,50%), hsl(240,100%,50%), hsl(300,100%,50%), hsl(360,100%,50%))\"}},[_c('span',[_vm._v(\"色相\")]),_c('i',{style:({transform: 'translate('+ _vm.touch.wrapWidth * _vm.colorH/360 +'px,0)'}),on:{\"touchstart\":function($event){$event.preventDefault();return _vm.pickerTouchStart($event)},\"touchmove\":function($event){$event.preventDefault();return _vm.pickerTouchMove($event)},\"touchend\":_vm.pickerTouchEnd}})]),_vm._v(\" \"),_c('li',{staticClass:\"color-bar color-saturation\",staticStyle:{\"background\":\"-webkit-linear-gradient(left, hsl(0,0%,50%), hsl(0,100%,50%))\"},style:({background: '-webkit-linear-gradient(left, hsl(' + _vm.colorH + ',0%,50%), hsl(' + _vm.colorH + ',100%,50%))'})},[_c('span',[_vm._v(\"饱和度\")]),_c('i',{style:({transform: 'translate('+ _vm.touch.wrapWidth * _vm.colorS.replace('%', '')/100 +'px,0)'}),on:{\"touchstart\":function($event){$event.preventDefault();return _vm.pickerTouchStart($event)},\"touchmove\":function($event){$event.preventDefault();return _vm.pickerTouchMove($event)},\"touchend\":_vm.pickerTouchEnd}})]),_vm._v(\" \"),_c('li',{staticClass:\"color-bar color-lightness\",staticStyle:{\"background\":\"-webkit-linear-gradient(left, hsl(0,100%,0%), hsl(0,100%,100%))\"}},[_c('span',[_vm._v(\"明度\")]),_c('i',{style:({transform: 'translate('+ _vm.touch.wrapWidth * _vm.colorL.replace('%', '')/100 +'px,0)'}),on:{\"touchstart\":function($event){$event.preventDefault();return _vm.pickerTouchStart($event)},\"touchmove\":function($event){$event.preventDefault();return _vm.pickerTouchMove($event)},\"touchend\":_vm.pickerTouchEnd}})])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0efa6d9e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/base/ColorPicker/ColorPicker.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0efa6d9e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ColorPicker.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ColorPicker.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ColorPicker.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0efa6d9e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ColorPicker.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0efa6d9e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/base/ColorPicker/ColorPicker.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"app-list-wrapper\" ref=\"appListWrapper\">\r\n    <div class=\"list-scroll\" ref=\"listScroll\">\r\n      <!-- 部件 -->\r\n      <ul v-if=\"actPart.indexOf('Color') === -1 && actPart !=='suit'\" class=\"app-list\" :class=\"actPart + '-list'\" :style=\"{height:\r\n        2.5 * listLen + 'rem'}\">\r\n        <li v-for=\"(item, index) in partList\" class=\"app-item\" :class=\"{active: index === actIndex}\" :key=\"index\" @click=\"selectItem(item, index)\">\r\n          <img v-if=\"index === 0\" src=\"../../assets/images/restore.png\" @click.stop=\"restoreItem\" alt=\"\" lazy=\"loaded\">\r\n          <img v-else v-lazy=\"item\" :key=\"item\" alt=\"\">\r\n        </li>\r\n      </ul>\r\n      <!-- 套装 -->\r\n      <ul v-else-if=\"actPart === 'suit'\" class=\"app-list\" :class=\"actPart + '-list'\" :style=\"{height: 2.5 * listLen + 'rem'}\">\r\n        <li @click=\"restoreSuit\" class=\"app-item\">\r\n          <img src=\"../../assets/images/restore.png\" alt=\"\" lazy=\"loaded\">\r\n        </li>\r\n        <li v-for=\"(val, key, index) in partList\" :key=\"key\" class=\"app-item\" :class=\"{active: index === actIndex}\" @click=\"selectSuit(val)\">\r\n          <img v-lazy=\"val.thumb\" :key=\"val.thumb\" alt=\"\">\r\n        </li>\r\n      </ul>\r\n      <!-- 颜色 -->\r\n      <ul v-else class=\"app-list color-list\">\r\n        <ColorPicker @select-color=\"selectColor\" :color-hsl=\"partList\"></ColorPicker>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport IScroll from 'iscroll/build/iscroll-probe'\r\nimport ColorPicker from '@/base/ColorPicker/ColorPicker'\r\n\r\nexport default {\r\n  props: {\r\n    partList: {\r\n      default () {\r\n        return []\r\n      }\r\n    },\r\n    actPart: {\r\n      type: String,\r\n      default () {\r\n        return 'bg'\r\n      }\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      actIndex: -1\r\n    }\r\n  },\r\n  computed: {\r\n    listLen () {\r\n      var len = 0\r\n\r\n      if (this.actPart.indexOf('Color') !== -1) {\r\n        return len\r\n      }\r\n      if (this.actPart === 'suit') {\r\n        /* eslint-disable no-unused-vars */\r\n        for (var item in this.partList) {\r\n          len++\r\n        }\r\n        len = Math.ceil((len + 1) / 3)\r\n        return len\r\n      }\r\n      len = Math.ceil(this.partList.length / 3)\r\n      return len\r\n    }\r\n  },\r\n  watch: {\r\n    partList () {\r\n      setTimeout(() => {\r\n        this.refresh()\r\n        if (!document.querySelector('.app-item.active')) {\r\n          this.listScroll && this.listScroll.scrollTo(0, 0)\r\n        } else {\r\n          this.listScroll && this.listScroll.scrollToElement(document.querySelector('.app-item.active'), 0, true, true)\r\n        }\r\n      }, 100)\r\n    },\r\n    actIndex (index) {\r\n      this.actIndexes[this.actPart] = index\r\n    },\r\n    actPart (tabItem) {\r\n      this.actIndex = this.actIndexes[tabItem]\r\n    }\r\n  },\r\n  created () {\r\n    // 初始化索引集合\r\n    this.actIndexes = {}\r\n  },\r\n  mounted () {\r\n    setTimeout(() => {\r\n      this._initScroll()\r\n    }, 2000)\r\n  },\r\n  methods: {\r\n    selectItem (item, index) {\r\n      this.actIndex = index\r\n      this.$emit('select-item', this.actPart, item)\r\n    },\r\n    _initScroll () {\r\n      // 注册列表滚动\r\n      this.listScroll = new IScroll(this.$refs.listScroll, {\r\n        click: true,\r\n        scrollX: false,\r\n        scrollY: true,\r\n        disablePointer: true,\r\n        disableTouch: false,\r\n        disableMouse: false,\r\n        mouseWheel: true,\r\n        probeType: 3\r\n      })\r\n      // 监听列表滚动\r\n      var that = this\r\n      this.listScroll.on('scroll', function () {\r\n        that.$emit('list-scroll', this)\r\n      })\r\n      this.listScroll.on('scrollEnd', function () {\r\n        that.$emit('list-scroll-end', this)\r\n      })\r\n    },\r\n    selectColor (options) {\r\n      this.$emit('select-color', options.colorHsl)\r\n    },\r\n    // 选择套装\r\n    selectSuit (options) {\r\n      this.$emit('select-suit', options)\r\n    },\r\n    restoreItem () {\r\n      this.$emit('restore-item')\r\n    },\r\n    restoreSuit () {\r\n      this.$emit('restore-suit')\r\n    },\r\n    refresh () {\r\n      this.listScroll && this.listScroll.refresh()\r\n    }\r\n  },\r\n  components: {\r\n    ColorPicker\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n  @import \"../../assets/stylus/variable\"\r\n  @import \"../../assets/stylus/mixin\"\r\n\r\n  .app-list-wrapper\r\n    position absolute\r\n    bottom 0\r\n    width 100%\r\n    height -webkit-calc(100% - 8.5rem)\r\n    height calc(100% - 8.5rem)\r\n    background $color-background-l\r\n    overflow hidden\r\n    .list-scroll\r\n      position absolute\r\n      width 100%\r\n      height 100%\r\n      overflow hidden\r\n      touch-action none\r\n    .app-list\r\n      width 100%\r\n      .app-item\r\n        position relative\r\n        float left\r\n        width 2.5rem\r\n        height 2.5rem\r\n        border 1px #f0f4f5 solid\r\n        overflow hidden\r\n        cursor pointer\r\n        &:nth-child(-n+3)\r\n          border-top none\r\n        &:nth-child(3n+1)\r\n          border-left:none\r\n        &:nth-child(3n+2)\r\n          border-left:none\r\n          border-right:none\r\n        &:nth-child(3n+3)\r\n          border-right:none\r\n        &:nth-child(6n+4), &:nth-child(6n+5),&:nth-child(6n+6)\r\n          border-bottom:none\r\n          border-top:none\r\n        &:nth-child(3n+2):nth-last-child(1)\r\n          border-right 1px #f0f4f5 solid\r\n        &:nth-child(6n+6):nth-last-child(3)\r\n          border-bottom 1px #f0f4f5 solid\r\n        &:nth-child(6n+6):nth-last-child(2)\r\n          border-bottom 1px #f0f4f5 solid\r\n        &:nth-child(6n+5):nth-last-child(3)\r\n          border-bottom 1px #f0f4f5 solid\r\n        &.active:after\r\n          position absolute\r\n          left 0\r\n          top 0\r\n          right 0\r\n          bottom 0\r\n          border 2px #7cc2fd solid\r\n          content ''\r\n        img\r\n          position absolute\r\n          left 0\r\n          top 0\r\n          width auto\r\n          height 100%\r\n          transform-origin 50% 100%\r\n\r\n    .body-list\r\n      .app-item:nth-child(n+2) img\r\n        transform scale(1.8,1.8)\r\n        background-size 55% 55%\r\n    .cloth-list\r\n      .app-item:nth-child(n+2) img\r\n        transform scale(1.8,1.8)\r\n        background-size 55% 55%\r\n    .nose-list\r\n      .app-item:nth-child(n+2) img\r\n        transform-origin 50% 70%\r\n        transform scale(3,3)\r\n        background-position center 68%\r\n        background-size 30% 30%\r\n    .mouth-list\r\n      .app-item:nth-child(n+2) img\r\n        transform-origin 50% 85%\r\n        transform scale(3,3)\r\n        background-position center 68%\r\n        background-size 30% 30%\r\n    .color-list\r\n      width 100%\r\n      height 100%\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/List/List.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"appListWrapper\",staticClass:\"app-list-wrapper\"},[_c('div',{ref:\"listScroll\",staticClass:\"list-scroll\"},[(_vm.actPart.indexOf('Color') === -1 && _vm.actPart !=='suit')?_c('ul',{staticClass:\"app-list\",class:_vm.actPart + '-list',style:({height:\n      2.5 * _vm.listLen + 'rem'})},_vm._l((_vm.partList),function(item,index){return _c('li',{key:index,staticClass:\"app-item\",class:{active: index === _vm.actIndex},on:{\"click\":function($event){_vm.selectItem(item, index)}}},[(index === 0)?_c('img',{attrs:{\"src\":require(\"../../assets/images/restore.png\"),\"alt\":\"\",\"lazy\":\"loaded\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.restoreItem($event)}}}):_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(item),expression:\"item\"}],key:item,attrs:{\"alt\":\"\"}})])})):(_vm.actPart === 'suit')?_c('ul',{staticClass:\"app-list\",class:_vm.actPart + '-list',style:({height: 2.5 * _vm.listLen + 'rem'})},[_c('li',{staticClass:\"app-item\",on:{\"click\":_vm.restoreSuit}},[_c('img',{attrs:{\"src\":require(\"../../assets/images/restore.png\"),\"alt\":\"\",\"lazy\":\"loaded\"}})]),_vm._v(\" \"),_vm._l((_vm.partList),function(val,key,index){return _c('li',{key:key,staticClass:\"app-item\",class:{active: index === _vm.actIndex},on:{\"click\":function($event){_vm.selectSuit(val)}}},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(val.thumb),expression:\"val.thumb\"}],key:val.thumb,attrs:{\"alt\":\"\"}})])})],2):_c('ul',{staticClass:\"app-list color-list\"},[_c('ColorPicker',{attrs:{\"color-hsl\":_vm.partList},on:{\"select-color\":_vm.selectColor}})],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-22400efc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/List/List.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-22400efc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./List.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./List.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./List.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-22400efc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./List.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-22400efc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/List/List.vue\n// module id = null\n// module chunks = ","//图片预加载插件\r\n/**\r\n * @param imgList 要加载的图片地址列表，['aa/asd.png','aa/xxx.png']\r\n * @param callback 每成功加载一个图片之后的回调，并传入“已加载的图片总数/要加载的图片总数”表示进度\r\n * @param timeout 每个图片加载的超时时间，默认为5s\r\n */\r\nexport function imgPreLoad (imgList, callback, timeout) {\r\n  timeout = timeout || 5000;\r\n  imgList = isArray(imgList) && imgList || [];\r\n  callback = typeof (callback) === 'function' && callback;\r\n\r\n  var total = imgList.length,\r\n    loaded = 0,\r\n    imgages = [],\r\n    _on = function () {\r\n      loaded < total && (++loaded, callback && callback(loaded / total));\r\n    };\r\n\r\n  if (!total) {\r\n    return callback && callback(1);\r\n  }\r\n\r\n  for (var i = 0; i < total; i++) {\r\n    imgages[i] = new Image();\r\n    imgages[i].onload = imgages[i].onerror = _on;\r\n    imgages[i].src = imgList[i];\r\n  }\r\n\r\n  /**\r\n   * 如果timeout * total时间范围内，仍有图片未加载出来（判断条件是loaded < total），通知外部环境所有图片均已加载\r\n   * 目的是避免用户等待时间过长\r\n   */\r\n  setTimeout(function () {\r\n    loaded < total && (loaded = total, callback && callback(loaded / total));\r\n  }, timeout * total);\r\n};\r\n\r\n\r\nfunction isArray(obj) {\r\n  return Object.prototype.toString.call(obj) === '[object Array]';\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/plugins/imgPreLoad.js","<template>\r\n  <transition name=\"fade\" :duration=\"500\">\r\n    <div class=\"loading\" v-if=\"isShow\">\r\n      <div class=\"loading-icon\">\r\n        <i class=\"dot\"></i>\r\n        <i class=\"dot\"></i>\r\n        <i class=\"dot\"></i>\r\n      </div>\r\n      <span class=\"loading-text\">加载中... {{precent}}%</span>\r\n    </div>\r\n  </transition>\r\n</template>\r\n\r\n<script>\r\nimport {imgPreLoad} from '@/assets/js/plugins/imgPreLoad'\r\n\r\nexport default {\r\n  props: {\r\n    preLoadArr: {\r\n      type: Array,\r\n      default () {\r\n        return []\r\n      }\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      isShow: true,\r\n      precent: 0\r\n    }\r\n  },\r\n  created () {\r\n    imgPreLoad(this.preLoadArr, (percentage) => {\r\n      var percentT = percentage * 100\r\n      this.precent = parseInt(percentT)\r\n      if (percentage === 1) {\r\n        // 移除加载动画\r\n        setTimeout(() => {\r\n          this.isShow = false\r\n        }, 2000)\r\n      }\r\n    }, 3000)\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.loading {\r\n  position: fixed;\r\n  z-index: 9999;\r\n  width: 100%;\r\n  height: 100%;\r\n  text-align: center;\r\n  background: url(../../assets/images/loading.jpg) no-repeat #77bdff;\r\n  background-size: auto 100%;\r\n  background-position: center;\r\n  font-size: 0;\r\n  opacity: 1;\r\n}\r\n.loading.removing {\r\n  opacity: 0;\r\n  -o-transition: opacity .5s ease-in;\r\n  transition: opacity .5s ease-in;\r\n  -webkit-transition: opacity .5s ease-in;\r\n}\r\n.loading-icon {\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  width: 40px;\r\n  height: 40px;\r\n  margin: 1.5rem 0 0 -20px;\r\n  text-align: center;\r\n  background-size: 100% 100%;\r\n  overflow: hidden;\r\n}\r\n.loading-icon:after {\r\n  display: inline-block;\r\n  width: 20px;\r\n  height: 20px;\r\n  margin-top: 8px;\r\n  background: #fff;\r\n  border-radius: 2px;\r\n  -webkit-animation: loading-icon-after 0.5s ease 0s infinite;\r\n          animation: loading-icon-after 0.5s ease 0s infinite;\r\n  content: \"\";\r\n}\r\n@-webkit-keyframes loading-icon-after {\r\n  0% {\r\n    -webkit-transform: rotate(0deg);\r\n            transform: rotate(0deg);\r\n    -webkit-transform-origin: 100% 100%;\r\n            transform-origin: 100% 100%;\r\n  }\r\n  100% {\r\n    -webkit-transform: translate3d(-20px,0,0) rotate(90deg);\r\n            transform: translate3d(-20px,0,0) rotate(90deg);\r\n    -webkit-transform-origin: 100% 100%;\r\n            transform-origin: 100% 100%;\r\n  }\r\n}\r\n@keyframes loading-icon-after {\r\n  0% {\r\n    -webkit-transform: rotate(0deg);\r\n            transform: rotate(0deg);\r\n    -webkit-transform-origin: 100% 100%;\r\n            transform-origin: 100% 100%;\r\n  }\r\n  100% {\r\n    -webkit-transform: translate3d(-20px,0,0) rotate(90deg);\r\n            transform: translate3d(-20px,0,0) rotate(90deg);\r\n    -webkit-transform-origin: 100% 100%;\r\n            transform-origin: 100% 100%;\r\n  }\r\n}\r\n.loading-icon .dot {\r\n  position: absolute;\r\n  left: 8px;\r\n  bottom: 5px;\r\n  width: 4px;\r\n  height: 4px;\r\n  background: #fff;\r\n  border-radius: 1px;\r\n  content: \"\";\r\n  -webkit-animation: loading-icon-dot 0.5s ease 0s infinite;\r\n          animation: loading-icon-dot 0.5s ease 0s infinite;\r\n}\r\n.loading-icon .dot:nth-child(2) {\r\n  left: 28px;\r\n}\r\n.loading-icon .dot:nth-child(3) {\r\n  left: 48px;\r\n}\r\n@-webkit-keyframes loading-icon-dot {\r\n  0% {\r\n    -webkit-transform: translate3d(0,0,0);\r\n            transform: translate3d(0,0,0);\r\n  }\r\n  100% {\r\n    -webkit-transform: translate3d(-20px,0,0);\r\n            transform: translate3d(-20px,0,0);\r\n  }\r\n}\r\n@keyframes loading-icon-dot {\r\n  0% {\r\n    -webkit-transform: translate3d(0,0,0);\r\n            transform: translate3d(0,0,0);\r\n  }\r\n  100% {\r\n    -webkit-transform: translate3d(-20px,0,0);\r\n            transform: translate3d(-20px,0,0);\r\n  }\r\n}\r\n.loading-text {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 50%;\r\n  width: 100%;\r\n  margin-top: -webkit-calc(1.5rem + 40px);\r\n  margin-top: calc(1.5rem + 40px);\r\n  font-size: 12px;\r\n  line-height: 3em;\r\n  color: #fff;\r\n}\r\n.fade-enter-active, .fade-leave-active {\r\n  transition: opacity .5s;\r\n}\r\n.fade-enter, .fade-leave-to {\r\n  opacity: 0\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/base/Loading/Loading.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"fade\",\"duration\":500}},[(_vm.isShow)?_c('div',{staticClass:\"loading\"},[_c('div',{staticClass:\"loading-icon\"},[_c('i',{staticClass:\"dot\"}),_vm._v(\" \"),_c('i',{staticClass:\"dot\"}),_vm._v(\" \"),_c('i',{staticClass:\"dot\"})]),_vm._v(\" \"),_c('span',{staticClass:\"loading-text\"},[_vm._v(\"加载中... \"+_vm._s(_vm.precent)+\"%\")])]):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-79f21035\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/base/Loading/Loading.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-79f21035\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Loading.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Loading.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Loading.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-79f21035\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Loading.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-79f21035\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/base/Loading/Loading.vue\n// module id = null\n// module chunks = ","<template>\r\n  <transition name=\"fadedown\" :duration=\"500\">\r\n    <div class=\"start-page\" v-if=\"isShow\" @click=\"startGO\">\r\n      <span class=\"start\"></span>\r\n    </div>\r\n  </transition>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    isShow: {\r\n      type: Boolean,\r\n      default () {\r\n        return true\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    startGO () {\r\n      this.$emit('start-go')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.start-page\r\n  position fixed\r\n  z-index 8888\r\n  width 100%\r\n  height 100%\r\n  text-align center\r\n  background url(../../assets/images/start.png) no-repeat #fff\r\n  background-size contain\r\n  background-position center center\r\n  font-size 0\r\n  .start\r\n    position absolute\r\n    left 0\r\n    top 0\r\n    right 0\r\n    bottom 0\r\n  &.fadedown-enter-active, &.fadedown-leave-active\r\n    transition all .5s\r\n  &.fadedown-enter, &.fadedown-leave-to\r\n    opacity 0\r\n    transform translate3d(0, 101%, 0)\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/base/StartPage/StartPage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"fadedown\",\"duration\":500}},[(_vm.isShow)?_c('div',{staticClass:\"start-page\",on:{\"click\":_vm.startGO}},[_c('span',{staticClass:\"start\"})]):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0efa3d9e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/base/StartPage/StartPage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0efa3d9e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./StartPage.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./StartPage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./StartPage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0efa3d9e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./StartPage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0efa3d9e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/base/StartPage/StartPage.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\" :class=\"device\">\n    <Loading :preLoadArr=\"preLoadArr\"></Loading>\n    <StartPage :isShow=\"startPageShow\" @start-go=\"StartGO\"></StartPage>\n    <Avatar\n      :headOptions=\"headOptions\"\n      @select-color-img=\"selectColorImg\"\n      @head-tap=\"headTap\"\n      @rondom-select=\"randomSelect\"\n      ref=\"appHead\"\n    ></Avatar>\n    <Tab\n      :act-part=\"actPart\"\n      @select-tab=\"selectTab\"\n      ref=\"appTabWrapper\"\n    ></Tab>\n    <List\n      :partList=\"partList\"\n      :act-part=\"actPart\"\n      @select-item=\"selectItem\"\n      @select-suit=\"selectSuit\"\n      @select-color=\"selectColor\"\n      @restore-item=\"restoreItem\"\n      @restore-suit=\"restoreSuit\"\n      @list-scroll=\"listScroll\"\n      @list-scroll-end=\"listScrollEnd\"\n      ref=\"appListWrapper\"\n    ></List>\n  </div>\n</template>\n\n<script>\nimport $ from 'jquery'\nimport Avatar from '@/components/Avatar/Avatar'\nimport Tab from '@/components/Tab/Tab'\nimport List from '@/components/List/List'\nimport Loading from '@/base/Loading/Loading'\nimport StartPage from '@/base/StartPage/StartPage'\n\nconst ERR_OK = 0\nconst UA = window.navigator.userAgent\n\nexport default {\n  name: 'App',\n  data () {\n    return {\n      // headOrigin: {\n      //   bg: 'https://avatarData.zhydaxq.com/images/bg/bg_000.jpg',\n      //   bgColor: [180, '100%', '50%'],\n      //   body: 'https://avatarData.zhydaxq.com/images/body/body_000.png',\n      //   cloth: 'https://avatarData.zhydaxq.com/images/cloth/cloth_002.png',\n      //   face: 'https://avatarData.zhydaxq.com/images/face/face_000.png',\n      //   faceColor: [180, '100%', '50%'],\n      //   eye: 'https://avatarData.zhydaxq.com/images/eye/eye_000.png',\n      //   brow: 'https://avatarData.zhydaxq.com/images/brow/brow_000.png',\n      //   nose: 'https://avatarData.zhydaxq.com/images/nose/nose_000.png',\n      //   mouth: 'https://avatarData.zhydaxq.com/images/mouth/mouth_000.png',\n      //   glasses: 'https://avatarData.zhydaxq.com/images/glasses/glasses_000.png',\n      //   hair: 'https://avatarData.zhydaxq.com/images/hair/hair_008.png',\n      //   hairColor: [180, '100%', '50%'],\n      //   cap: 'https://avatarData.zhydaxq.com/images/cap/cap_000.png',\n      //   hand: 'https://avatarData.zhydaxq.com/images/hand/hand_000.png',\n      //   prop: 'https://avatarData.zhydaxq.com/images/prop/prop_000.png',\n      //   suit: {}\n      // },\n      headOrigin: {\n        bg: 'https://avatarData.zhydaxq.com/images/bg/bg_019.jpg',\n        bgColor: [180, '100%', '50%'],\n        body: 'https://avatarData.zhydaxq.com/images/body/body_000.png',\n        cloth: 'https://avatarData.zhydaxq.com/images/cloth/cloth_022.png',\n        face: 'https://avatarData.zhydaxq.com/images/face/face_005.png',\n        faceColor: [180, '100%', '50%'],\n        eye: 'https://avatarData.zhydaxq.com/images/eye/eye_016.png',\n        brow: 'https://avatarData.zhydaxq.com/images/brow/brow_002.png',\n        nose: 'https://avatarData.zhydaxq.com/images/nose/nose_000.png',\n        mouth: 'https://avatarData.zhydaxq.com/images/mouth/mouth_013.png',\n        glasses: 'https://avatarData.zhydaxq.com/images/glasses/glasses_000.png',\n        hair: 'https://avatarData.zhydaxq.com/images/hair/hair_023.png',\n        hairColor: [180, '100%', '50%'],\n        cap: 'https://avatarData.zhydaxq.com/images/cap/cap_000.png',\n        hand: 'https://avatarData.zhydaxq.com/images/hand/hand_006.png',\n        prop: 'https://avatarData.zhydaxq.com/images/prop/prop_022.png',\n        suit: {}\n      },\n      headOptions: {},\n      partList: [],\n      actPart: 'bg',\n      actIndex: -1,\n      preLoadArr: [\n        'https://avatarData.zhydaxq.com/images/other/loading.jpg',\n        'https://avatarData.zhydaxq.com/images/other/start.png',\n\n        // 默认展示\n        'https://avatarData.zhydaxq.com/images/bg/bg_000.jpg',\n        'https://avatarData.zhydaxq.com/images/body/body_000.png',\n        'https://avatarData.zhydaxq.com/images/cloth/cloth_002.png',\n        'https://avatarData.zhydaxq.com/images/face/face_000.png',\n        'https://avatarData.zhydaxq.com/images/eye/eye_000.png',\n        'https://avatarData.zhydaxq.com/images/brow/brow_000.png',\n        'https://avatarData.zhydaxq.com/images/nose/nose_000.png',\n        'https://avatarData.zhydaxq.com/images/mouth/mouth_000.png',\n        'https://avatarData.zhydaxq.com/images/glasses/glasses_000.png',\n        'https://avatarData.zhydaxq.com/images/hair/hair_008.png',\n        'https://avatarData.zhydaxq.com/images/cap/cap_000.png',\n        'https://avatarData.zhydaxq.com/images/hand/hand_000.png',\n        'https://avatarData.zhydaxq.com/images/prop/prop_000.png',\n\n        // 活动默认展示\n        'https://avatarData.zhydaxq.com/images/suit/qixiBoy.jpg',\n        'https://avatarData.zhydaxq.com/images/bg/bg_019.jpg',\n        'https://avatarData.zhydaxq.com/images/cloth/cloth_022.png',\n        'https://avatarData.zhydaxq.com/images/face/face_005.png',\n        'https://avatarData.zhydaxq.com/images/eye/eye_016.png',\n        'https://avatarData.zhydaxq.com/images/brow/brow_002.png',\n        'https://avatarData.zhydaxq.com/images/mouth/mouth_013.png',\n        'https://avatarData.zhydaxq.com/images/hair/hair_023.png',\n        'https://avatarData.zhydaxq.com/images/hand/hand_006.png',\n        'https://avatarData.zhydaxq.com/images/prop/prop_022.png'\n      ],\n      startPageShow: true,\n      device: {}\n    }\n  },\n  created () {\n    // 初始化默认数据\n    this.headOptions = Object.assign({}, this.headOrigin)\n\n    // 获取query\n    this.searches = {}\n    window.location.search.substring(1).split('&').forEach(item => {\n      let ret = item.split('=')\n      this.searches[ret[0]] = ret[1]\n    })\n\n    // 获取设备型号\n    this.device = {\n      app: !!UA.match(/SNEBUY-APP;?/i),\n      lite: !!UA.match(/SNLITE-WAP/i),\n      android: !!UA.match(/android/i),\n      ios: !!UA.match(/(iPhone|iPod|iPad);?/i),\n      iphonex: !!UA.match(/(iPhone|iPod|iPad);?/i) && (screen.height === 812 && screen.width === 375),\n      wx: !!UA.match(/MicroMessenger/i)\n    }\n\n    // ajax获取接口数据\n    $.ajax('/api/data').then((response) => {\n      if (response.errno === ERR_OK) {\n        this.avatarData = response.data\n        this.partList = this.avatarData[this.actPart]\n        // 设置节日主题\n        if (this.searches && this.searches.custom === 'qixijie') {\n          this.headOptions = Object.assign(this.headOptions, this.headOrigin, this.avatarData.suit.qixiBoy)\n        } else {\n          this.headOptions = Object.assign(this.headOptions, this.headOrigin)\n        }\n      }\n    }, (response) => {\n      console.log('error')\n    })\n\n    this.touch = {\n      moveY: 0,\n      endY: 0,\n      // 列表滚动是否可以重置\n      isListRefresh: false,\n      isStop: false\n    }\n  },\n  mounted () {\n    // 获取DOM初始值\n    this.appHeadHeightOrigin = parseInt(window.getComputedStyle(this.$refs.appHead.$el).height)\n    this.appTabWrapperHeightOrigin = parseInt(window.getComputedStyle(this.$refs.appTabWrapper.$el).height)\n    this.appListWrapperHeightOrigin = parseInt(window.getComputedStyle(this.$refs.appListWrapper.$el).height)\n  },\n  methods: {\n    selectTab (key) {\n      this.partList = key.match(/Color$/) ? this.headOptions[key] : this.avatarData[key]\n      this.actPart = key\n    },\n    selectItem (actPart, item) {\n      this.headOptions[actPart] = item\n    },\n    selectSuit (options) {\n      this.headOptions = Object.assign(this.headOptions, this.headOrigin, options)\n    },\n    selectColor (hslArr) {\n      this.headOptions[this.actPart] = hslArr\n    },\n    selectColorImg (img) {\n      this.headOptions[this.actPart.replace(/Color$/g, '')] = img\n    },\n    // 恢复初始部件\n    restoreItem () {\n      this.headOptions[this.actPart] = this.avatarData[this.actPart][0]\n    },\n    // 恢复套装\n    restoreSuit () {\n      this.headOptions = Object.assign(this.headOptions, this.headOrigin)\n    },\n    listScroll (e) {\n      if (this.touch.isStop) { // 是否停止滚动\n        return\n      }\n\n      // console.log(`e.maxScrollY: ${e.maxScrollY}, e.distY: ${e.distY}, e.y: ${e.y}, ${e.maxScrollY/2 - e.y}`)\n      // console.log((e.maxScrollY - e.y) * 0.5))\n      // 元素上下位移值，最大值为tab切高度，最小值为0\n      // this.touch.moveY = Math.min(Math.max(0 - this.appTabWrapperHeightOrigin, (this.touch.endY - (e.maxScrollY / 2 - e.y) * 0.5)), 0)\n      this.touch.moveY = Math.min(Math.max(0 - this.appTabWrapperHeightOrigin, (this.touch.endY + e.distY * 0.5)), 0)\n\n      // 头部高度调整\n      this.$refs.appHead.$el.style.height = this.appHeadHeightOrigin + this.touch.moveY + 'px'\n      this.$refs.appHead.$el.style.transition = null\n      // tab切高度调整\n      this.$refs.appTabWrapper.$el.style.transform = 'translate(0, ' + this.touch.moveY + 'px)'\n      this.$refs.appTabWrapper.$el.style.transition = null\n      // 部件高度调整\n      this.$refs.appListWrapper.$el.style.height = this.appListWrapperHeightOrigin - this.touch.moveY * 2 + 'px'\n      this.$refs.appListWrapper.$el.style.transition = null\n\n      // 重置滚动\n      var appListWrapperOuterHeight = this.appListWrapperHeightOrigin + this.appTabWrapperHeightOrigin * 2\n      var appListWrapperInnerHeight = this.$refs.appListWrapper.$el.childNodes[0].offsetHeight\n      if (this.touch.moveY === 0 - this.appTabWrapperHeightOrigin && appListWrapperOuterHeight <= appListWrapperInnerHeight && !this.touch.isListRefresh) { // 向上滚动到高度最大时，同时滚动元素大于外包元素时\n        this.touch.isListRefresh = true\n        this.$refs.appListWrapper.refresh()\n      }\n    },\n    listScrollEnd (e) {\n      // 开启滚动\n      this.touch.isStop = false\n      // //\n      this.touch.isListRefresh = false\n      // //\n      this.touch.endY = this.touch.moveY\n    },\n    StartGO () {\n      this.startPageShow = false\n    },\n    headTap () {\n      // 关闭滚动\n      this.touch.isStop = true\n\n      // 重置各元素初始样式\n      this.touch.moveY = this.touch.endY = 0\n      this.$refs.appHead.$el.style.height = this.appHeadHeightOrigin + 'px'\n      this.$refs.appHead.$el.style.transition = 'height 0.3s'\n      this.$refs.appTabWrapper.$el.style.transform = 'translate(0,0)'\n      this.$refs.appTabWrapper.$el.style.transition = 'transform 0.3s'\n      this.$refs.appListWrapper.$el.style.height = this.appListWrapperHeightOrigin + 'px'\n      this.$refs.appListWrapper.$el.style.transition = 'height 0.3s'\n    },\n    // 随机选择部件\n    randomSelect () {\n      var result = {}\n      Object.entries(this.avatarData).forEach((arr) => {\n        let key = arr[0]\n        let val = arr[1]\n        if (!key.match(/(suit|Color)\\b$/)) {\n          // 取随机数，调高0的概率\n          let random = Math.ceil(Math.random() * (val.length - 1 + 10))\n          random = Math.max(0, random - 10)\n\n          if (key === 'prop') {\n            random = 0\n          }\n\n          result[key] = val[random]\n          // console.log(`ket: ${key}, random: ${random}, val: ${val[random]}, len: ${val.length}`)\n        }\n      })\n      this.headOptions = Object.assign(this.headOptions, result)\n    }\n  },\n  components: {\n    Avatar,\n    Tab,\n    List,\n    Loading,\n    StartPage\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  position: absolute;\n  left: 50%;\n  width: 100%;\n  height: 100%;\n  max-width: 7.5rem;\n  transform: translate(-50%,0);\n  background: #f0f4f5;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.device,attrs:{\"id\":\"app\"}},[_c('Loading',{attrs:{\"preLoadArr\":_vm.preLoadArr}}),_vm._v(\" \"),_c('StartPage',{attrs:{\"isShow\":_vm.startPageShow},on:{\"start-go\":_vm.StartGO}}),_vm._v(\" \"),_c('Avatar',{ref:\"appHead\",attrs:{\"headOptions\":_vm.headOptions},on:{\"select-color-img\":_vm.selectColorImg,\"head-tap\":_vm.headTap,\"rondom-select\":_vm.randomSelect}}),_vm._v(\" \"),_c('Tab',{ref:\"appTabWrapper\",attrs:{\"act-part\":_vm.actPart},on:{\"select-tab\":_vm.selectTab}}),_vm._v(\" \"),_c('List',{ref:\"appListWrapper\",attrs:{\"partList\":_vm.partList,\"act-part\":_vm.actPart},on:{\"select-item\":_vm.selectItem,\"select-suit\":_vm.selectSuit,\"select-color\":_vm.selectColor,\"restore-item\":_vm.restoreItem,\"restore-suit\":_vm.restoreSuit,\"list-scroll\":_vm.listScroll,\"list-scroll-end\":_vm.listScrollEnd}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-11ac8a5b\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-11ac8a5b\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-11ac8a5b\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport '@/assets/js/plugins/flexible'\nimport '@/assets/stylus/index.styl'\nimport VueLazyload from 'vue-lazyload'\n\n// 懒加载\nVue.use(VueLazyload, {\n  preLoad: 1.3,\n  error: '',\n  loading: '',\n  attempt: 2,\n  dispatchEvent: false\n})\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODE4QjREMDI4RjM1MTFFODhERDVFNEQ5MzM1M0UzNjgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODE4QjREMDE4RjM1MTFFODhERDVFNEQ5MzM1M0UzNjgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjA2MjQ1QzhCOEYzMjExRThCNEM2RkE4OEJBMjdDRTk2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjA2MjQ1QzhDOEYzMjExRThCNEM2RkE4OEJBMjdDRTk2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+bP5M7AAADO5JREFUeNrsnQlwXVUZx09cwAWV6BRKR0RSFRSxQquCZRChGRV3JXVBoS6TiFMRRjEP3MVxEodBmRG1ccMdEwemKqCmFMqMeyM6WhTGxg0FRYiOZbEK8fv3frfc3N773r1vuXlpfr+Zb1763t16z/m9s97zemZnZwMAZPMAbgEAggAgCACCACAIAIIAIAgAggAgCACCAACCACAIAIIAIAgAggAgCACCACAIAIIAIAgAIAgAggAgCACCACAIAIIAIAgAggAgCAAgCACCACAIAIIAIAgAggAgCACCACAIAIIAAIIAIAgAggAgCACCACAIAIIAIAgAggAAggAgCACCACAIAIIAIAgAggAgCACCACAIAOzBg7gF+dQ273X/pX0sTrF4hsU9FldbbIo/HDmRNEeQxcthFhv9dfd3gMVVLs1d3CKqWIuVp1hcm5Ij5gUWn+QWIchi5QiLayyW1tnm9RbLuFUIsthY4XIcUCAfPI3bhSCLiad7A3xJwe3v5JbRSK8S9Ri93L/Fb7OYsLi5onMfbTFp8eiC2//D4qckGYJUxRLPoCsS733YYq3FFR0+90o/d2/B7WctzrT4D8lGFasqNqTkEA+zuLRAe6AVnunVqrJyfJ0kQ5CqkAgvzvlsP4sXdei8x1h832L/EnKst/gESUYVq0r2a3Bf9+/AOVdbXGnxyBJynOElHSBIpfzdYrvF8pzPf1jgGA/2qphip8WtFrfnbHucy/GIEnIMWnyWpKKKNV+83eLejPe/avHjnH0eaDFg8U2XQT1eP7f4dYh6mX5ncbFXpWKOD9FUkaJy6JrehBwIMt+op6rfYovFHRY3WpxnsS5ne/U8/dJi3OKVORleJdJbLX7kx32ny7FfSTm+QPJQxeoGrvFohKT5lMVDShz7eI9QQo7TvQQDBFlQnFRSjrJIDs21oiuXKtaCZF0HM+//LF6DHAiykIm/4dtd/fmvyzHBLUaQhcJxLsKSnDbCl9t0HnUNvypEPWKAIF3PoS7GdRavDdHDSwdmSPKG0Hovk8Y5NOfrcm47gnQ7K73+f5OL0ePv6wm/rIeYJMmbLT7fYpXtem49gnQrD7c41QXYavHqkN1b+GTf5qDU+/e5JM0O5ulcNZIBQboJTQ3p9+qRpoV8xeKEAvsd7pIsy6gmaTrIWJPX87oQTZoEBJk3HhWi1UAkg+ZfaSbtulB8ZDvmMG+TPDZDkreE5hZU0Ej8C0mi1mGgsDj7huh5i+daPD9Ea0u16/490SXRsf+ckmS9V7vWlzymZvjSxYsgHeUlIZoceKzFsywe2sFzLU9I8qeUJGe6JGeWON4RJB+CdJqNFZ+vLyHJH1OSnOWSnFWiCgi0QTrKzfNwTo2ZbPHXdJvkbIsLCh7nXyQfgnSaD8zTeQ/xkqQv47NzLD5a4Bh/IfkQpNNcYnFDge3UsP6eV4HaxeNckqwnE4ctRhrs/xOSD0E6jUalz8v5TE/9fdriORZvs3h2B+7nwS7JkzI+O9fiIzn7aS4WU00QpLKGevwc+Q6Lr4VoZRKNgGvhA/VyXRaKP/ZaFo2PaDAxa+Hpd1ucn/G+Jj3eStK1Dr1YxVjvGfRb4f6fCdjXq2CnV3D+ZS6JfsHjt6nP3hei5z4+6P/WI77vIckQpEquD3MnAB7gpcbqCq/hoIQkv0l99iFv/6hT4TRKD6pY88mRIVrHdvU8nHupS5I1CKilTTVL+AqSCEHmizXeHjmkDY3/ZjnQJTky47ObSCIEmU9uabFaqt4lrW31+xavQ08k6vcFV5AkCNJNbAtRz1EzaJxEP1Kj2b5PaMO1SJLPkSQI0m18LJSbJas5Va8I0QxgzbFqZ6/XxSQHgnQbmhO1zuIXDba7O0S9S3pyUIN2mg18URuvQ08rfpHkQJBuRGMh+omDvMmMGlx8qsX7XZQlXurs08Zr0NKj95EUCNKtSI6Tw9xZs1pgWj+r/DKLaX9Pi1Lrh3MObuO5N4doxi8gSFfzK29faPRac7Y0PvHd1DaaeXtiCyVVFudz66uBkfT2fJtrlHtnxmdan+rsJo/7Ga/GpRdf+FmIJjACJciCIUsOtUG0yklPE8f7Roh+a3BpxmcXlDiOFsa+ymOAZKIE6Rb0uOvlobmld1QinZbTxvhbKD6NXSPtVyY6Bp5n8e+MKiBQglTOJaG5wcBt3qZRl/AxGZ9/KUSLUhfh5DC310wl2SkkDYJ0A98J0XhJGW4LUe+XesXelbNNPHKujK/FG6Ys/hmi30S8MFUluyVj/7+SNAjSDSgja9G3opMStZ2WKFU3sWbkZi36JhludDk0bUUj+kd7da7POwOuT5Rc46lqmn7r8CKSBkG6hTFvGO8osO2wtz3EuTkN+7jtoblgJ+QcRyXIpb7/PSHqXj7OQwtp306yIEg3oUx9rFeB8tjo1SNxqJckWVzmr2c0OKdEOMr/1kj7Dzx2khwI0o2oaqMlS7N6jzQa/8ZEe0Vtj6yeRT3noacI9STjkgLnPJzbjiALCY20q1fpnMQ3udodp/pnQoON63L2v9Zf7wrF5l/t4JYjyEJDpYQG+fSorhZe0Ezf6xKfvyPk/9rtlkTGn2xwnrtSx4UWYKCwejRN/ehUm+AxFkN19rk28bca8fqN9LyFtN8boq5foARZsNwd5nYBH1Xny0qrNibHL9SV+9IwdwV4cWeIesMu5PZSguxtaN6VpoZ8POw5BrItY3tVszT2oScUH+/tGD2jzoLVCLLXokFCrdioGbwaBIzX5M1bG/heFwuoYi0qvu2lSfw04g3cEkoQ2LONol6uMpMTAUEWHX/gFswvPbOzs9wFANogAAgCgCAACAKAIAAIAoAgAAgCgCAAgCAACAKAIAAIAoAgAAgCgCAACAL16enpCbXNYVihv6sKO99KvULr8MhtCSzjbbCXGYvRkRN3vRZhjb+OljnX8NWzvSFaiDqPqdGTemYy9tPaWCP2qp+dXkuqtfglxyO3heVQhh33DK/f6hgySab8swEXJ4uR+BB1Dt9rmX0ildF1nnrLjE7YPmtT+2itLK3c2Otv6RrHSD1KkI7jJUa/yaAMr2/pSfu73yUZL3CIRmvq5tWJai5kzEqXbipj23GXY61f4wa7xoAkCFKlKDXLdNPKfC7Jcs+QLZUgDapSmxKlRFxajaVKjw0uT02lkf17yksTJEGQyiUZ8ypXn5csE3mNdMuou8RJZvJm8SrUoORItj9cjvj9UT/ftL3f76WKJOm1ax0l9RCkKklGXRK1QZQ5BzIydFwl0t+TdUqIWlFHkg1+b8jH7SLJMZS6xim7tlVevRtR75a3S2ZIwWLQzVuukZ7VLqmEVOkx7Y34rS5HLS1Huu0UonV8JfF2FxoKQC9WcTm2elWqcBevV7EmvcrTX1KIuBerX9UzP47eW+UlSbItUrT6NuCSBd+nFvfEAVWsVtC393ScMU2YtYku3jV1MvnuBrhn+HrMmAhTOccZSFSjprwBruMOeWfBcFHXXbANif8TUIK0rSTZNQjn/xzyxnr8zd7y4eMGdoMSpD8kBgnt/ZVhbi9Y3A08ltF5MG3XPO3/l774b0CQdkoy4N/AypTL/Zu4HcwpQTIE0fm2uxz9BapmNXqtqGJVjmW6CR8HWePfwLu/kZuRpWj3r0oMy/zK8JpGsjKvOgYI0g2SKHNOZTSAR5opxUtsO+HnWJNs36SI52/11Wsf+f+DX6hCkMop2luV7FEqWtqoe3c6IUE9IQcbHF8NdgRBkMpLl92Zrt6Uc29cN8O0lxybcmSs10gHBKmkoa5MOGgyDGV8NpmQoN5hWmrcx20QNcpTc7V2ixTL6tc7Q69VeRhJb45d1aOqR6S91FkT5o5fbLD3t9aROR7kHM+aDQCUIO0uPXq9bj+TNUPW3usvWMUaLtqot223p0qcCX9/0N+v1anyzdg1JwcUa6QignS69OjNy2jJnqM2VrFGw/09VpsSXbzK8HtMfc+QZMyvS4//bqL3CkE6WtNpkCkn231CE2IspwTaVXpkPXqbwZBXzzT1fRUzehGkE9Wr3ZmyTgbrWDdvQo54zGUqOT2lQSmiqlbNq1qDITDKjiDtlaOvSJWm0928vl+8eMRQmX29qjXsVa0xSpHG0ItVvGEeP+892kzGUnesz6eKabZHadD3Xesze3tTsjU6btyeGSBlEaTdTLUwAVAZ8g7LzLMKL41Kj0v4g1H98diHtz/GE8eNF5CYyStFtD/PqFPFahteYqzyAbd6bPJnv7My50SGEPVGunvzSoSMCY5jYe6Ue/V0jY3kzNSmF6s4THcHoIoFgCAACAKAIAAIAoAgAAgCgCAACAIACAKAIAAIAoAgAAgCgCAACAKAIAAIAoAgAIAgAAgCgCAACAKAIAAIAoAgAAgCgCAAgCAACAKAIAAIAoAgAAgCgCAACAKw1/N/AQYAoVhZnhl7I8IAAAAASUVORK5CYII=\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/restore.png\n// module id = NuHP\n// module chunks = 1","/**\r\n * HSL颜色值转换为RGB. \r\n * 换算公式改编自 http://en.wikipedia.org/wiki/HSL_color_space.\r\n * h, s, 和 l 设定在 [0, 1] 之间\r\n * 返回的 r, g, 和 b 在 [0, 255]之间\r\n *\r\n * @param   Number  h       色相\r\n * @param   Number  s       饱和度\r\n * @param   Number  l       亮度\r\n * @return  Array           RGB色值数值\r\n */\r\nexport function hslToRgb(h, s, l) {\r\n  h = h / 360;\r\n  s = s.replace(\"%\", \"\") / 100\r\n  l = l.replace(\"%\", \"\") / 100\r\n\r\n  var r, g, b;\r\n\r\n  if (s == 0) {\r\n    r = g = b = l; // achromatic\r\n  } else {\r\n    var hue2rgb = function hue2rgb(p, q, t) {\r\n      if (t < 0) t += 1;\r\n      if (t > 1) t -= 1;\r\n      if (t < 1 / 6) return p + (q - p) * 6 * t;\r\n      if (t < 1 / 2) return q;\r\n      if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\r\n      return p;\r\n    }\r\n\r\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n    var p = 2 * l - q;\r\n    r = hue2rgb(p, q, h + 1 / 3);\r\n    g = hue2rgb(p, q, h);\r\n    b = hue2rgb(p, q, h - 1 / 3);\r\n  }\r\n\r\n  return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\r\n}\r\n\r\n\r\n/**\r\n * RGB 颜色值转换为 HSL.\r\n * 转换公式参考自 http://en.wikipedia.org/wiki/HSL_color_space.\r\n * r, g, 和 b 需要在 [0, 255] 范围内\r\n * 返回的 h, s, 和 l 在 [0, 1] 之间\r\n *\r\n * @param   Number  r       红色色值\r\n * @param   Number  g       绿色色值\r\n * @param   Number  b       蓝色色值\r\n * @return  Array           HSL各值数组\r\n */\r\nexport function rgbToHsl(r, g, b) {\r\n  r /= 255, g /= 255, b /= 255;\r\n  var max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n  var h, s, l = (max + min) / 2;\r\n\r\n  if (max == min) {\r\n    h = s = 0; // achromatic\r\n  } else {\r\n    var d = max - min;\r\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n    switch (max) {\r\n      case r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n      case g: h = (b - r) / d + 2; break;\r\n      case b: h = (r - g) / d + 4; break;\r\n    }\r\n    h /= 6;\r\n  }\r\n\r\n  return [h, s, l];\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/plugins/hsl2rgb.js"],"sourceRoot":""}